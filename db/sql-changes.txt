alter table weeklysaleday add Locked smallint not null default 0;
alter table weeklysaleday add CashAmountExplanation varchar(255) not null default '';
alter table weeklysaleday add ActuallyCashAmount decimal(16,3) not null default '0.000';
alter table weeklysale add CashAmountExplanation varchar(255) not null default '';
alter table weeklysale add ActuallyCashAmount decimal(16,3) not null default '0.000';
alter table weeklysale add Year varchar(4) not null default '';

alter table company add VatPeriod varchar(15);

insert into confmenues set MenuName='FaqCategory', MenuValue='Basic', MenuChoice='Basis hjelp';
insert into confmenues set MenuName='FaqCategory', MenuValue='Advanced', MenuChoice='Avansert hjelp';

insert into confmenues set MenuName='FaqLang', MenuValue='NO', MenuChoice='Norsk';
insert into confmenues set MenuName='FaqLang', MenuValue='EN', MenuChoice='Engelsk';

insert into menu set MenuParentID=0, EN='FAQ', Interface='intranett', Module='faq', Template='edit', NO='FAQ', Sort='30';

insert into roletemplate set Interface='intranett', Module='faq', Template='edit', AccessLevel=1, AuthType='web';
insert into roletemplateaccess set Interface='intranett', Module='faq', Template='edit', AccessLevel=3, RoleID=1;
insert into roletemplateaccess set Interface='intranett', Module='faq', Template='edit', AccessLevel=3, RoleID=2;
insert into roletableaccess set TableName='faq', TableAccess=3, RoleID=1;
insert into roletableaccess set TableName='faq', TableAccess=3, RoleID=2;

CREATE TABLE faq (
  FaqID int(11) NOT NULL auto_increment,
  Question text,
  Answer text,
  Sort int,
  Category varchar(20),
  Lang varchar(10),
  TS timestamp,
  PRIMARY KEY (FaqID)
);

insert into menu set MenuParentID=56, EN='Intranett', Interface='intranett', Args='interface1=intranett', Module='role', Template='roletemplate', NO='Intranett', Sort='20';
insert into menu set MenuParentID=56, EN='Extranett', Interface='intranett', Args='interface1=extranett', Module='role', Template='roletemplate', NO='Extranett', Sort='20';
insert into menu set MenuParentID=56, EN='Internett', Interface='intranett', Args='interface1=internett', Module='role', Template='roletemplate', NO='Internett', Sort='20';
insert into menu set MenuParentID=56, EN='Lodo', Interface='intranett', Args='interface1=lodo', Module='role', Template='roletemplate', NO='Lodo', Sort='20';
insert into menu set MenuParentID=56, EN='Kindergarten', Interface='intranett', Args='interface1=kindergarten', Module='role', Template='roletemplate', NO='Barnehage', Sort='20';

insert into menu set MenuParentID=0, EN='Mediabank', Interface='intranett', Module='mediabank', Template='list', NO='Mediabank', Sort='20';


delete from menu where NO='Template definisjoner';
delete from tab where Module='role' and Name='Roller';


insert into tab set TableName='role', Interface='intranett', Module='role', Template='fieldaccess', Args='', Name='Felt tilgang', Sort=5;
insert into tab set TableName='role', Interface='intranett', Module='role', Template='actionaccess', Args='', Name='Action tilgang', Sort=5;
insert into tab set TableName='role', Interface='intranett', Module='role', Template='contentaccess', Args='', Name='Innholds tilgang', Sort=5;




alter table product change ProductHeight ProductHeight DECIMAL(16,2) default 0;
alter table product change ProductWidth ProductWidth DECIMAL(16,2) default 0;
alter table product change ProductLength ProductLength DECIMAL(16,2) default 0;
alter table product change ProductWeight ProductWeight DECIMAL(16,2) default 0;
alter table product change TaxFreeCustPrice TaxFreeCustPrice DECIMAL(16,2) default 0;
alter table product change TaxFreeCostPrice TaxFreeCostPrice DECIMAL(16,2) default 0;
alter table product drop ProductPictureBig;
alter table product drop ProductPictureSmall;
alter table product change UnitCostPrice UnitCostPrice DECIMAL(16,2) default 0;
alter table product change UnitCustPrice UnitCustPrice DECIMAL(16,2) default 0;
alter table product change ProductNumber ProductNumber varchar(255);
alter table product change Productname ProductName varchar(255);

create table pricegroup (
  PriceGroupID int not null auto_increment,
  Name varchar(255),
  Description text,
  Activ tinyint default '1',
  TS timestamp,
  primary key(PriceGroupID)
);

create table pricegroupcompanystruct (
  PriceGroupID int not null,
  CompanyID int not null,
  TS timestamp,
  primary key(PriceGroupID)
);

create table pricegroupproductstruct (
  PriceGroupID int not null,
  ProductID int not null,
  Type set('campaign', 'percent', 'amount') default 'percent',
  Value DECIMAL(16,2) default 0,
  TS timestamp,
  key(PriceGroupID, ProductID)
);

alter table invoicein drop FileName;
alter table invoicein drop FileSize;
alter table invoicein drop FileHeight;
alter table invoicein drop FileWidth;
alter table invoicein drop FileType;
alter table invoicein drop FileHeading;
alter table invoicein drop FileURL;
alter table invoicein drop FileAlign;

alter table invoiceout drop FileName;
alter table invoiceout drop FileSize;
alter table invoiceout drop FileHeight;
alter table invoiceout drop FileWidth;
alter table invoiceout drop FileType;
alter table invoiceout drop FileHeading;
alter table invoiceout drop FileURL;
alter table invoiceout drop FileAlign;

alter table invoiceout change CreatedByID CreatedByPersonID;
alter table invoiceout drop InvoiceHoursUsed;
alter table invoiceout drop InvoiceHoursTotal;
alter table invoiceout drop FreightCost;
alter table invoiceout drop ExpeditionCost;
alter table invoiceout change InvoiceComment InvoiceCommentInternal text;
alter table invoiceout change InvoiceDescription invoiceCommentCustomer text;
alter table invoiceout change InvoiceTotalRounded InvoiceTotalRounded DECIMAL(16,2) default 0;
alter table invoiceout change InvoiceTotal InvoiceTotal DECIMAL(16,2) default 0;
alter table invoiceout change VAT Vat DECIMAL(16,2) default 0;
alter table invoiceout change VATAmount VATAmount DECIMAL(16,2) default 0;
alter table invoiceout change OrderRef OrderRefCustomer varchar(255);
alter table invoiceout add OrderRefInternal varchar(255);
alter table invoiceout add IPoBoxZipCode varchar(255);
alter table invoiceout add IPoBoxZipCodeCity varchar(255);
alter table invoiceout add DPoBoxZipCode varchar(255);
alter table invoiceout add DPoBoxZipCodeCity varchar(255);
alter table invoiceout change ProjectName ProjectNameInternal varchar(255);

alter table invoicein change CreatedByID CreatedByPersonID;
alter table invoicein drop InvoiceHoursUsed;
alter table invoicein drop InvoiceHoursTotal;
alter table invoicein drop FreightCost;
alter table invoicein drop ExpeditionCost;
alter table invoicein change InvoiceComment InvoiceCommentInternal text;
alter table invoicein change InvoiceDescription invoiceCommentCustomer text;
alter table invoicein change InvoiceTotalRounded InvoiceTotalRounded DECIMAL(16,2) default 0;
alter table invoicein change InvoiceTotal InvoiceTotal DECIMAL(16,2) default 0;
alter table invoicein change VAT Vat DECIMAL(16,2) default 0;
alter table invoicein change VATAmount VATAmount DECIMAL(16,2) default 0;
alter table invoicein change OrderRef OrderRefCustomer varchar(255);
alter table invoicein add OrderRefInternal varchar(255);
alter table invoicein add IPoBoxZipCode varchar(255);
alter table invoicein add IPoBoxZipCodeCity varchar(255);
alter table invoicein add DPoBoxZipCode varchar(255);
alter table invoicein add DPoBoxZipCodeCity varchar(255);
alter table invoicein change ProjectName ProjectNameInternal varchar(255);


alter table ordercust change I_Email IEmail varchar(255);
alter table ordercust change D_Email DEmail varchar(255);
alter table ordercust change D_Name DName varchar(255);
alter table ordercust change D_Address DAddress varchar(255);
alter table ordercust change D_City DCity varchar(255);
alter table ordercust change D_PostalCode DZipCode varchar(255);
alter table ordercust change D_Country DCountry varchar(255);
alter table ordercust change TotalOrdered TotalOrdered DECIMAL(16,2) default 0;
alter table ordercust change TotalDelivered TotalDelivered DECIMAL(16,2) default 0;
alter table ordercust add OrderCommentInternal text;
alter table ordercust add OrderCommentCustomer text;
alter table ordercust change ProjectStopDate ProjectStopDate datetime;
alter table ordercust change OrderRef OrderRefCustomer varchar(255);
alter table ordercust add OrderRefInternal varchar(255);

alter table orderpurchase add IEmail varchar(255);
alter table orderpurchase add DEmail varchar(255);
alter table orderpurchase change D_Name DName varchar(255);
alter table orderpurchase change D_Address DAddress varchar(255);
alter table orderpurchase change D_City DCity varchar(255);
alter table orderpurchase change D_PostalCode DZipCode varchar(255);
alter table orderpurchase change D_Country DCountry varchar(255);

alter table ordercustline add VatID int;
alter table ordercustline change VAT Vat DECIMAL(16,2) default 0;
alter table ordercustline change UnitCustPrice UnitCustPrice DECIMAL(16,2) default 0;
alter table ordercustline change UnitCostPrice UnitCostPrice DECIMAL(16,2) default 0;
alter table ordercustline change QuantityOrdered QuantityOrdered DECIMAL(16,2) default 0;
alter table ordercustline change QuantityDelivered QuantityDelivered DECIMAL(16,2) default 0;
alter table ordercustline add Comment varchar(255);
alter table ordercustline add TaxFree smallint;
alter table ordercustline add ValidFromDate datetime;
alter table ordercustline add ValidToDate datetime;

alter table orderpurchaseline add VatID int;
alter table orderpurchaseline change VAT Vat DECIMAL(16,2) default 0;
alter table orderpurchaseline change UnitCustPrice UnitCustPrice DECIMAL(16,2) default 0;
alter table orderpurchaseline change UnitCostPrice UnitCostPrice DECIMAL(16,2) default 0;
alter table orderpurchaseline change QuantityOrdered QuantityOrdered DECIMAL(16,2) default 0;
alter table orderpurchaseline change QuantityDelivered QuantityDelivered DECIMAL(16,2) default 0;
alter table orderpurchaseline add TaxFree smallint;
alter table orderpurchaseline add Comment varchar(255);
alter table orderpurchaseline add ValidFromDate datetime;
alter table orderpurchaseline add ValidToDate datetime;

alter table ordersubscriptionline add VatID int;
alter table ordersubscriptionline change VAT Vat DECIMAL(16,2) default 0;
alter table ordersubscriptionline change UnitCustPrice UnitCustPrice DECIMAL(16,2) default 0;
alter table ordersubscriptionline change UnitCostPrice UnitCostPrice DECIMAL(16,2) default 0;
alter table ordersubscriptionline change QuantityOrdered QuantityOrdered DECIMAL(16,2) default 0;
alter table ordersubscriptionline change QuantityDelivered QuantityDelivered DECIMAL(16,2) default 0;
alter table ordersubscriptionline add TaxFree smallint;
alter table ordersubscriptionline add Comment varchar(255);
alter table ordersubscriptionline add ValidFromDate datetime;
alter table ordersubscriptionline add ValidToDate datetime;

alter table invoiceoutline add VatID int;
alter table invoiceoutline change UnitCustPrice UnitCustPrice DECIMAL(16,2) default 0;
alter table invoiceoutline change UnitCostPrice UnitCostPrice DECIMAL(16,2) default 0;
alter table invoiceoutline change QuantityOrdered QuantityOrdered DECIMAL(16,2) default 0;
alter table invoiceoutline change QuantityDelivered QuantityDelivered DECIMAL(16,2) default 0;
alter table invoiceoutline change VAT Vat DECIMAL(16,2) default 0;
alter table invoiceoutline add TaxFree smallint;
alter table invoiceoutline change ProductNumber ProductNumber varchar(255);

alter table invoiceinline add VatID int;
alter table invoiceinline change UnitCustPrice UnitCustPrice DECIMAL(16,2) default 0;
alter table invoiceinline change UnitCostPrice UnitCostPrice DECIMAL(16,2) default 0;
alter table invoiceinline change QuantityOrdered QuantityOrdered DECIMAL(16,2) default 0;
alter table invoiceinline change QuantityDelivered QuantityDelivered DECIMAL(16,2) default 0;
alter table invoiceinline change VAT Vat DECIMAL(16,2) default 0;
alter table invoiceinline add TaxFree smallint;
alter table invoiceinline change ProductNumber ProductNumber varchar(255);

alter table product add BigImageID int;
alter table product add SmallImageID int;
alter table product add ProductFileID int;

alter table person drop Photo;
alter table person drop PhotoSize;
alter table person drop PhotoHeight;
alter table person drop PhotoWidth;
alter table person drop PhotoType;
alter table person drop PhotoHeading;
alter table person drop PhotoURL;
alter table person drop PhotoAlign;

alter table persons drop Photo;
alter table persons drop PhotoSize;
alter table persons drop PhotoHeight;
alter table persons drop PhotoWidth;
alter table persons drop PhotoType;
alter table persons drop PhotoHeading;
alter table persons drop PhotoURL;
alter table persons drop PhotoAlign;

alter table company drop Logo;
alter table company drop LogoSize;
alter table company drop LogoHeight;
alter table company drop LogoWidth;
alter table company drop LogoType;
alter table company drop LogoHeading;
alter table company drop LogoURL;
alter table company drop LogoAlign;

alter table publishcontent drop File;
alter table publishcontent drop FileSize;
alter table publishcontent drop FileHeight;
alter table publishcontent drop FileWidth;
alter table publishcontent drop FileType;
alter table publishcontent drop FileHeading;
alter table publishcontent drop FileURL;
alter table publishcontent drop FileAlign;

alter table publishcontent drop ImageName;
alter table publishcontent drop ImageNameSize;
alter table publishcontent drop ImageNameHeight;
alter table publishcontent drop ImageNameWidth;
alter table publishcontent drop ImageNameType;
alter table publishcontent drop ImageNameHeading;
alter table publishcontent drop ImageNameURL;
alter table publishcontent drop ImageNameAlign;

alter table publishcontent drop Image1Name;
alter table publishcontent drop Image1NameSize;
alter table publishcontent drop Image1NameHeight;
alter table publishcontent drop Image1NameWidth;
alter table publishcontent drop Image1NameType;
alter table publishcontent drop Image1NameHeading;
alter table publishcontent drop Image1NameURL;
alter table publishcontent drop Image1NameAlign;

alter table publishcontent drop Image2Name;
alter table publishcontent drop Image2NameSize;
alter table publishcontent drop Image2NameHeight;
alter table publishcontent drop Image2NameWidth;
alter table publishcontent drop Image2NameType;
alter table publishcontent drop Image2NameHeading;
alter table publishcontent drop Image2NameURL;
alter table publishcontent drop Image2NameAlign;

alter table publishcategory drop ImageName;
alter table publishcategory drop ImageNameSize;
alter table publishcategory drop ImageNameHeight;
alter table publishcategory drop ImageNameWidth;
alter table publishcategory drop ImageNameType;
alter table publishcategory drop ImageNameHeading;
alter table publishcategory drop ImageNameURL;
alter table publishcategory drop ImageNameAlign;

alter table publishcategory drop Image1Name;
alter table publishcategory drop Image1NameSize;
alter table publishcategory drop Image1NameHeight;
alter table publishcategory drop Image1NameWidth;
alter table publishcategory drop Image1NameType;
alter table publishcategory drop Image1NameHeading;
alter table publishcategory drop Image1NameURL;
alter table publishcategory drop Image1NameAlign;

alter table publishcategory drop Image2Name;
alter table publishcategory drop Image2NameSize;
alter table publishcategory drop Image2NameHeight;
alter table publishcategory drop Image2NameWidth;
alter table publishcategory drop Image2NameType;
alter table publishcategory drop Image2NameHeading;
alter table publishcategory drop Image2NameURL;
alter table publishcategory drop Image2NameAlign;

alter table publishcontent add Publisher varchar(255);
alter table publishcontent add Contributor varchar(255);
alter table publishcontent add Identifier  varchar(255);
alter table publishcontent add Source varchar(255);
alter table publishcontent add Relation varchar(255);
alter table publishcontent add Coverage varchar(255);
alter table publishcontent add Rights varchar(255);

alter table media add Publisher varchar(255);
alter table media add Contributor varchar(255);
alter table media add Identifier  varchar(255);
alter table media add Source varchar(255);
alter table media add Relation varchar(255);
alter table media add Coverage varchar(255);
alter table media add Rights varchar(255);

create table address (
  AddressID int not null auto_increment,
  AddressType set('invoice', 'delivery', 'visit') not null,
  ValidFrom datetime,
  ValidTo datetime,
  Name varchar(255) not null,
  Address varchar(255),
  City varchar(255),
  ZipCode varchar(10),
  Country varchar(255),
  PoBox varchar(10),
  PoBoxCity varchar(10),
  PoBoxZipCode varchar(255),
  PoBoxZipCodeCity varchar(255),
  Activ tinyint default '1',
  TS timestamp,
  primary key(AddressID)
);

create table addresscompanystruct (
  AddressID int,
  CompanyID int,
  Activ tinyint default '1',
  TS timestamp,
  unique(AddressID, CompanyID)
);

create table addresspersonstruct (
  AddressID int,
  PersonID int,
  Activ tinyint default '1',
  TS timestamp,
  unique(AddressID, PersonID)
);

drop table address;
drop table addresscompanystruct;
drop table addresspersonstruct;

CREATE TABLE roleactionaccess (
  RoleActionAccessID int(11) NOT NULL auto_increment,
  Module varchar(40) not null,
  Action varchar(40) not null,
  RoleID int not null,
  Access int not null default '0',
  TS timestamp,
  PRIMARY KEY (RoleActionAccessID),
  KEY(RoleID),
  Key(Module, Action)
) TYPE=ISAM PACK_KEYS=1;

CREATE TABLE rolefieldaccess (
  RoleFieldAccessID int(11) NOT NULL auto_increment,
  TableName varchar(40) not null,
  FieldName varchar(40) not null,
  RoleID int not null,
  Access int not null default '0',
  TS timestamp,
  PRIMARY KEY (RoleFieldAccessID),
  KEY(RoleID),
  KEY(TableName, FieldName)
) TYPE=ISAM PACK_KEYS=1;

CREATE TABLE rolecontentaccess (
  RoleContentAccessID int(11) NOT NULL auto_increment,
  TableName varchar(60) not null,
  FieldName varchar(60) not null,
  PrimaryKey int not null,
  Access int not null default '0',
  RoleID int not null,
  TS timestamp,
  PRIMARY KEY (RoleContentAccessID),
  KEY(RoleID),
  KEY(TableName, FieldName, PrimaryKey)
) TYPE=ISAM PACK_KEYS=1;

insert into roletemplate set Interface='intranett', Module='mediabank', Template='search', AccessLevel=1, AuthType='web';
insert into roletemplateaccess set Interface='intranett', Module='mediabank', Template='search', AccessLevel=3, RoleID=1;
insert into roletemplateaccess set Interface='intranett', Module='mediabank', Template='search', AccessLevel=3, RoleID=2;

drop table documents;
drop table pages;

alter table person add PictureImageID int;
alter table company add LogoImageID int;
alter table publishcontent add HeadingMediaID int;
alter table publishcontent add IngressMediaID int;
alter table publishcontent add TeaserMediaID int;
alter table publishcontent add BodyMediaID int;
alter table publishcategory add HeadingMediaID int;
alter table publishcategory add BodyMediaID int;
alter table invoiceout add InvoiceFileID int;
alter table invoicein add InvoiceFileID int;

rename table persons to person;

insert into roletemplate set Interface='intranett', Module='mediabank', Template='used', AccessLevel=1, AuthType='web';
insert into roletemplateaccess set Interface='intranett', Module='mediabank', Template='used', AccessLevel=3, RoleID=1;
insert into roletemplateaccess set Interface='intranett', Module='mediabank', Template='used', AccessLevel=3, RoleID=2;
insert into tab set TableName='mediaedit', Interface='intranett', Module='mediabank', Template='used', Name='Brukt', Sort=5;

alter table company add HourAccountPlanID int not null default '0';


CREATE TABLE `timer_customeruser` (
  `customer_id` int(10) unsigned NOT NULL default '0',
  `ext_user_id` int(10) unsigned NOT NULL default '0',
  `unactive` int(10) unsigned NOT NULL default '0'
) TYPE=MyISAM;
CREATE TABLE `timer_estimateitem` (
  `estimate_id` int(10) unsigned NOT NULL default '0',
  `projecttype_id` int(10) unsigned NOT NULL default '0',
  `customer_id` int(10) unsigned NOT NULL default '0',
  `amount` float NOT NULL default '0',
  KEY `Index_1` (`estimate_id`),
  KEY `Index_2` (`projecttype_id`),
  KEY `Index_3` (`customer_id`)
) TYPE=MyISAM;
CREATE TABLE `timer_estimatesheet` (
  `estimate_id` int(10) unsigned NOT NULL auto_increment,
  `ext_client_id` int(10) unsigned NOT NULL default '0',
  `ext_user_id` int(10) unsigned NOT NULL default '0',
  `name` varchar(45) NOT NULL default '',
  PRIMARY KEY  (`estimate_id`),
  KEY `Index_2` (`ext_client_id`),
  KEY `Index_3` (`ext_user_id`)
) TYPE=MyISAM AUTO_INCREMENT=11 ;

INSERT INTO `timer_estimatesheet` VALUES (1, 1, 1, '2005');
INSERT INTO `timer_estimatesheet` VALUES (2, 1, 2, '2005 året');
INSERT INTO `timer_estimatesheet` VALUES (4, 1, 3, '2005');
INSERT INTO `timer_estimatesheet` VALUES (5, 1, 5, '2005');
INSERT INTO `timer_estimatesheet` VALUES (6, 1, 4, '2005');
INSERT INTO `timer_estimatesheet` VALUES (10, 1, 1, 'test 2005');
INSERT INTO `timer_estimatesheet` VALUES (9, 1, 1, 'test 2005');

CREATE TABLE `timer_holidays` (
  `day` bigint(20) unsigned default '0',
  UNIQUE KEY `Index_1` (`day`)
) TYPE=MyISAM;

INSERT INTO `timer_holidays` VALUES (1103086800);
INSERT INTO `timer_holidays` VALUES (1104555600);
INSERT INTO `timer_holidays` VALUES (1111554000);
INSERT INTO `timer_holidays` VALUES (1111640400);
INSERT INTO `timer_holidays` VALUES (1111726800);
INSERT INTO `timer_holidays` VALUES (1111986000);
INSERT INTO `timer_holidays` VALUES (1115265600);
INSERT INTO `timer_holidays` VALUES (1116216000);
INSERT INTO `timer_holidays` VALUES (1116302400);
INSERT INTO `timer_holidays` VALUES (1121054400);
INSERT INTO `timer_holidays` VALUES (1121140800);
INSERT INTO `timer_holidays` VALUES (1121227200);
INSERT INTO `timer_holidays` VALUES (1121313600);
INSERT INTO `timer_holidays` VALUES (1121400000);
INSERT INTO `timer_holidays` VALUES (1121659200);
INSERT INTO `timer_holidays` VALUES (1121745600);
INSERT INTO `timer_holidays` VALUES (1121832000);
INSERT INTO `timer_holidays` VALUES (1121918400);
INSERT INTO `timer_holidays` VALUES (1122004800);
INSERT INTO `timer_holidays` VALUES (1122264000);
INSERT INTO `timer_holidays` VALUES (1122350400);
INSERT INTO `timer_holidays` VALUES (1122436800);
INSERT INTO `timer_holidays` VALUES (1122523200);
INSERT INTO `timer_holidays` VALUES (1122609600);
INSERT INTO `timer_holidays` VALUES (1135573200);
INSERT INTO `timer_holidays` VALUES (1135659600);
INSERT INTO `timer_holidays` VALUES (1135746000);
INSERT INTO `timer_holidays` VALUES (1135832400);
INSERT INTO `timer_holidays` VALUES (1135918800);

CREATE TABLE `timer_logday` (
  `log_id` int(10) unsigned NOT NULL auto_increment,
  `ext_user_id` int(10) unsigned NOT NULL default '0',
  `ext_client_id` int(10) unsigned NOT NULL default '0',
  `time_from` int(10) unsigned NOT NULL default '0',
  `time_to` int(10) unsigned NOT NULL default '0',
  `date` date NOT NULL default '0000-00-00',
  PRIMARY KEY  (`log_id`),
  KEY `Index_2` (`ext_user_id`),
  KEY `Index_3` (`ext_client_id`)
) TYPE=MyISAM AUTO_INCREMENT=72 ;
CREATE TABLE `timer_logdaycustomer` (
  `log_id` int(10) unsigned NOT NULL default '0',
  `customer_id` int(10) unsigned NOT NULL default '0',
  `time_from` int(10) unsigned NOT NULL default '0',
  `time_to` int(10) unsigned NOT NULL default '0'
) TYPE=MyISAM;

INSERT INTO `timer_projecttype` VALUES (2, 1, 500, 'Lodo lisens');
INSERT INTO `timer_projecttype` VALUES (3, 1, 500, 'Bokføring');
INSERT INTO `timer_projecttype` VALUES (4, 1, 500, 'Lønn');
INSERT INTO `timer_projecttype` VALUES (5, 1, 500, 'Kasse');
INSERT INTO `timer_projecttype` VALUES (6, 1, 500, 'Faktura');
INSERT INTO `timer_projecttype` VALUES (7, 1, 500, 'Konsulent');
INSERT INTO `timer_projecttype` VALUES (8, 1, 500, 'Årsoppgjør');
INSERT INTO `timer_projecttype` VALUES (9, 1, 500, 'Skjenkeavgift');
INSERT INTO `timer_projecttype` VALUES (11, 1, 500, 'Brev');

insert into roletemplate set Interface='lodo', Module='timereg', Template='holidays', AccessLevel=1, AuthType='web';
insert into roletemplate set Interface='lodo', Module='timereg', Template='index', AccessLevel=1, AuthType='web';
insert into roletemplate set Interface='lodo', Module='timereg', Template='logday', AccessLevel=1, AuthType='web';
insert into roletemplate set Interface='lodo', Module='timereg', Template='projecttypes', AccessLevel=1, AuthType='web';
insert into roletemplate set Interface='lodo', Module='timereg', Template='report', AccessLevel=1, AuthType='web';

alter table voucher change AmountIn AmountIn DECIMAL(16,2) default 0;
alter table voucher change AmountOut AmountOut DECIMAL(16,2) default 0;

alter table mediastorage add DPI int(11) default 72;

alter table media drop Subject;
alter table media change Description Description text default '';
alter table mediastorage drop Heading; 

update roletemplate set AccessLevel=0 where Interface='lodo' and  Module='lodo' and Template='index';


alter table accountplan add IPoBoxZipCodeCity varchar(255);

insert into roletemplate set Interface='intranett', Module='mediabank', Template='images', AccessLevel=1, AuthType='web';
insert into roletemplateaccess set Interface='intranett', Module='mediabank', Template='images', AccessLevel=3, RoleID=1;
insert into roletemplateaccess set Interface='intranett', Module='mediabank', Template='images', AccessLevel=3, RoleID=2;

insert into roletemplate set Interface='intranett', Module='mediabank', Template='category', AccessLevel=1, AuthType='web';
insert into roletemplateaccess set Interface='intranett', Module='mediabank', Template='category', AccessLevel=3, RoleID=1;
insert into roletemplateaccess set Interface='intranett', Module='mediabank', Template='category', AccessLevel=3, RoleID=2;

insert into roletemplate set Interface='intranett', Module='mediabank', Template='categorylist', AccessLevel=1, AuthType='web';
insert into roletemplateaccess set Interface='intranett', Module='mediabank', Template='categorylist', AccessLevel=3, RoleID=1;
insert into roletemplateaccess set Interface='intranett', Module='mediabank', Template='categorylist', AccessLevel=3, RoleID=2;

insert into roletemplate set Interface='intranett', Module='mediabank', Template='keywordlist', AccessLevel=1, AuthType='web';
insert into roletemplateaccess set Interface='intranett', Module='mediabank', Template='keywordlist', AccessLevel=3, RoleID=1;
insert into roletemplateaccess set Interface='intranett', Module='mediabank', Template='keywordlist', AccessLevel=3, RoleID=2;

insert into roletemplate set Interface='intranett', Module='mediabank', Template='keyword', AccessLevel=1, AuthType='web';
insert into roletemplateaccess set Interface='intranett', Module='mediabank', Template='keyword', AccessLevel=3, RoleID=1;
insert into roletemplateaccess set Interface='intranett', Module='mediabank', Template='keyword', AccessLevel=3, RoleID=2;

CREATE TABLE mediastorage (
  MediaStorageID int(11) not null auto_increment,
  MediaID int(11) NOT NULL,
  FileName varchar(255),
  Size int(11),
  Height int(11),
  Width int(11),
  Type varchar(10),
  Heading varchar(255),
  URL varchar(255),
  Align varchar(10),
  Active smallint default 1,
  Original smallint default 0,
  TS timestamp,
  PRIMARY KEY (MediaStorageID)
) TYPE=ISAM PACK_KEYS=1;

CREATE TABLE mediacatmediacatstruct (
  MediaCatMediaCatStructID int(11) not null auto_increment,
  ParentMediaCategoryID int(11) NOT NULL,
  ChildMediaCategoryID int(11) NOT NULL,
  Active smallint default 1,
  TS timestamp,
  PRIMARY KEY (MediaCatMediaCatStructID, ParentMediaCategoryID, ChildMediaCategoryID)
) TYPE=ISAM PACK_KEYS=1;

CREATE TABLE mediakeymediakeystruct (
  MediaKeyMediaKeyStructID int(11) not null auto_increment,
  ParentMediaKeywordID int(11) NOT NULL,
  ChildMediaKeywordID int(11) NOT NULL,
  Active smallint default 1,
  TS timestamp,
  PRIMARY KEY (MediaKeyMediaKeyStructID, ParentMediaKeywordID, ChildMediaKeywordID)
) TYPE=ISAM PACK_KEYS=1;

alter table media drop ImageFileName;
alter table media drop ImageFileNameSize;
alter table media drop ImageFileNameHeight;
alter table media drop ImageFileNameWidth;
alter table media drop ImageFileNameType;
alter table media drop ImageFileNameHeading;
alter table media drop ImageFileNameURL;
alter table media drop ImageFileNameAlign;
alter table mediakeywordstruct add Active smallint default 1;
alter table mediacategorystruct add Active smallint default 1;

alter table confdbfields add FormTypeEdit varchar(30) not null;
alter table confdbfields add FieldExtraEdit varchar(30) not null;

insert into roletemplate set Interface='intranett', Module='sla', Template='list_improvement', AccessLevel=1, AuthType='web';

alter table accountplan add BirthDate datetime;
alter table arbeidsgiveravgift add Percent62 double;
improvement

alter table accountplan add IPoBoxZipCode varchar(255);
alter table company add IPoBoxZipCode varchar(255);
alter table company add VPoBoxZipCode varchar(255);
alter table company add DPoBoxZipCode varchar(255);

alter table company add ShowInvoiceAmountThisYear smallint;

delete from tab where TableName='mediaedit';
insert into tab set TableName='mediaedit', Interface='intranett', Module='mediabank', Template='edit', Name='Info', Sort=1;
insert into tab set TableName='mediaedit', Interface='intranett', Module='mediabank', Template='showpicture', Name='Versjoner', Sort=2;
insert into tab set TableName='mediaedit', Interface='intranett', Module='mediabank', Template='categorylist', Name='Kategorier', Sort=3;
insert into tab set TableName='mediaedit', Interface='intranett', Module='mediabank', Template='keywordlist', Name='N&oslash;kkelord', Sort=4;

alter table mediacategory drop ParentMediaCategoryID;
alter table mediacategory add ParentMediaCategoryID int(11);

insert into menu set MenuParentID=0, EN='Mediabank', Interface='intranett', Module='mediabank', Template='list', NO='Mediabank', Sort='20';
insert into menu set MenuParentID=85, EN='Browse', Interface='intranett', Module='mediabank', Template='list', NO='List', Sort='21';
insert into menu set MenuParentID=85, EN='Search', Interface='intranett', Module='mediabank', Template='Search', NO='S&oslash;k', Sort='22';

alter table menu add Sort int(11) default 10;

alter table company add IPoBoxCode varchar(255);

update menu set EN='MottagerEvaluering', NO='MottagerEvaluering' where Interface='intranett' and Module='survey' and Template='list';

insert into roletemplate set Interface='intranett', Module='sla', Template='report_list', AccessLevel=1, AuthType='web';

update tab set Sort = 2 where TabID=50;
update tab set Sort = 4 where TabID=48;

insert into menu set MenuParentID=0, EN='Company', Interface='extranett', Module='company', Template='edit', NO='Firma';
insert into menu set MenuParentID=0, EN='Person', Interface='extranett', Module='person', Template='edit', NO='Person';
insert into menu set MenuParentID=0, EN='Requests', Interface='extranett', Module='request', Template='list', NO='Henvendelser';
insert into menu set MenuParentID=0, EN='Invoice', Interface='extranett', Module='invoice', Template='list', NO='Faktura';
insert into menu set MenuParentID=0, EN='Project', Interface='extranett', Module='project', Template='list', NO='Prosjekt';
insert into menu set MenuParentID=0, EN='RSS', Interface='extranett', Module='rss', Template='list', NO='RSS';

CREATE TABLE siteinfo (
  SiteInfoID int(11) NOT NULL auto_increment,
  CompanyID int,
  WebmasterPersonID int,
  OrderPersonID int,
  SupportPersonID int,
  InvoicePersonID int,
  Description text,
  Name varchar(255),
  ValidFromDate date,
  ValidToDate date,
  Active smallint,
  TS timestamp,
  PRIMARY KEY (SiteInfoID)
) TYPE=ISAM PACK_KEYS=1;


delete from confmenues where MenuName='SlaType4';
insert into confmenues set MenuName='SlaType4', MenuValue=1, MenuChoice='Gjenbruk av sendingsnummer', Language='no';
insert into confmenues set MenuName='SlaType4', MenuValue=2, MenuChoice='Adressefeil', Language='no';
insert into confmenues set MenuName='SlaType4', MenuValue=3, MenuChoice='For sen EDI', Language='no';
insert into confmenues set MenuName='SlaType4', MenuValue=4, MenuChoice='Kolli avvik', Language='no';
insert into confmenues set MenuName='SlaType4', MenuValue=5, MenuChoice='Fritekstfelt', Language='no';

delete from confmenues where MenuName='SlaType3';
insert into confmenues set MenuName='SlaType3', MenuValue=1, MenuChoice='Registreringsfeil', Language='no';
insert into confmenues set MenuName='SlaType3', MenuValue=2, MenuChoice='Frankatur', Language='no';
insert into confmenues set MenuName='SlaType3', MenuValue=3, MenuChoice='Feil m&aring;l/vekt', Language='no';
insert into confmenues set MenuName='SlaType3', MenuValue=4, MenuChoice='Fritekstfelt', Language='no';

delete from confmenues where MenuName='SlaType2';
insert into confmenues set MenuName='SlaType2', MenuValue=1, MenuChoice='Godsh&aring;ndtering/TG', Language='no';
insert into confmenues set MenuName='SlaType2', MenuValue=2, MenuChoice='Emballasje/Palletering', Language='no';
insert into confmenues set MenuName='SlaType2', MenuValue=3, MenuChoice='Fritekstfelt', Language='no';

delete from confmenues where MenuName='SlaType1';
insert into confmenues set MenuName='SlaType1', MenuValue=1, MenuChoice='Henting/Avsenderterminal', Language='no';
insert into confmenues set MenuName='SlaType1', MenuValue=2, MenuChoice='Utkj&oslash;ring/Mottagerterminal', Language='no';
insert into confmenues set MenuName='SlaType1', MenuValue=3, MenuChoice='Fremf&oslash;ring', Language='no';
insert into confmenues set MenuName='SlaType1', MenuValue=4, MenuChoice='Fritekstfelt', Language='no';

insert into roletemplate set Interface='intranett', Module='sla', Template='single_effort', AccessLevel=1, AuthType='web';
insert into roletemplateaccess set Interface='intranett', Module='sla', Template='single_effort', AccessLevel=3, RoleID=1;
insert into roletemplateaccess set Interface='intranett', Module='sla', Template='single_effort', AccessLevel=3, RoleID=2;

insert into roletemplate set Interface='intranett', Module='sla', Template='goal_achievment', AccessLevel=1, AuthType='web';
insert into roletemplateaccess set Interface='intranett', Module='sla', Template='goal_achievment', AccessLevel=3, RoleID=1;
insert into roletemplateaccess set Interface='intranett', Module='sla', Template='goal_achievment', AccessLevel=3, RoleID=2;

insert into tab set TableName='sla', Interface='intranett', Module='sla', Template='goal_achievment', Name='M&aring;loppn&aring;else', Sort=4;

insert into confmenues set MenuName='SlaStatusSearch', MenuChoice='Vis Alle',    MenuValue='0', Language='no';
insert into confmenues set MenuName='SlaStatusSearch', MenuChoice='Ikke ferdig', MenuValue='1', Language='no';
insert into confmenues set MenuName='SlaStatusSearch', MenuChoice='Ferdig',      MenuValue='2', Language='no';

insert into confmenues set MenuName='UseEffort', MenuChoice='Vis Alle',    MenuValue='0', Language='no';
insert into confmenues set MenuName='UseEffort', MenuChoice='Uten tiltak', MenuValue='1', Language='no';
insert into confmenues set MenuName='UseEffort', MenuChoice='Med tiltak',  MenuValue='2', Language='no';

update menu set Template='report_list', EN='Reports', NO='Rapporter' where MenuParentID=68 and Template='list_effort';

insert into menu set MenuParentID=68, EN='Statistics', Interface='intranett', Module='sla', Template='list', NO='Statistikk';
insert into menu set MenuParentID=68, EN='Search', Interface='intranett', Module='sla', Template='search', NO='S&oslash;k';
insert into menu set MenuParentID=68, EN='Effortreport', Interface='intranett', Module='sla', Template='list_effort', NO='Tiltaksrapport';
insert into menu set MenuParentID=68, EN='Numbers', Interface='intranett', Module='sla', Template='report', NO='N&oslash;kkeltall';
insert into menu set MenuParentID=68, EN='New SLA', Interface='intranett', Module='sla', Template='new', NO='Ny SLA';

insert into tab set TableName='survey', Interface='intranett', Module='survey', Template='list', Args='', Name='MottagerEvaluering', Sort=1;
insert into tab set TableName='role', Interface='intranett', Module='role', Template='list', Args='', Name='Roller', Sort=2;
insert into tab set TableName='role', Interface='intranett', Module='role', Template='roletemplate', Args='', Name='Template definisjon', Sort=3;
insert into tab set TableName='role', Interface='intranett', Module='role', Template='tableaccess', Args='', Name='Tabell tilgang', Sort=4;
insert into tab set TableName='role', Interface='intranett', Module='role', Template='templateaccess', Args='', Name='Template tilgang', Sort=5;

alter table sla change FirstRunDate NextRunPeriod char(8);

insert into confmenues set MenuName='SlaGoal', MenuChoice='97',   MenuValue='1', Language='no';
insert into confmenues set MenuName='SlaGoal', MenuChoice='99.5', MenuValue='2', Language='no';
insert into confmenues set MenuName='SlaGoal', MenuChoice='95',   MenuValue='3', Language='no';
insert into confmenues set MenuName='SlaGoal', MenuChoice='97',   MenuValue='4', Language='no';
insert into confmenues set MenuName='SlaGoal', MenuChoice='97',   MenuValue='5', Language='no';
insert into confmenues set MenuName='SlaGoal', MenuChoice='100',  MenuValue='6', Language='no';
insert into confmenues set MenuName='SlaGoal', MenuChoice='100',  MenuValue='7', Language='no';
insert into confmenues set MenuName='SlaGoal', MenuChoice='100',  MenuValue='8', Language='no';

alter table company change VCity VCity varchar(255);
alter table company change ICity ICity varchar(255);
alter table company change DCity DCity varchar(255);

CREATE TABLE persontruct (
  ParentPersonID int(11) NOT NULL,
  ChildPersonID int(11) NOT NULL,
  Active int(11),
  Type varchar(20),
  TS timestamp,
  PRIMARY KEY (ParentPersonID, ChildPersonID)
) TYPE=ISAM PACK_KEYS=1;

update tab set Template='search' where TabID=38;
alter table arbeidsgiveravgift change Percent Percent float default '0';

alter table accountplan add EnableInvoicePoBox smallint;

alter table person change Interface DefaultInterface varchar(40) default '';
alter table person change Module DefaultModule varchar(40) default '';
alter table person change Template DefaultTemplate varchar(40) default '';

alter table slagoal add Finished smallint default 0;

alter table company add CompanyMunicipality varchar(50);
alter table company add CompanyMunicipalityName varchar(100);

alter table accountplan add EnableInvoicePoBox smallint;

alter table accountplan add EnableInvoiceAddress smallint;

alter table invoiceout add ProjectNameCustomer varchar(255) NOT NULL default '';
alter table invoiceout add IPoBox varchar(255) NOT NULL default '';
alter table invoiceout add IPoBoxCity varchar(255) NOT NULL default '';

alter table invoicein add ProjectNameCustomer varchar(255) NOT NULL default '';
alter table invoicein add IPoBox varchar(255) NOT NULL default '';
alter table invoicein add IPoBoxCity varchar(255) NOT NULL default '';

alter table invoiceout add ProjectNameCustomer 	varchar(255) NOT NULL default '';
alter table invoiceout add IPoBox varchar(255) NOT NULL default '';
alter table invoiceout add IPoBoxCity varchar(255) NOT NULL default '';

alter table invoicein add ProjectNameCustomer 	varchar(255) NOT NULL default '';
alter table invoicein add IPoBox varchar(255) NOT NULL default '';
alter table invoicein add IPoBoxCity varchar(255) NOT NULL default '';

insert into roletemplate set Interface='lodo', Module='arbeidsgiveravgift', Template='salaryreport';
alter table slagoal add TS timestamp;
alter table salaryline add SalaryCode varchar(255);

alter table person add Interface varchar(40);
alter table person add Module varchar(40);
alter table person add Template varchar(40);

alter table salaryconfline change NumberInPeriod NumberInPeriod float;
alter table salaryconfline change Rate Rate float;

alter table company add VPoBox varchar(255);
alter table company add VPoBoxCity varchar(255);

alter table project add City varchar(50);
alter table companydepartment add City varchar(50);
alter table accountplan add Mobile varchar(20);

alter table company change ExternalID ExternalID varchar(30) not null;
alter table company add key(ExternalID);

#insert into confmenues set MenuName='SlaFrequency', MenuValue=2, MenuChoice='Hver 2 mnd'

insert into tab set TableName='sla', Interface='intranett', Module='sla', Template='list', Args='', Name='SLA-statistikk', Sort=1;
insert into tab set TableName='sla', Interface='intranett', Module='sla', Template='search_list', Args='', Name='S&oslash;k', Sort=2;
insert into tab set TableName='sla', Interface='intranett', Module='sla', Template='report', Args='', Name='N&oslash;kkeltall', Sort=3;
insert into tab set TableName='sla', Interface='intranett', Module='sla', Template='list_effort', Args='', Name='Tiltaksrapport', Sort=4;
insert into tab set TableName='sla', Interface='intranett', Module='sla', Template='new', Args='', Name='Ny SLA', Sort=5;
#delete from tab where TableName='sla';

alter table company add ExternalID varchar(30);

insert into confmenues set MenuName='ImageAlignMenu', MenuValue='left', MenuChoice='Venstre', Active=1, Language='no';
insert into confmenues set MenuName='ImageAlignMenu', MenuValue='right', MenuChoice='Høyre', Active=1, Language='no';
insert into confmenues set MenuName='ImageAlignMenu', MenuValue='center', MenuChoice='Sentrert', Active=1, Language='no';

CREATE TABLE improvementeffortstruct (
  SlaImprovementID int(11) NOT NULL,
  SlaEffortID int(11) NOT NULL,
  Active int(11),
  TS timestamp,
  PRIMARY KEY (SlaImprovementID, SlaEffortID)
) TYPE=ISAM PACK_KEYS=1;

#insert into confmenues set MenuName='SlaFrequency', MenuValue=2, MenuChoice='Hver 2 mnd'
#forandre tekst på de andre linjene her til Hver x mnd, er gjort på tollpost

alter table survey add LogoSize int;
alter table survey add LogoHeight int;
alter table survey add LogoWidth int;
alter table survey add LogoType varchar(20);
alter table survey add LogoHeading varchar(255);
alter table survey add LogoURL varchar(255);
alter table survey add LogoAlign varchar(10);

alter table sla add StopDate date;
alter table slaimprovement add WhereIs int(11);

update tab set Module='company', Template='personlist' where TableName='Company' and Interface='intranett' and Module='person' and Template='list

alter table slaimprovement add SlaGoalID int;

CREATE TABLE varelagerline (
  VareLagerLineID int(11) NOT NULL auto_increment,
  VareLagerID int(11) NOT NULL,
  ProductNr int(11),
  ProductName varchar(50),
  CostPrice double,
  Antall int(11),
  TS timestamp,
  PRIMARY KEY (VareLagerLineID)
) TYPE=ISAM PACK_KEYS=1;

alter table varelager drop ProductNr;
alter table varelager drop ProductName;
alter table varelager drop CostPrice;
alter table varelager drop Antall;

alter table salaryline change Rate Rate double;
alter table salaryline change NumberInPeriod NumberInPeriod double;
alter table accountplan change CustomerNumber CustomerNumber varchar(10);
alter table accountplan change AbroadBankAccount AbroadBankAccount varchar(20);

alter table salaryline change Rate Rate double;
alter table salaryconfline change Rate Rate double;

alter table media add ImageFileNameSize int;
alter table media add ImageFileNameHeight int;
alter table media add ImageFileNameWidth int;
alter table media add ImageFileNameType varchar(20);
alter table media add ImageFileNameHeading varchar(255);
alter table media add ImageFileNameURL varchar(255);
alter table media add ImageFileNameAlign varchar(10);

alter table media drop Height;
alter table media drop Width;
alter table media drop Type;
alter table media drop URL;
alter table media drop Align;
alter table media drop Heading;

alter table invoiceout add Phone varchar(20);
alter table voucher change EnableAutoBalance EnableAutoBalance smallint default 0;

alter table salary add AmountThisPeriod double;

alter table invoiceout change InvoiceDate InvoiceDate date;
alter table invoiceout change DueDate DueDate date;
alter table invoiceout change PaymentDate PaymentDate date;

alter table slagoal add Period char(7);
alter table slaimprovement add Period char(7);
alter table slaeffort add Period char(7);
alter table slagoal add NumberOkInResultSet int;

alter table company change VoucherBalanceAccount VoucherBalanceAccount int default '2090';
alter table company change VoucherResultAccount VoucherResultAccount int default '8800';
alter table company change AccountVat AccountVat int default '2740';

alter table slagoalmonthly add NumberOkInResultSet int;

alter table person change Title Title varchar(255);

alter table publishlink drop FileType;
alter table publishlink drop FileLink;
alter table publishlink drop Description;
alter table publishlink drop FileSize;
alter table publishlink drop FileWidth;
alter table publishlink drop FileHeight;

alter table publishlink add ImageName varchar(255);
alter table publishlink add ImageNameType varchar(20);
alter table publishlink add ImageNameSize int;
alter table publishlink add ImageNameHeight int;
alter table publishlink add ImageNameWidth int;
alter table publishlink add ImageNameHeading varchar(255);
alter table publishlink add ImageNameURL varchar(255);
alter table publishlink add ImageNameAlign varchar(10);


alter table media add Heading varchar(255);
alter table media add URL varchar(255);
alter table media add Align varchar(10);
alter table slagoal add GoalAchievementInternal float;

alter table productcategory add ProductCategoryText text;

insert into setup set Name='salarydefvoucherdate', Value='';
insert into setup set Name='salarydeffromdate', Value='';
insert into setup set Name='salarydeftodate', Value='';

alter table salary add VacationPayment double;
alter table salaryline drop VacationPayment;
alter table salaryline change EmployeeTax EmployeeTax double;

alter table person add IPoBox varchar(255);
alter table person add IPoBoxCity varchar(255);

alter table accountline add AccountPlanID int;

alter table salaryline add VacationPayment smallint;
alter table salaryline add EnableVacationPayment smallint;
alter table salaryconfline add EnableVacationPayment smallint;

alter table accountplan add IPoBoxCity varchar(255);
alter table accountplan add IPoBox varchar(255);

INSERT INTO confmenues VALUES (0,'ImgAlign','bottom','Bottom','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20040325210610,'no');
INSERT INTO confmenues VALUES (0,'ImgAlign','left','Left','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20040419142407,'no');
INSERT INTO confmenues VALUES (0,'ImgAlign','right','Right','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20040325210648,'no');
INSERT INTO confmenues VALUES (0,'ImgAlign','middle','Middle','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20040325210702,'no');
INSERT INTO confmenues VALUES (0,'ImgAlign','top','Top','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20040325210702,'no');

alter table invoiceinline drop comment;
alter table ordercustline drop comment;
alter table orderpurchaseline drop comment;
alter table ordersubscriptionline drop comment;

alter table invoiceinline add Comment varchar(255);
alter table ordercustline add Comment varchar(255);
alter table orderpurchaseline add Comment varchar(255);
alter table ordersubscriptionline add Comment varchar(255);



alter table invoiceoutline add VAT float;
alter table invoiceinline add VAT float;
alter table ordercustline add VAT float;
alter table orderpurchaseline add VAT float;
alter table ordersubscriptionline add VAT float;

alter table invoiceout change file_name FileName varchar(255);
alter table invoiceout add FileNameType varchar(20);
alter table invoiceout add FileNameSize int;
alter table invoiceout add FileNameHeight int;
alter table invoiceout add FileNameWidth int;
alter table invoiceout add FileNameHeading varchar(255);
alter table invoiceout add FileNameURL varchar(255);

alter table invoicein change file_name FileName varchar(255);
alter table invoicein add FilenameType varchar(20);
alter table invoicein add FileNameSize int;
alter table invoicein add FileNameHeight int;
alter table invoicein add FileNameWidth int;
alter table invoicein add FileNameHeading varchar(255);
alter table invoicein add FileNameURL varchar(255);

alter table requestcomment add FileName varchar(255);
alter table requestcomment add FileNameType varchar(20);
alter table requestcomment add FileNameSize int;
alter table requestcomment add FilenameHeight int;
alter table requestcomment add FileNameWidth int;
alter table requestcomment add FileNameHeading varchar(255);
alter table requestcomment add FileNameURL varchar(255);

alter table publishcategory add Image1Name varchar(255);
alter table publishcategory add Image1NameType varchar(20);
alter table publishcategory add Image1NameSize int;
alter table publishcategory add Image1NameHeight int;
alter table publishcategory add Image1NameWidth int;
alter table publishcategory add Image1NameHeading varchar(255);
alter table publishcategory add Image1NameURL varchar(255);
alter table publishcategory add Image1NameAlign varchar(10);

alter table publishcategory add Image2Name varchar(255);
alter table publishcategory add Image2NameType varchar(20);
alter table publishcategory add Image2NameSize int;
alter table publishcategory add Image2NameHeight int;
alter table publishcategory add Image2NameWidth int;
alter table publishcategory add Image2NameHeading varchar(255);
alter table publishcategory add Image2NameURL varchar(255);
alter table publishcategory add Image2NameAlign varchar(10);

alter table publishcontent add Image1Name varchar(255);
alter table publishcontent add Image1NameType varchar(20);
alter table publishcontent add Image1NameSize int;
alter table publishcontent add Image1NameHeight int;
alter table publishcontent add Image1NameWidth int;
alter table publishcontent add Image1NameHeading varchar(255);
alter table publishcontent add Image1NameURL varchar(255);
alter table publishcontent add Image1NameAlign varchar(10);

alter table publishcontent add Image2Name varchar(255);
alter table publishcontent add Image2NameType varchar(20);
alter table publishcontent add Image2NameSize int;
alter table publishcontent add Image2NameHeight int;
alter table publishcontent add Image2NameWidth int;
alter table publishcontent add Image2NameHeading varchar(255);
alter table publishcontent add Image2NameURL varchar(255);
alter table publishcontent add Image2NameAlign varchar(10);

alter table publishlink add FileName varchar(255);
alter table publishlink add FilenameType varchar(20);
alter table publishlink add FileNameSize int;
alter table publishlink add FileNameHeight int;
alter table publishlink add FileNameWidth int;
alter table publishlink add FileNameHeading varchar(255);
alter table publishlink add FileNameURL varchar(255);
alter table publishlink add FileNameAlign varchar(10);

alter table person add PhotoSize int;
alter table person add PhotoHeight int;
alter table person add PhotoWidth int;
alter table person add PhotoType varchar(20);
alter table person add PhotoHeading varchar(255);
alter table person add PhotoURL varchar(255);
alter table person add PhotoAlign varchar(10);

alter table company add LogoSize int;
alter table company add LogoHeight int;
alter table company add LogoWidth int;
alter table company add LogoType varchar(20);
alter table company add LogoHeading varchar(255);
alter table company add LogoURL varchar(255);
alter table company add LogoAlign varchar(10);

alter table slagoal add NumberInResultSet int;

alter table person change DirectPhone DirectPhone varchar(24);

alter table timeliste change InInvoiceID InInvoiceID int default '0';

CREATE TABLE invoiceinstruct (
  InvoiceInID int(11) NOT NULL default '0',
  ProjectID int(11) NOT NULL default '0',
  OrderID int(11) NOT NULL default '0',
  ValidFrom date NOT NULL default '0000-00-00',
  ValidTo date default NULL,
  PRIMARY KEY  (InvoiceInID,ProjectID,OrderID,ValidFrom)
) TYPE=MyISAM;

alter table invoiceout add BankAccount varchar(15);
alter table accountplan add Phone varchar(20);

############
drop table tab;
#
CREATE TABLE tab (
  TabID int(11) NOT NULL auto_increment,
  TableName varchar(40) NOT NULL,
  Interface varchar(40) NOT NULL,
  Module varchar(40) NOT NULL,
  Template varchar(40) NOT NULL,
  Args varchar(255),
  Name varchar(255),
  Sort smallint,
  TS timestamp,
  UNIQUE(TableName, Interface, Module, Template),
  PRIMARY KEY (TabID)
) TYPE=ISAM PACK_KEYS=1;

################
insert into confmenues (MenuName, MenuValue, MenuChoice, Active) values ('PersonParameter', 10, 'Ledergruppe', 1);
insert into confmenues (MenuName, MenuValue, MenuChoice, Active) values ('PersonParameter', 11, 'Administrasjon', 1);
insert into confmenues (MenuName, MenuValue, MenuChoice, Active) values ('PersonParameter', 12, 'Markedsf&oslash;ring', 1);
insert into confmenues (MenuName, MenuValue, MenuChoice, Active) values ('PersonParameter', 13, 'Kvalitet', 1);
insert into confmenues (MenuName, MenuValue, MenuChoice, Active) values ('PersonParameter', 14, 'Milj&oslash;', 1);
insert into confmenues (MenuName, MenuValue, MenuChoice, Active) values ('PersonParameter', 15, 'Forretninsutvikkling', 1);
insert into confmenues (MenuName, MenuValue, MenuChoice, Active) values ('PersonParameter', 16, '&Oslash;konomi', 1);
insert into confmenues (MenuName, MenuValue, MenuChoice, Active) values ('PersonParameter', 17, 'Sikkerhet', 1);
insert into confmenues (MenuName, MenuValue, MenuChoice, Active) values ('PersonParameter', 18, 'Reklamasjon', 1);

insert into confmenues (MenuName, MenuValue, MenuChoice, Active) values ('PersonParameter', 1, 'Drift', 1);
insert into confmenues (MenuName, MenuValue, MenuChoice, Active) values ('PersonParameter', 4, 'Salg', 1);
insert into confmenues (MenuName, MenuValue, MenuChoice, Active) values ('PersonParameter', 3, 'Ledelse', 1);

CREATE TABLE slagoalmonthly (
  SlaID int(11) NOT NULL,
  SlaTypeID int not null,
  GoalAchievment float,
  Period char(7),
  NumberInResultSet int,
  TS timestamp,
  PRIMARY KEY (SlaID, SlaTypeID, Period)
) TYPE=ISAM PACK_KEYS=1;

alter table sla add Finished smallint default '0';

alter table person change PostalCode ZipCode varchar(10);
alter table person change Telefax Fax varchar(60);

alter table accountplan add TabellTrekk varchar(10);
alter table accountplan add ProsentTrekk varchar(10);

alter table accountplan drop Project;
alter table accountplan drop Department;

alter table accountplan change CreatedByID CreatedByPersonID int(11);

alter table voucher change DescriptionID DescriptionID varchar(20);

insert into confmenues (MenuName, MenuValue, MenuChoice) values ('VoucherType', 'K', 'Kasse');
insert into confmenues (MenuName, MenuValue, MenuChoice) values ('VoucherType', 'B', 'Bank');
insert into confmenues (MenuName, MenuValue, MenuChoice) values ('VoucherType', 'U', 'Kj&oslash;p');
insert into confmenues (MenuName, MenuValue, MenuChoice) values ('VoucherType', 'L', 'L&oslash;nn');
insert into confmenues (MenuName, MenuValue, MenuChoice) values ('VoucherType', 'S', 'Salg');
insert into confmenues (MenuName, MenuValue, MenuChoice) values ('VoucherType', 'A', 'Auto');

alter table sla change FirstDate StartDate date;
alter table sla add FirstRunDate date;

alter table slaimprovement add ShowCustomer smallint;
delete from confmenues where MenuName='CompanyParameter' and  MenuValue='15';


INSERT INTO confmenues (MenuID, MenuName, MenuValue, MenuChoice, ValidFrom, ValidTo, Active, TS, Language) VALUES (0,'PersonParameter','4','Salg','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030913192622,'en');

insert into tab set TableName='Person', Interface='intranett', Module='person', Template='parameter', Args='PersonID', Name='Parameter';

INSERT INTO confmenues (MenuID, MenuName, MenuValue, MenuChoice, ValidFrom, ValidTo, Active, TS, Language) VALUES (0,'SlaGoalDescription','1','Den til enhver tid gjeldende Ruteplan, oppdateres 4 ganger i &aring;ret.<br>Gjelder sendinger inkludert i leveringsstatus, se definisjon i &qout;Kvalitetsoversikt&qout; p&aring; tollpost.no','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030913192622,'en');
INSERT INTO confmenues (MenuID, MenuName, MenuValue, MenuChoice, ValidFrom, ValidTo, Active, TS, Language) VALUES (0,'SlaGoalDescription','2','Gjelder antall sendinger hvor skade el. manko oppst&aring;r','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030913192622,'en');
INSERT INTO confmenues (MenuID, MenuName, MenuValue, MenuChoice, ValidFrom, ValidTo, Active, TS, Language) VALUES (0,'SlaGoalDescription','3','Gjelder antall kreditnotaer ift. antall fakturaer','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030913192622,'en');
INSERT INTO confmenues (MenuID, MenuName, MenuValue, MenuChoice, ValidFrom, ValidTo, Active, TS, Language) VALUES (0,'SlaGoalDescription','4','Gjelder samsvar mellom EDI-overf&oslash;ring og mottatt gods, samt at innholdet i meldingen er riktig og komplett','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030913192622,'en');
INSERT INTO confmenues (MenuID, MenuName, MenuValue, MenuChoice, ValidFrom, ValidTo, Active, TS, Language) VALUES (0,'SlaGoalDescription','5','Gjelder antall sendinger med kvittering tilgjengelig p tollpost.no','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030913192622,'en');
INSERT INTO confmenues (MenuID, MenuName, MenuValue, MenuChoice, ValidFrom, ValidTo, Active, TS, Language) VALUES (0,'SlaGoalDescription','6','Med svartid menes f&oslash;rste respons fra Tollpost Globe. Med l&oslash;sningstid menes den tid det tar &aring; l&oslash;se saken, evt. endelig svar p&aring; at saken ikke kan l&oslash;ses (eks. manko). SLA omfatter kun henvendelser registrert p&aring; Tollpost NettService','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030913192622,'en');
INSERT INTO confmenues (MenuID, MenuName, MenuValue, MenuChoice, ValidFrom, ValidTo, Active, TS, Language) VALUES (0,'SlaGoalDescription','7','Med svartid menes f&oslash;rste respons fra Tollpost Globe. Med l&oslash;sningstid menes behandlingstid frem til endelig konklusjon av utfallet. SLA omfatter kun henvendelser registrert p&aring; Tollpost NettService','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030913192622,'en');
INSERT INTO confmenues (MenuID, MenuName, MenuValue, MenuChoice, ValidFrom, ValidTo, Active, TS, Language) VALUES (0,'SlaGoalDescription','8','Med svartid menes f&oslash;rste respons fra Tollpost Globe. Med l&oslash;sningstid menes behandlingstid frem til endelig konklusjon av utfallet.SLA omfatter kun henvendelser registrert p&aring; Tollpost NettService','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030913192622,'en');




INSERT INTO confmenues (MenuID, MenuName, MenuValue, MenuChoice, ValidFrom, ValidTo, Active, TS, Language) VALUES (0,'Region','Oslo','Oslo','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030913192622,'en');
INSERT INTO confmenues (MenuID, MenuName, MenuValue, MenuChoice, ValidFrom, ValidTo, Active, TS, Language) VALUES (0,'Region','?stland','?stland','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030913192622,'en');
INSERT INTO confmenues (MenuID, MenuName, MenuValue, MenuChoice, ValidFrom, ValidTo, Active, TS, Language) VALUES (0,'Region','Vestland','Vestland','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030913192622,'en');
INSERT INTO confmenues (MenuID, MenuName, MenuValue, MenuChoice, ValidFrom, ValidTo, Active, TS, Language) VALUES (0,'Region','Midt Norge','Midt Norge','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030913192622,'en');
INSERT INTO confmenues (MenuID, MenuName, MenuValue, MenuChoice, ValidFrom, ValidTo, Active, TS, Language) VALUES (0,'Region','Sentral Salg','Sentral Salg','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030913192622,'en');
INSERT INTO confmenues (MenuID, MenuName, MenuValue, MenuChoice, ValidFrom, ValidTo, Active, TS, Language) VALUES (0,'Region','Nordnorge','Nordnorge','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030913192622,'en');


INSERT INTO confmenues (MenuID, MenuName, MenuValue, MenuChoice, ValidFrom, ValidTo, Active, TS, Language) VALUES (0,'ClassificationID','7','Salg','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030913192622,'en');
INSERT INTO confmenues (MenuID, MenuName, MenuValue, MenuChoice, ValidFrom, ValidTo, Active, TS, Language) VALUES (0,'ClassificationID','8','Kundeservice','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030913192622,'en');
INSERT INTO confmenues (MenuID, MenuName, MenuValue, MenuChoice, ValidFrom, ValidTo, Active, TS, Language) VALUES (0,'ClassificationID','9','Ledelse','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030913192622,'en');
INSERT INTO confmenues (MenuID, MenuName, MenuValue, MenuChoice, ValidFrom, ValidTo, Active, TS, Language) VALUES (0,'ClassificationID','10','Drift','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030913192622,'en');
INSERT INTO confmenues (MenuID, MenuName, MenuValue, MenuChoice, ValidFrom, ValidTo, Active, TS, Language) VALUES (0,'ClassificationID','11','Foreldre','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030913192622,'en');
INSERT INTO confmenues (MenuID, MenuName, MenuValue, MenuChoice, ValidFrom, ValidTo, Active, TS, Language) VALUES (0,'ClassificationID','12','Barn','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030913192622,'en');
INSERT INTO confmenues (MenuID, MenuName, MenuValue, MenuChoice, ValidFrom, ValidTo, Active, TS, Language) VALUES (0,'ClassificationID','13','Avdelingsleder','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030913192622,'en');

alter table timeliste change OutInvoiceID OutInvoiceID int default '0';

alter table invoiceout add OurRef varchar(255);
alter table invoiceout add YourRef varchar(255);

alter table project change Zipcode ZipCode varchar(10);
alter table companydepartment change Zipcode ZipCode varchar(10);
alter table accountplan change Zipcode ZipCode varchar(10);
alter table invoiceout change IZipCode IZipCode varchar(10);
alter table invoiceout change DZipCode DZipCode varchar(10);

insert into tab (TableName, Interface, Module, Template, Args, Name) values ('Integration', 'technical', 'integration', 'list', '', 'Integrations');

CREATE TABLE integration (
  IntegrationID int(11) NOT NULL auto_increment,
  Name varchar(255),
  Description varchar(255),
  CreatedDate datetime,
  ChangedByPersonID int(11),
  CreatedByPersonID int(11),
  TS timestamp,
  PRIMARY KEY (IntegrationID)
) TYPE=ISAM PACK_KEYS=1;

CREATE TABLE integrationcommunication (
  IntegrationCommunicationID int(11) NOT NULL auto_increment,
  IntegrationID int(11),
  Priority int(11),
  Type varchar(255),
  Username varchar(255),
  Password varchar(255),
  Path varchar(255),
  Server varchar(255),
  DatabaseName varchar(255),
  Transformation varchar(255),
  TS timestamp,
  PRIMARY KEY (IntegrationCommunicationID)
) TYPE=ISAM PACK_KEYS=1;

CREATE TABLE logintegration (
  LogIntegrationID int(11) NOT NULL auto_increment,
  IntegrationID int(11) NOT NULL,
  Description varchar(255),
  Status int(11),
  Debug varchar(255),
  TS timestamp,
  PRIMARY KEY (LogIntegrationID)
) TYPE=ISAM PACK_KEYS=1;


update confmenues set MenuChoice='Lese' where MenuName='AccessLevel' and MenuValue=1;
update confmenues set MenuChoice='Kunde' where MenuName='AccessLevel' and MenuValue=2;
update confmenues set MenuChoice='Regnskapsf&oslash;rer' where MenuName='AccessLevel' and MenuValue=3;
insert into confmenues (MenuName, MenuValue, MenuChoice, Active) values ('AccessLevel', '4', 'Administrator'  , '1');

insert into confmenues (MenuName, MenuValue, MenuChoice, Active) values ('CompanyParameter', '14', 'Produktkategori'  , '1');
insert into confmenues (MenuName, MenuValue, MenuChoice, Active) values ('PersonParameter' , '20', 'Avdelingskategori', '1');
insert into confmenues (MenuName, MenuValue, MenuChoice, Active) values ('PersonParameter' , '21', 'Produktkategori'  , '1');
insert into confmenues (MenuName, MenuValue, MenuChoice, Active) values ('PersonParameter' , '22', 'Funksjon'         , '1');


alter table company add IPoBoxCity varchar(255);
alter table company add IPoBox varchar(255);

alter table accountplan add ProjectID int default '0';
alter table accountplan add DepartmentID int default '0';

alter table person add StockAssessmentValue float default '0';
alter table person add StockProfit float default '0';
alter table company add CollectionFee float default '0';

insert into tab (TableName, Interface, Module, Template, Args, Name, Sort) values ('Company', 'intranett', 'company', 'list', 'CompanyID', 'Departments', 1);
insert into tab (TableName, Interface, Module, Template, Args, Name, Sort) values ('Company', 'intranett', 'company', 'edit', 'CompanyID', 'Company', 2);
insert into tab (TableName, Interface, Module, Template, Args, Name, Sort) values ('Company', 'intranett', 'todo', 'list', 'CompanyID', 'Todo', 3);
insert into tab (TableName, Interface, Module, Template, Args, Name, Sort) values ('Company', 'intranett', 'invoice', 'list', 'CompanyID', 'Invoices', 4);
insert into tab (TableName, Interface, Module, Template, Args, Name, Sort) values ('Company', 'intranett', 'project', 'list', 'CompanyID', 'Projects', 5);
insert into tab (TableName, Interface, Module, Template, Args, Name, Sort) values ('Company', 'intranett', 'person', 'list', 'CompanyID', 'Contacts', 6);
insert into tab (TableName, Interface, Module, Template, Args, Name, Sort) values ('Company', 'intranett', 'order', 'order', 'CompanyID', 'Orders', 7);
insert into tab (TableName, Interface, Module, Template, Args, Name, Sort) values ('Company', 'intranett', 'changerequest', 'customerlist', 'CompanyID', 'Requests', 8);
insert into tab (TableName, Interface, Module, Template, Args, Name, Sort) values ('Company', 'intranett', 'offer', 'list', 'CompanyID', 'Offers', 9);
insert into tab (TableName, Interface, Module, Template, Args, Name, Sort) values ('Company', 'intranett', 'licence', 'list', 'CompanyID', 'Licences', 10);
insert into tab (TableName, Interface, Module, Template, Args, Name, Sort) values ('Company', 'intranett', 'product', 'list', 'CompanyID', 'Products', 11);
insert into tab (TableName, Interface, Module, Template, Args, Name, Sort) values ('Company', 'intranett', 'calendar', 'list', 'CompanyID', 'Calendar', 12);
insert into tab (TableName, Interface, Module, Template, Args, Name, Sort) values ('Company', 'intranett', 'expence', 'list', 'CompanyID', 'Expences', 13);
insert into tab (TableName, Interface, Module, Template, Args, Name, Sort) values ('Company', 'intranett', 'drivedistance', 'list', 'CompanyID', 'Travel', 14);
insert into tab (TableName, Interface, Module, Template, Args, Name, Sort) values ('Company', 'intranett', 'timelist', 'list', 'CompanyID', 'Timeliste', 15);
insert into tab (TableName, Interface, Module, Template, Args, Name, Sort) values ('Company', 'intranett', 'company', 'communication', 'CompanyID', 'Communication', 16);
insert into tab (TableName, Interface, Module, Template, Args, Name, Sort) values ('Company', 'intranett', 'company', 'parameter', 'CompanyID', 'Parameter', 17);

CREATE TABLE companystruct (
  ParentCompanyID int(11) NOT NULL,
  ChildCompanyID int(11) NOT NULL,
  Active smallint default '1',
  TS timestamp,
  PRIMARY KEY (ParentCompanyID, ChildCompanyID)
) TYPE=ISAM PACK_KEYS=1;

alter table person change Active Active smallint default '1';

alter table request add PercentFinished smallint;

alter table publishcatcontstruct drop ContentSort;
alter table zipcode change ZipCodeID ZipCodeID varchar(10) not null;

alter table invoiceout change IPostalCode IZipCode varchar(50);
alter table invoiceout change DPostalCode DZipCode varchar(50);

alter table company drop AccountSalaryFrom;
alter table company drop AccountSalaryTo;
alter table company drop AccountExpenceFrom; 
alter table company drop AccountExpenceTo;

alter table projectactivity add EnableSalary smallint default '1';
alter table person add Tax float default '0';
alter table expenceline add OutInvoiceID int;
alter table expenceline add InInvoiceID int;

insert into menu set MenuParentID=2, EN='Mediabank', Interface='intranett', Module='mediabank', Template='list', NO='Mediabank';

CREATE TABLE mediakeyword (
  MediaKeywordID int NOT NULL auto_increment,
  Name varchar(255),
  Description varchar(255),
  TS timestamp,
  PRIMARY KEY (MediaKeywordID)
) TYPE=ISAM PACK_KEYS=1;

CREATE TABLE mediacategory (
  MediaCategoryID int NOT NULL auto_increment,
  Name varchar(255),
  Description varchar(255),
  TS timestamp,
  PRIMARY KEY (MediaCategoryID)
) TYPE=ISAM PACK_KEYS=1;

CREATE TABLE mediacategorystruct (
  MediaCategoryStructID int NOT NULL auto_increment,
  MediaID int(11) NOT NULL,
  MediaCategoryID int(11) NOT NULL,
  key(MediaID),
  key(MediaCategoryID),
  PRIMARY KEY (MediaCategoryStructID)
) TYPE=ISAM PACK_KEYS=1;

CREATE TABLE mediakeywordstruct (
  MediaKeywordStructID int NOT NULL auto_increment,
  MediaID int(11) NOT NULL,
  MediaKeywordID int(11) NOT NULL,
  key(MediaID),
  key(MediaKeywordID),
  PRIMARY KEY (MediaKeywordStructID)
) TYPE=ISAM PACK_KEYS=1;

CREATE TABLE media (
  MediaID int NOT NULL auto_increment,
  ImageFileName varchar(255) NOT NULL,
  Title varchar(255),
  Subject varchar(255),
  Description varchar(255),
  Type varchar(255),
  Width int default 0,
  Height int default 0,
  Language varchar(10),
  CreatedBy varchar(50),
  CreatedDate datetime,
  ChangedBy varchar(50),
  TS timestamp,
  key(ImageFileName),
  PRIMARY KEY (MediaID)
) TYPE=ISAM PACK_KEYS=1;

alter table timeliste change SalaryID SalaryID int not null default '0';
alter table drivedistance add SalaryID int not null default '0';
alter table expenceline add SalaryID int not null default '0';


CREATE TABLE zipcode (
  ZipCodeID varchar(10) NOT NULL,
  DepartmentID int(11) NOT NULL,
  City varchar(255) NOT NULL,
  TS timestamp,
  PRIMARY KEY (ZipCodeID)
) TYPE=ISAM PACK_KEYS=1;


alter table timeliste change Invoiced OutInvoiceID int;
alter table timeliste add InInvoiceID int;
alter table expence change Invoiced OutInvoiceID int;
alter table expence add InInvoiceID int;
alter table drivedistance change Invoiced OutInvoiceID int;
alter table drivedistance add InInvoiceID int;

alter table request add Probability smallint;
alter table request add DateRequiredStart datetime;

alter table logpagenotfound add Referer varchar(255);

alter table company change AccountHovedbokReskontroFrom AccountHovedbokReskontroFrom int default '10000';
alter table company change AccountHovedbokReskontroTo AccountHovedbokReskontroTo int default '99999';

alter table person add IsReskontro int default 0;
alter table accountplan add PersonID int;

insert into confmenues (MenuName, MenuValue, MenuChoice, Active) values ('DebitColor', ' ', 'Ingen', '1');
insert into confmenues (MenuName, MenuValue, MenuChoice, Active) values ('DebitColor', 'debitblue', 'Debet blå ', '1');
insert into confmenues (MenuName, MenuValue, MenuChoice, Active) values ('DebitColor', 'debitred', 'Debet rød ', '1');
insert into confmenues (MenuName, MenuValue, MenuChoice, Active) values ('CreditColor', ' ', 'Ingen', '1');
insert into confmenues (MenuName, MenuValue, MenuChoice, Active) values ('CreditColor', 'creditblue', 'Kredit blå ', '1');
insert into confmenues (MenuName, MenuValue, MenuChoice, Active) values ('CreditColor', 'creditred', 'Kredit rød ', '1');

alter table accountplan add EnablePostPost smallint; #skal vi bruke denne i sjekken i postvspost?

alter table person add AccountPlanID int;
alter table company add CostPrice double;

CREATE TABLE voucherstruct (
  VoucherStructID int(11) NOT NULL auto_increment,
  Parent int(11) NOT NULL,
  Child int(11) NOT NULL,
  Closed smallint NOT NULL default 0,
  TS timestamp,
  key(Parent),
  key(Child),
  key(Closed),
  PRIMARY KEY (VoucherStructID)
) TYPE=ISAM PACK_KEYS=1;

alter table company add CostPrice double;
alter table person add CostPrice double;
alter table activitypersontruct add CostPrice double;
alter table timeliste add SalaryID smallint default '0';

alter table weeklysale add TotalSale double;

insert into confmenues (MenuName, MenuValue, MenuChoice, Active) values ('VoucherDescriptionID', 'Balanse', 'Balanse', '1');
insert into confmenues (MenuName, MenuValue, MenuChoice, Active) values ('VoucherDescriptionID', 'Resultat', 'Resultat', '1');
insert into confmenues (MenuName, MenuValue, MenuChoice, Active) values ('VoucherDescriptionID', 'Reskontro', 'Reskontro', '1');

alter table process add URL varchar(255);

CREATE TABLE roletableaccess (
  RoleTableAccessID int(11) NOT NULL auto_increment,
  TableName varchar(60),
  TableAccess int,
  RoleID int,
  TS timestamp,
  PRIMARY KEY (RoleTableAccessID)
) TYPE=ISAM PACK_KEYS=1;


insert into confmenues set MenuValue='0', MenuChoice='Ikke tilgang',    MenuName='TableAccess', Language='no';
insert into confmenues set MenuValue='1', MenuChoice='Lese',            MenuName='TableAccess', Language='no';
insert into confmenues set MenuValue='2', MenuChoice='Oppdatere',       MenuName='TableAccess', Language='no';
insert into confmenues set MenuValue='3', MenuChoice='Slette',          MenuName='TableAccess', Language='no';

alter table confmenues add unique(MenuName, MenuValue);

alter table confmenues change MenuName MenuName varchar(50) not null;
alter table confmenues change MenuValue MenuValue varchar(50) not null;

alter table slaimprovement add WhenDate date;
alter table slaimprovement drop Goal;
alter table slaimprovement drop GoalAchievement;
alter table slaimprovement drop Sort;
alter table slaeffort drop Code;
alter table slaimprovement change Responsible Who varchar(255);
alter table slaimprovement change Service What varchar(255);
alter table slaimprovement add CustomerEffort smallint;


update confmenues set Language='no' where MenuName like 'Sla%';
update confmenues set Language='no' where Language='';
insert into confmenues set MenuValue='000', MenuChoice='Annet', MenuName='SlaType1', Language='no';

insert into confmenues set MenuValue='101', MenuChoice='Utgende', MenuName='SlaType2', Language='no';
insert into confmenues set MenuValue='102', MenuChoice='Transitt Fremf¿ring', MenuName='SlaType2', Language='no';
insert into confmenues set MenuValue='103', MenuChoice='Ankommet', MenuName='SlaType2', Language='no';
insert into confmenues set MenuValue='104', MenuChoice='Annet', MenuName='SlaType2', Language='no';

insert into confmenues set MenuValue='301', MenuChoice='M/V', MenuName='SlaType3', Language='no';
insert into confmenues set MenuValue='302', MenuChoice='Info / EDI', MenuName='SlaType3', Language='no';
insert into confmenues set MenuValue='303', MenuChoice='Frankatur', MenuName='SlaType3', Language='no';
insert into confmenues set MenuValue='304', MenuChoice='Avtale', MenuName='SlaType3', Language='no';
insert into confmenues set MenuValue='305', MenuChoice='Utgende', MenuName='SlaType3', Language='no';

insert into confmenues set MenuValue='401', MenuChoice='Tid', MenuName='SlaType4', Language='no';
insert into confmenues set MenuValue='402', MenuChoice='Innhold', MenuName='SlaType4', Language='no';
insert into confmenues set MenuValue='403', MenuChoice='Annet', MenuName='SlaType4', Language='no';

insert into confmenues set MenuValue='501', MenuChoice='Tid', MenuName='SlaType5', Language='no';
insert into confmenues set MenuValue='502', MenuChoice='Innhold', MenuName='SlaType5', Language='no';
insert into confmenues set MenuValue='503', MenuChoice='Annet', MenuName='SlaType5', Language='no';

insert into confmenues set MenuValue='601', MenuChoice='Respons', MenuName='SlaType6', Language='no';
insert into confmenues set MenuValue='602', MenuChoice='Behandlingstid', MenuName='SlaType6', Language='no';
insert into confmenues set MenuValue='603', MenuChoice='Annet', MenuName='SlaType6', Language='no';

insert into confmenues set MenuValue='601', MenuChoice='Respons', MenuName='SlaType7', Language='no';
insert into confmenues set MenuValue='602', MenuChoice='Behandlingstid', MenuName='SlaType7', Language='no';
insert into confmenues set MenuValue='603', MenuChoice='Annet', MenuName='SlaType7', Language='no';

insert into confmenues set MenuValue='601', MenuChoice='Respons', MenuName='SlaType8', Language='no';
insert into confmenues set MenuValue='602', MenuChoice='Behandlingstid', MenuName='SlaType8', Language='no';
insert into confmenues set MenuValue='603', MenuChoice='Annet', MenuName='SlaType8', Language='no';

CREATE TABLE installation (
  InstallationID int(11) NOT NULL auto_increment,
  InstallName varchar(255),
  DealerName varchar(255),
  DealerEmail varchar(255),
  TS timestamp,
  PRIMARY KEY (InstallationID)
) TYPE=ISAM PACK_KEYS=1;

alter table accountplan drop EnableReports;
alter table confmenues change Menu_name  MenuName varchar(255) not null;
alter table confmenues change Menu_value MenuValue varchar(255);
alter table confmenues change Menu_choice MenuChoice varchar(255);
alter table confmenues change Menu_ID MenuID int not null auto_increment;

alter table slaimprovement drop SlaID; #Must convert data first
alter table slaimprovement add SlaGoalID int;
alter table slaimprovement drop SlaTypeID;

alter table slaeffort change CompletedByPersonID CompletedBy varchar(255);
alter table slaeffort change CompletedByPerson CompletedBy varchar(255);

insert into tab set TableName='sla', Interface='intranett', Module='sla', Template='list', Args='', Name='SLA Statistikk';
insert into tab set TableName='sla', Interface='intranett', Module='sla', Template='list_effort', Args='', Name='Tiltaks rapport';


insert into confmenues set MenuValue='12', MenuChoice='En gang i &aring;ret', MenuName='SlaFrequency', Language='no';
insert into confmenues set MenuValue='6', MenuChoice='Hvert halv&aring;r', MenuName='SlaFrequency', Language='no';
insert into confmenues set MenuValue='3', MenuChoice='Hvert kvartal', MenuName='SlaFrequency', Language='no';

alter table sla add CompanyGroup smallint;
alter table slaeffort drop SlaID;
alter table slaeffort drop SlaTypeID;

alter table company add AccountHovedbokReskontroFrom int;
alter table company add AccountHovedbokReskontroTo int;

alter table confmenues add unique(MenuName, MenuValue);

alter table company drop AccountDebitFrom;
alter table company drop AccountDebitTo;
alter table company drop AccountCreditFrom;
alter table company drop AccountCreditTo;

alter table company change AccountSalaryFrom AccountSalaryFrom int default 10;
alter table company change AccountSalaryTo AccountSalaryTo int default 69;
alter table company change AccountExpenceFrom AccountExpenceFrom int default 70;
alter table company change AccountExpenceTo AccountExpenceTo int default 99;
alter table company change AccountEmployeeFrom AccountEmployeeFrom int default 100;
alter table company change AccountEmployeeTo AccountEmployeeTo int default 399;
alter table company change AccountHovedbokBalanseFrom AccountHovedbokBalanseFrom int default 1000;
alter table company change AccountHovedbokBalanseTo AccountHovedbokBalanseTo int default 2999;
alter table company change AccountHovedbokResultatFrom AccountHovedbokResultatFrom int default 3000;
alter table company change AccountHovedbokResultatTo AccountHovedbokResultatTo int default 9999;
alter table company change AccountDebitFrom AccountDebitFrom int default 10000;
alter table company change AccountDebitTo AccountDebitTo int default 49999;
alter table company change AccountCreditFrom AccountCreditFrom int default 50000;
alter table company change AccountCreditTo AccountCreditTo int default 60000;

alter table company change VoucherCashNumber VoucherCashNumber int default 101;
alter table company change VoucherBankNumber VoucherBankNumber int default 2001;
alter table company change VoucherBuyNumber VoucherBuyNumber int default 7001;
alter table company change VoucherSalaryNumber VoucherSalaryNumber int default 11;
alter table company change VoucherSaleNumber VoucherSaleNumber int default 10001;
alter table company change VoucherAutoNumber VoucherAutoNumber int default 100001;

/*********************************************/
insert into confmenues set MenuValue='0', MenuChoice='Registrert', MenuName='SlaStatus';
insert into confmenues set MenuValue='1', MenuChoice='Delegert', MenuName='SlaStatus';
insert into confmenues set MenuValue='2', MenuChoice='Utf&oslash;rt', MenuName='SlaStatus';


alter table slaeffort change CompletedBy CompletedByPersonID int;
alter table slaimprovement add Code int;
alter table slaeffort add Code int;
alter table slaeffort add CompletedDescription varchar(255);

insert into tab set TableName='Person', Interface='intranett', Module='person', Template='edit', Args='PersonID', Name='Person';
insert into tab set TableName='Person', Interface='intranett', Module='timelist', Template='list', Args='PersonID', Name='Hours';
insert into tab set TableName='Person', Interface='intranett', Module='project', Template='list', Args='PersonID', Name='Projects';
insert into tab set TableName='Person', Interface='intranett', Module='person', Template='activity', Args='PersonID', Name='Activities';
insert into tab set TableName='Person', Interface='intranett', Module='todo', Template='list', Args='PersonID', Name='Todo';
insert into tab set TableName='Person', Interface='intranett', Module='calendar', Template='list', Args='PersonID', Name='Calendar';
insert into tab set TableName='Person', Interface='intranett', Module='request', Template='list', Args='PersonID', Name='Requests';
insert into tab set TableName='Person', Interface='intranett', Module='expence', Template='list', Args='PersonID', Name='Expences';
insert into tab set TableName='Person', Interface='intranett', Module='drivedistance', Template='list', Args='PersonID', Name='Travel';
insert into tab set TableName='Person', Interface='intranett', Module='person', Template='role', Args='PersonID', Name='Role';
insert into tab set TableName='Person', Interface='intranett', Module='person', Template='education', Args='PersonID', Name='Education';
insert into tab set TableName='Person', Interface='intranett', Module='person', Template='history', Args='PersonID', Name='History';
insert into tab set TableName='Person', Interface='intranett', Module='person', Template='knowledge', Args='PersonID', Name='Knowledge';
insert into tab set TableName='Person', Interface='intranett', Module='person', Template='projectreference', Args='PersonID', Name='Project reference';
insert into tab set TableName='Person', Interface='intranett', Module='person', Template='workexperience', Args='PersonID', Name='Work experience';

alter table sla add ImprovementAgenda text;

alter table ordersubscription change D_Name DName varchar(255); 
alter table ordersubscription change D_Address DAddress varchar(255); 
alter table ordersubscription change D_City DCity varchar(255); 
alter table ordersubscription change D_PostalCode DZipCode varchar(255); 
alter table ordersubscription change D_Country DCountry varchar(255); 

INSERT INTO confmenues VALUES (0,'SlaType','1','Leveringsplitetlighet','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20040325210458,'no');
INSERT INTO confmenues VALUES (0,'SlaType',NULL,NULL,'2001-01-01 00:00:00','9999-12-31 00:00:00',1,20040325210500,'');
INSERT INTO confmenues VALUES (0,'SlaType','2','Leveringssikkerhet','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20040325210519,'no');
INSERT INTO confmenues VALUES (0,'SlaType','3','Fakturakvalitet','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20040325210527,'no');
INSERT INTO confmenues VALUES (0,'SlaType','4','Informasjonskvalitet EDI','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20040325210603,'no');
INSERT INTO confmenues VALUES (0,'SlaType','5','Informasjonskvalitet Track Trace/POD','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20040325210610,'no');
INSERT INTO confmenues VALUES (0,'SlaType','6','Servicehenvendelse Sendingsforesp¿rsel','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20040419142407,'no');
INSERT INTO confmenues VALUES (0,'SlaType','7','Servicehenvendelse Faktura','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20040325210648,'no');
INSERT INTO confmenues VALUES (0,'SlaType','8','Servicehenvendelse Reklamasjon','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20040325210702,'no');

CREATE TABLE slaeffort (
  SlaEffortID int NOT NULL auto_increment,
  SlaID int NOT NULL,
  SlaTypeID int NOT NULL,
  SlaImprovementID int NOT NULL,
  Priority smallint,
  Description varchar(255),
  CustomerEffort smallint,
  ShowCustomer smallint,
  RegisteredDate date,
  RegisteredBy int,
  CompletedDate date,
  Responsible varchar(255),
  ScheduledDate date,
  CompletedBy int,
  Status smallint,
  TS timestamp,
  key(SlaID),
  key(SlaTypeID),
  key(SlaImprovementID),
  primary key(SlaEffortID)
) TYPE=ISAM PACK_KEYS=1;

alter table voucher add AutoFromWeeklySale int(11);

#drop table project;
CREATE TABLE project (
  ProjectID int(11) NOT NULL,
  Heading varchar(100) NOT NULL default '',
  Type varchar(50) NOT NULL default '',
  Description mediumtext NOT NULL,
  ValidFrom datetime NOT NULL default '2001-01-01 00:00:00',
  Meldt_av varchar(50) NOT NULL default '',
  ValidTo datetime default '9999-12-31 00:00:00',
  Status varchar(50) NOT NULL default 'Registrert',
  Priority varchar(50) default NULL,
  HoursEstimated double(16,4) NOT NULL default '0.0000',
  CompanyID int(11) NOT NULL default '0',
  Active tinyint(4) default '1',
  ResponsibleID int(11) NOT NULL default '0',
  HoursUsed double default NULL,
  FinishedDate date default NULL,
  RegisteredByID int(11) default NULL,
  SalesPersonID int(11) default NULL,
  Address varchar(255) default NULL,
  Zipcode int(11) default NULL,
  EnableZeroYearEnd smallint(6) default NULL,
  RequestID int(11) default NULL,
  PRIMARY KEY  (ProjectID)
) TYPE=ISAM PACK_KEYS=1;

#drop table companydepartment
CREATE TABLE companydepartment (
  CompanyDepartmentID int(11) NOT NULL,
  DepartmentName varchar(50) NOT NULL default '',
  TS datetime NOT NULL default '0000-00-00 00:00:00',
  Active tinyint(4) NOT NULL default '0',
  ValidFrom datetime NOT NULL default '0000-00-00 00:00:00',
  ValidTo datetime NOT NULL default '0000-00-00 00:00:00',
  EnableZeroYearEnd smallint(6) default NULL,
  Address varchar(255) default NULL,
  Zipcode int(11) default NULL,
  Description text,
  km0101 int(11) default NULL,
  km3112 int(11) default NULL,
  PRIMARY KEY  (CompanyDepartmentID)
) TYPE=ISAM PACK_KEYS=1;

CREATE TABLE varelager (
  VareLagerID int(11) NOT NULL auto_increment,
  CreatedDate date NOT NULL,
  Description varchar(50),
  Antall int,
  ProductNr int(11),
  ProductName varchar(50),
  CostPrice double,
  TS timestamp,
  key(CreatedDate),
  primary key(VareLagerID)
) TYPE=ISAM PACK_KEYS=1;

alter table weeklysalegroupconf change Group1ProsjectID Group1ProjectID int(11);
alter table weeklysalegroupconf change Group2ProsjectID Group2ProjectID int(11);
alter table weeklysalegroupconf change Group3ProsjectID Group3ProjectID int(11);
alter table weeklysalegroupconf change Group4ProsjectID Group4ProjectID int(11);
alter table weeklysalegroupconf change Group5ProsjectID Group5ProjectID int(11);
alter table weeklysalegroupconf change Group6ProsjectID Group6ProjectID int(11);
alter table weeklysalegroupconf change Group7ProsjectID Group7ProjectID int(11);
alter table weeklysalegroupconf change Group8ProsjectID Group8ProjectID int(11);
alter table weeklysalegroupconf change Group9ProsjectID Group9ProjectID int(11);
alter table weeklysalegroupconf change Group10ProsjectID Group10ProjectID int(11);
alter table weeklysalegroupconf change Group11ProsjectID Group11ProjectID int(11);
alter table weeklysalegroupconf change Group12ProsjectID Group12ProjectID int(11);
alter table weeklysalegroupconf change Group13ProsjectID Group13ProjectID int(11);
alter table weeklysalegroupconf change Group14ProsjectID Group14ProjectID int(11);
alter table weeklysalegroupconf change Group15ProsjectID Group15ProjectID int(11);
alter table weeklysalegroupconf change Group16ProsjectID Group16ProjectID int(11);
alter table weeklysalegroupconf change Group17ProsjectID Group17ProjectID int(11);
alter table weeklysalegroupconf change Group18ProsjectID Group18ProjectID int(11);
alter table weeklysalegroupconf change Group19ProsjectID Group19ProjectID int(11);
alter table weeklysalegroupconf change Group20ProsjectID Group20ProjectID int(11);

alter table voucher add AutomaticBalanceID int(11);

alter table voucher add EnableAutoBalance smallint;
alter table voucher change AutomaticVatVoucherID AutomaticVatVoucherID int(11);

insert into roleperson set PersonID=69,RoleID=9
insert into role set RoleName='Kindergarten', Interface='kindergarten';

alter table voucher add DisableAutoVat smallint;
alter table company add EnableVat smallint;

CREATE TABLE logslowpage (
  LogSlowPageID int(11) NOT NULL auto_increment,
  TS timestamp,
  Duration double,
  Interface varchar(255),
  Module varchar(255),
  Template varchar(255),
  SessionID varchar(255),
  PersonID int,
  primary key(LogSlowPageID)
) TYPE=ISAM PACK_KEYS=1;

alter table urlalias change Alias Alias varchar(50) not null;

alter table weeklysale add JournalDate date;
alter table vat add Active smallint;

alter table salaryconfline add ProjectID int(11);
alter table salaryconfline add DepartmentID int(11);
alter table salary add JournalDate date;

alter table company add EnableAutoNumberSequence smallint;
alter table company add VoucherAutoNumber int;

alter table salaryconfline add SalaryCode varchar(255);
alter table salary change DomesticBankAccount DomesticBankAccount varchar(255);
alter table accountplan change DomesticBankAccount DomesticBankAccount varchar(255);
alter table project drop ProjectNumber;
alter table companydepartment drop DepartmentNumber;
alter table weeklysale change Week Week varchar(20);

alter table accountplan add NorwegianStandardText varchar(255);
alter table invoiceoutline add Comment varchar(255);
alter table company add OrgNumber varchar(20);

alter table accountplan add OrgNumber varchar(20);
alter table accountplan add SocietyNumber varchar(15);
alter table accountplan add KommuneID int(11);
alter table accountplan add WorkStart date;
alter table accountplan add WorkStop date;
alter table kommune change KommuneNumber KommuneNumber varchar(4) not null;
CREATE TABLE kommune (
  KommuneID int not null auto_increment,
  KommuneNumber int not null,
  KommuneName varchar(50) not null,
  Sone smallint,
  TS timestamp,
  key(KommuneNumber),
  primary key(KommuneID)
) TYPE=ISAM PACK_KEYS=1;
alter table product add AccountPlanID int(11);
alter table product add CompanyDepartmentID int(11);
alter table product add ProjectID int(11);
alter table company add Mobile varchar(24);
alter table weeklysaleconf add DepartmentID int(11);
alter table arbeidsgiveravgift change Percent Percent double;

alter table companydepartment add DepartmentNumber int(11);
alter table project add ProjectNumber int(11);

alter table accountplan add EnableNorwegianStandard smallint;

alter table confdbfields change PrimaryKey PrimaryKey smallint;

alter table invoiceout change D_Name DName varchar(255);
alter table invoiceout change D_PostalCode DZipCode varchar(4);
alter table invoiceout change D_City DCity varchar(255);
alter table invoiceout change D_Country DCountry varchar(255);
alter table invoiceout change I_Country ICountry varchar(255);
alter table invoiceout change D_Address DAddress varchar(255);
alter table invoiceout change I_Address IAddress varchar(255);
alter table invoiceout change I_City ICity varchar(255);
alter table invoiceout change I_PostalCode IZipCode varchar(4);
alter table invoiceout change I_Name IName varchar(255);

alter table invoicein change D_Name DName varchar(255);
alter table invoicein change D_PostalCode DZipCode varchar(4);
alter table invoicein change D_City DCity varchar(255);
alter table invoicein change D_Country DCountry varchar(255);
alter table invoicein change I_Country ICountry varchar(255);
alter table invoicein change D_Address DAddress varchar(255);
alter table invoicein change I_Address IAddress varchar(255);
alter table invoicein change I_City ICity varchar(255);
alter table invoicein change I_PostalCode IZipCode varchar(4);
alter table invoicein change I_Name IName varchar(255);

alter table companydepartment add address varchar(255);
alter table companydepartment add ZipCode varchar(255);
alter table companydepartment add EnableZeroYearEnd smallint;
alter table companydepartment add Description text;
alter table companydepartment add km0101 int;

alter table weeklysale drop CreatedPeriod;
alter table weeklysale add  CreatedDate date;

alter table roletemplateaccess add AccessLevel int;
alter table publishcategory add Ingress text;
alter table confdbfields drop FieldNameAlias;
alter table confdbfields drop Description;
alter  table company drop visitadresse;

CREATE TABLE confdbfieldlanguage (
  ConfDbFieldLanguageID int not null auto_increment,
  ConfDbFieldID int not null,
  Language char(2) not null,
  Alias    varchar(255),
  TableName varchar(60),
  TableField varchar(40),
  Description varchar(255),
  TS timestamp,
  key(ConfDbFieldID),
  key(Language),
  primary key(ConfDbFieldLanguageID)
) TYPE=ISAM PACK_KEYS=1;

alter table accountplan change debittext debittext varchar(20);
alter table accountplan change credittext credittext varchar(20);

insert into role set RoleName='Technical', Interface='technical', Description='Tekniske instillinger';

INSERT INTO menu VALUES (50,0,'Template','technical','template','list',20040104145420,NULL,'','','','Templates');
INSERT INTO menu VALUES (0,50,'Template','technical','template','list',20040104145420,NULL,'','','','Templates');
INSERT INTO menu VALUES (0,50,'Template restirctions','technical','templaterestrictions','list',20040104145420,NULL,'','','','Template restriksjoner');
INSERT INTO menu VALUES (0,50,'File upload','technical','fileupload','list',20040104145420,NULL,'','','','Filopplasting');
INSERT INTO menu VALUES (0,50,'Rules','technical','rules','list',20040104145420,NULL,'','','','Regler');
INSERT INTO menu VALUES (0,50,'Conditions','technical','conditions','list',20040104145420,NULL,'','','','Kondisjoner');
INSERT INTO menu VALUES (0,50,'Signatures','technical','conditions','list',20040104145420,NULL,'','','','Signaturer');
INSERT INTO menu VALUES (0,50,'Notify manager','intranett','notify','list',20040104145420,NULL,'','','','Kunder');

update menu set interface = 'technical' where module ='menu';
update menu set interface = 'technical', MenuParentID=50 where module ='log';
update menu set interface = 'technical', MenuParentID=50 where module ='conflayout';
update menu set interface = 'technical', MenuParentID=50 where module ='confdbfield';
update menu set interface = 'technical', MenuParentID=50 where module ='language';
update menu set interface = 'technical', MenuParentID=50 where module ='misc';
update menu set interface = 'technical', MenuParentID=50 where module ='sync';
update menu set interface = 'technical', MenuParentID=50 where module ='urlalias';


alter table company change D_PostalCode DZipCode varchar(20);

CREATE TABLE shortreport (
  AccountReportID int not null auto_increment,
  Period char(8) NOT NULL,
  DeliveredOnTime smallint default '0',
  DeliveredOnTimeNo smallint default '0',
  DeliveredSorted smallint default '0',
  DeliveredSortedNo smallint default '0',
  Elements varchar(255),
  Praise varchar(255),
  Improvements varchar(255),
  PayExtra1 double default '0.00',
  PayExtra2 double default '0.00',
  PayExtra3 double default '0.00',
  BalancePosts varchar(255),
  ResultPosts varchar(255),
  TS timestamp,
  key(Period),
  primary key(AccountReportID)
) TYPE=ISAM PACK_KEYS=1;

alter table mvaavstemming add LastYearPayed double default '0.00';
alter table mvaavstemming add LastYearPayedJournalID int(11);
alter table mvaavstemming add LastYearPayedDate date;

alter table mvaavstemming add Period1Payed double default '0.00';
alter table mvaavstemming add Period1PayedJournalID int(11);
alter table mvaavstemming add Period1PayedDate date;

alter table mvaavstemming add Period2Payed double default '0.00';
alter table mvaavstemming add Period2PayedJournalID int(11);
alter table mvaavstemming add Period2PayedDate date;

alter table mvaavstemming add Period3Payed double default '0.00';
alter table mvaavstemming add Period3PayedJournalID int(11);
alter table mvaavstemming add Period3PayedDate date;

alter table mvaavstemming add Period4Payed double default '0.00';
alter table mvaavstemming add Period4PayedJournalID int(11);
alter table mvaavstemming add Period4PayedDate date;

alter table mvaavstemming add Period5Payed double default '0.00';
alter table mvaavstemming add Period5PayedJournalID int(11);
alter table mvaavstemming add Period5PayedDate date;

alter table mvaavstemming add Period6Payed double default '0.00';
alter table mvaavstemming add Period6PayedJournalID int(11);
alter table mvaavstemming add Period6PayedDate date;

insert into vat set VatID=30, AccountPlanID=2770;
alter table accountplan add EnableSaldo smallint;

alter table accountplan change Report1Account Report1Line int;
alter table accountplan change Report2Account Report2Line int;
alter table accountplan change Report3Account Report3Line int;
alter table accountplan change Report4Account Report4Line int;
alter table accountplan change Report5Account Report5Line int;
alter table accountplan change Report6Account Report6Line int;
alter table accountplan change Report7Account Report7Line int;
alter table accountplan change Report8Account Report8Line int;
alter table accountplan change Report9Account Report9Line int;
alter table accountplan change Report10Account Report10Line int;

/*alter table accountplan add Report1Account int;
alter table accountplan add Report2Account int;
alter table accountplan add Report3Account int;
alter table accountplan add Report4Account int;
alter table accountplan add Report5Account int;
alter table accountplan add Report6Account int;
alter table accountplan add Report7Account int;
alter table accountplan add Report8Account int;
alter table accountplan add Report9Account int;
alter table accountplan add Report10Account int;*/

CREATE TABLE mvaavstemming (
  MvaAvstemmingID int not null auto_increment,
  PeriodYear char(8) NOT NULL,
  LastYearDiff double default '0.00',
  LastYearMva double default '0.00',
  Period1Payed double default '0.00',
  Period2Payed double default '0.00',
  Period3Payed double default '0.00',
  Period4Payed double default '0.00',
  Period5Payed double default '0.00',
  Period6Payed double default '0.00',
  TS timestamp,
  key(PeriodYear),
  primary key(MvaAvstemmingID)
) TYPE=ISAM PACK_KEYS=1;

CREATE TABLE mvaavstemmingline (
  MvaAvstemmingLineID int(11) NOT NULL auto_increment,
  MvaAvstemmingID int(11) NOT NULL,
  Period char(8) NOT NULL,
  TotalOmsettning double default '0.00',
  FreeOmsettning double default '0.00',
  Grunnlag24mva double default '0.00',
  In24mva double default '0.00',
  Out24mva double default '0.00',
  Grunnlag12mva double default '0.00',
  In12mva double default '0.00',
  Out12mva double default '0.00',
  Grunnlag6mva double default '0.00',
  In6mva double default '0.00',
  Out6mva double default '0.00',
  TS timestamp,
  key(Period),
  key(MvaAvstemmingID),
  primary key(MvaAvstemmingLineID)
) TYPE=ISAM PACK_KEYS=1;


alter table weeklysalegroupconf change Group1DepartmentID Group1ProsjectID int(11);
alter table weeklysalegroupconf change Group2DepartmentID Group2ProsjectID int(11);
alter table weeklysalegroupconf change Group3DepartmentID Group3ProsjectID int(11);
alter table weeklysalegroupconf change Group4DepartmentID Group4ProsjectID int(11);
alter table weeklysalegroupconf change Group5DepartmentID Group5ProsjectID int(11);
alter table weeklysalegroupconf change Group6DepartmentID Group6ProsjectID int(11);
alter table weeklysalegroupconf change Group7DepartmentID Group7ProsjectID int(11);
alter table weeklysalegroupconf change Group8DepartmentID Group8ProsjectID int(11);
alter table weeklysalegroupconf change Group9DepartmentID Group9ProsjectID int(11);
alter table weeklysalegroupconf change Group10DepartmentID Group10ProsjectID int(11);
alter table weeklysalegroupconf change Group11DepartmentID Group11ProsjectID int(11);
alter table weeklysalegroupconf change Group12DepartmentID Group12ProsjectID int(11);
alter table weeklysalegroupconf change Group13DepartmentID Group13ProsjectID int(11);
alter table weeklysalegroupconf change Group14DepartmentID Group14ProsjectID int(11);
alter table weeklysalegroupconf change Group15DepartmentID Group15ProsjectID int(11);
alter table weeklysalegroupconf change Group16DepartmentID Group16ProsjectID int(11);
alter table weeklysalegroupconf change Group17DepartmentID Group17ProsjectID int(11);
alter table weeklysalegroupconf change Group18DepartmentID Group18ProsjectID int(11);
alter table weeklysalegroupconf change Group19DepartmentID Group19ProsjectID int(11);
alter table weeklysalegroupconf change Group20DepartmentID Group20ProsjectID int(11);

alter table accountplan drop Debet;
alter table accountplan drop Credit;

alter table budgetline add SumOut double default '0.00';
alter table budgetline add SumIn double default '0.00';
alter table voucher drop AccountLineID;
alter table accountline drop JournalID;

CREATE TABLE voucheraccountline (
  VoucherAccountLineID int not null auto_increment,
  JournalID int not null,
  AccountLineID int not null,
  unique(JournalID, AccountLineID),
  primary key(VoucherAccountLineID)
) TYPE=ISAM PACK_KEYS=1;

CREATE TABLE logapplication (
  LogApplicationID int(11) NOT NULL auto_increment,
  Type char(2) NOT NULL,
  TS timestamp,
  Description text,
  Trace text,
  PersonID int,
  primary key(LogApplicationID)
) TYPE=ISAM PACK_KEYS=1;

#Kun for bankavstemming
alter table voucher add key(AccountLineID);
alter table voucher add AccountLineID int;


alter table person add ChangedByPersonID int;
alter table company add ChangedByPersonID int;
alter table company change TS TS timestamp;

alter table company change V_Name VName varchar(100);
alter table company change I_Name IName varchar(100);
alter table company change D_Name DName varchar(100);
alter table company change V_Address VAddress varchar(60);
alter table company change I_Address IAddress varchar(60);
alter table company change D_Address DAddress varchar(60);
alter table company change V_City VCity varchar(15);
alter table company change I_City ICity varchar(15);
alter table company change D_City DCity varchar(15);
alter table company change V_PostalCode VZipCode varchar(10);
alter table company change I_PostalCode IZipCode varchar(10);
alter table company change D_PostalCode DZipCode varchar(10);
alter table company change V_Country VCountry varchar(15);
alter table company change I_Country ICountry varchar(15);
alter table company change D_Country DCountry varchar(15);

alter table confdbfields change FieldExtra FieldExtra varchar(30);
alter table person change Direktenummer DirectPhone varchar(8);
alter table confdbfields add Required smallint;
alter table budgetline add Active smallint(6) default '1';
alter table accountplan drop VATAccount;
alter table accountplan change VATCode VatID int;

CREATE TABLE budget (
  BudgetID int(11) NOT NULL auto_increment,
  Type varchar(20) NOT NULL,
  PeriodYear varchar(8),
  SumIn double default '0.00',
  SumOut double default '0.00',
  Active smallint(6) default '1',
  TS timestamp,
  key(Type),
  primary key(BudgetID)
) TYPE=ISAM PACK_KEYS=1;

CREATE TABLE budgetline (
  BudgetLinesID int(11) NOT NULL auto_increment,
  BudgetID int(11) NOT NULL,
  AccountPlanID smallint(6) NOT NULL,
  Period1In double default '0.00',
  Period1Out double default '0.00',
  Period2In double default '0.00',
  Period2Out double default '0.00',
  Period3In double default '0.00',
  Period3Out double default '0.00',
  Period4In double default '0.00',
  Period4Out double default '0.00',
  Period5In double default '0.00',
  Period5Out double default '0.00',
  Period6In double default '0.00',
  Period6Out double default '0.00',
  Period7In double default '0.00',
  Period7Out double default '0.00',
  Period8In double default '0.00',
  Period8Out double default '0.00',
  Period9In double default '0.00',
  Period9Out double default '0.00',
  Period10In double default '0.00',
  Period10Out double default '0.00',
  Period11In double default '0.00',
  Period11Out double default '0.00',
  Period12In double default '0.00',
  Period12Out double default '0.00',
  TS timestamp,
  key(BudgetID),
  key(AccountPlanID),
  primary key(BudgetLinesID)
) TYPE=ISAM PACK_KEYS=1;

alter table vat change percent Percent float;
alter table accountperiod add Payed smallint(6);

CREATE TABLE session (
  SessionID char(40),
  PersonID int not null,
  LoginDate datetime,
  DatabaseName varchar(30),
  Lang char(2),
  Interface = varchar(30),
  Css = varchar(30),
  MD5 = varchar(35),
  primary key(SessionID)
) TYPE=ISAM PACK_KEYS=1;

alter table person add Debug smallint;
alter table product add VatID int(11);
alter table company change V_PostalCode V_PostalCode int(10);
alter table company change DZipCode DZipCode int(10);
alter table company change IZipCode IZipCode int(10);
alter table accountplan add City varchar(50);

alter table confdbfields add PrimaryKey smallint;
alter table confdbfields add InputValidation varchar(30);
alter table confdbfields add OutputValidation varchar(30);
alter table confdbfields add Description varchar(255);
alter table confdbfields change DefaultFieldHeight FormHeight int;
alter table confdbfields change DefaultFieldWidth FormWidth int;
alter table confdbfields change FieldName TableField varchar(40) not null;

alter table confdbfields change DefaultFieldInputType FormType varchar(30);

alter table person change hoursprday  HoursPrDay smallint;
alter table person change invoiceprday  InvoicePrDay double;

alter table accountplan add EnablePersonalUsage smallint(6);
alter table accountplan add EnableMoneyFlow smallint(6);

insert into setup (Name, Value) Values ('expectedflowTax', '0.35');
insert into setup (Name, Value) Values ('expectedflowPayedTaxTerm1', '12000');
insert into setup (Name, Value) Values ('expectedflowPayedTaxTerm2', '12000');
insert into setup (Name, Value) Values ('expectedflowPayedTaxTerm3', '12000');
insert into setup (Name, Value) Values ('expectedflowPayedTaxTerm4', '12000');

alter table invoiceout add AccountPlanID int(11) default '0';
alter table invoiceout add DEmail varchar(50);
alter table invoiceout add IEmail varchar(50);

alter table invoiceout change IName IName varchar(50);
alter table invoiceout change IAddress IAddress varchar(50);
alter table invoiceout change IZipCode IPostalCode varchar(50);
alter table invoiceout change ICity ICity varchar(50);
alter table invoiceout change I_Country ICountry varchar(50);

alter table invoiceout change DName DName varchar(50);
alter table invoiceout change D_address DAddress varchar(50);
alter table invoiceout change DZipCode DPostalCode varchar(50);
alter table invoiceout change DCity DCity varchar(50);
alter table invoiceout change DCountry DCountry varchar(50);

alter table person add HoursPrDay smallint;
alter table person add InvoicePrDay double;

alter table invoiceout change IName IName varchar(50);
alter table invoiceout change IAddress IAddress varchar(50);
alter table invoiceout change IZipCode IPostalCode varchar(50);
alter table invoiceout change ICity ICity varchar(50);
alter table invoiceout change I_Country ICountry varchar(50);

alter table invoiceout change DName DName varchar(50);
alter table invoiceout change D_address DAddress varchar(50);
alter table invoiceout change DZipCode DPostalCode varchar(50);
alter table invoiceout change DCity DCity varchar(50);
alter table invoiceout change DCountry DCountry varchar(50);

alter table project add RequestID int;

CREATE TABLE request (
  RequestID int(11) NOT NULL auto_increment,
  Heading varchar(255) NOT NULL default '',
  Type int NOT NULL default '', 
  PersonID int,
  CompanyID int,
  Priority smallint,
  DateRequired datetime,
  DateCreated datetime,
  DateFinished datetime,
  FinishedByPersonID int,
  HoursEstimated double,
  HoursEstimatedInternal double,
  Status int,
  ProjectID int,
  ProjectActivityID int,
  DateAccepted datetime,
  AcceptedByPersonID int,
  TS timestamp,
  primary key(RequestID)
) TYPE=ISAM PACK_KEYS=1;

CREATE TABLE requestcomment (
  RequestCommentID int(11) NOT NULL auto_increment,
  RequestID int not null,
  PersonID int,
  CompanyID int,
  URL varchar(255),
  Description text NOT NULL,
  TS timestamp,
  key(RequestID),
  primary key(RequestCommentID)
) TYPE=ISAM PACK_KEYS=1;

CREATE TABLE requestlog (
  RequestLogID int(11) NOT NULL auto_increment,
  RequestID int not null,
  PersonID int,
  Type varchar(30),
  TS timestamp,
  key(RequestID),
  primary key(RequestLogID)
) TYPE=ISAM PACK_KEYS=1;

CREATE TABLE requestcommentfile (
  RequestCommentFileID int(11) NOT NULL auto_increment,
  RequestCommentID int not null,
  Heading varchar(100) NOT NULL default '',
  File int,
  FileSize double,
  key(RequestCommentID),
  primary key(RequestCommentFileID)
) TYPE=ISAM PACK_KEYS=1;

CREATE TABLE requestassigned (
  RequestAssignedID int(11) NOT NULL auto_increment,
  RequestID int NOT NULL,
  InternalPersonID int NOT NULL default '',
  DateActivated datetime,
  DateDeacivated datetime,
  Role varchar(255),
  key(RequestID),
  primary key(RequestAssignedID)
) TYPE=ISAM PACK_KEYS=1;

alter table company add AccountVat int;
alter table person drop UserName;
alter table company drop StandardAccountPlanTransfer;
alter table person add BankAccount varchar(20);

drop table counter;
drop table generalledger;
drop table date;
drop table pages;
drop table documents;
drop table journal;
 
alter table invoiceout drop InvoiceHourPrice;
alter table invoiceout drop InvoiceTravelPrice;
alter table invoiceout drop InvoiceExpences;
alter table invoiceout drop InvoiceTravelUsed;
alter table invoiceout drop InvoiceTravelTotal;


alter table company add AccountHovedbokBalanseFrom int;
alter table company add AccountHovedbokBalanseTo int;
alter table company add AccountHovedbokResultatFrom int;
alter table company add AccountHovedbokResultatTo int;

alter table company drop AccountDepartmentFrom;
alter table company drop AccountDepartmentTo;
alter table company drop AccountProjectFrom;
alter table company drop AccountProjectTo;
alter table company drop AccountSaleFrom;
alter table company drop AccountSaleTo;
alter table company drop AccountHovedbokFrom;
alter table company drop AccountHovedbokTo;

alter table logusage add PkField varchar(255);
alter table logusage add PkValue varchar(255);

alter table voucher add ChangedByPersonID int;

alter table project add Address varchar(255) default NULL;
alter table project add Zipcode int(11) default NULL;
alter table project add EnableZeroYearEnd smallint(6) default NULL;

CREATE TABLE project (
  ProjectID int(11) NOT NULL auto_increment,
  Heading varchar(100) NOT NULL default '',
  Type varchar(50) NOT NULL default '',
  Description mediumtext NOT NULL,
  ValidFrom datetime NOT NULL default '2001-01-01 00:00:00',
  Meldt_av varchar(50) NOT NULL default '',
  ValidTo datetime default '9999-12-31 00:00:00',
  Status varchar(50) NOT NULL default 'Registrert',
  Priority varchar(50) default NULL,
  HoursEstimated double(16,4) NOT NULL default '0.0000',
  CompanyID int(11) NOT NULL default '0',
  Active tinyint(4) default '1',
  ResponsibleID int(11) NOT NULL default '0',
  HoursUsed double default NULL,
  FinishedDate date default NULL,
  RegisteredByID int(11) default NULL,
  SalesPersonID int(11) default NULL,
  Address varchar(255) default NULL,
  Zipcode int(11) default NULL,
  EnableZeroYearEnd smallint(6) default NULL,
  primary key(ProjectID)
) TYPE=ISAM PACK_KEYS=1;

#drop table project;

alter table weeklysaleday change Day Day char(2);

drop table weeklysaleline;

alter table accountline change AmountIn AmountIn double;
alter table accountline change AmountOut AmountOut double;

alter table logaccessdenied add Message varchar(255);

alter table account add key(AccountPlanID);
alter table accountline add key(AccountLineID);
alter table accountline add key(JournalID);
alter table accountline add key(AccountID);

alter table account add AccountPlanID int not null;
alter table accountline add JournalID int not null;
alter table accountline add AccountID int not null;

alter table weeklysale add PrivateExplanation varchar(255);
alter table weeklysalegroupconf add Group1DepartmentID int;
alter table weeklysalegroupconf add Group2DepartmentID int;
alter table weeklysalegroupconf add Group3DepartmentID int;
alter table weeklysalegroupconf add Group4DepartmentID int;
alter table weeklysalegroupconf add Group5DepartmentID int;
alter table weeklysalegroupconf add Group6DepartmentID int;
alter table weeklysalegroupconf add Group7DepartmentID int;
alter table weeklysalegroupconf add Group8DepartmentID int;
alter table weeklysalegroupconf add Group9DepartmentID int;
alter table weeklysalegroupconf add Group10DepartmentID int;
alter table weeklysalegroupconf add Group11DepartmentID int;
alter table weeklysalegroupconf add Group12DepartmentID int;
alter table weeklysalegroupconf add Group13DepartmentID int;
alter table weeklysalegroupconf add Group14DepartmentID int;
alter table weeklysalegroupconf add Group15DepartmentID int;
alter table weeklysalegroupconf add Group16DepartmentID int;
alter table weeklysalegroupconf add Group17DepartmentID int;
alter table weeklysalegroupconf add Group18DepartmentID int;
alter table weeklysalegroupconf add Group19DepartmentID int;
alter table weeklysalegroupconf add Group20DepartmentID int;

alter table sla add CreatedByPersonID int;
alter table sla add ChangedByPersonID int;
alter table sla add TS timestamp;
alter table sla add SignedDate date;

alter table weeklysale add TS timestamp;
alter table weeklysaleday add TS timestamp;
alter table weeklysale add ChangedByPersonID int;
alter table weeklysale add CreatedPeriod varchar(7);
alter table salary change Account DomesticBankAccount int;
##drop table salaryline; why??
##drop table salaryconfline; why??
alter tabel salaryconf drop EmployeeRateID;
alter tabel salary drop EmployeeRateID;
alter table weeklysaleday add PersonID int;
alter table weeklysaleday add Day smallint;
alter table weeklysaleday drop Date;

CREATE TABLE roletemplate (
  Interface varchar(40) NOT NULL default '',
  Module varchar(40) NOT NULL default '',
  Template varchar(40) NOT NULL default '',
  Cust smallint(6) default NULL,
  AccessLevel int(11) default NULL,
  AuthType varchar(20) default NULL,
  TS timestamp(14) NOT NULL,
  RoleTemplateID int(11) NOT NULL auto_increment,
  Log smallint(6) default '1',
  LogReferer smallint(6) default '1',
  LogUserAgent smallint(6) default '1',
  OnlyAllowInternUser smallint(6) default '1',
  PRIMARY KEY  (RoleTemplateID),
  UNIQUE Interface (Interface,Module,Template)
) TYPE=MyISAM;

alter table weeklysale add Period char(7);
alter table weeklysale drop Year;
alter table weeklysale drop Month;
alter table weeklysale add PrivateAmount double;
alter table weeklysaleconf add Name varchar(255);
alter table weeklysale add Name varchar(255);
alter table weeklysale add TotalAmount double;
alter table roletemplate add Log smallint default '1';
alter table roletemplate add LogReferer smallint default '1';
alter table roletemplate add LogUserAgent smallint default '1';

CREATE TABLE arbeidsgiveravgift (
  Code int(11) NOT NULL auto_increment,
  Percent int,
  TS timestamp,
  PRIMARY KEY  (Code)
);

CREATE TABLE salaryconf (
  SalaryConfID int(11) NOT NULL auto_increment,
  AccountPlanID int,
  CreatedByPersonID int,
  EmployeeRateID int,
  TS timestamp,
  PRIMARY KEY  (SalaryConfID)
);

CREATE TABLE salaryconfline (
  SalaryConfLineID int(11) NOT NULL auto_increment,
  SalaryConfID int,
  LineNumber int,
  SalaryText varchar(255),
  NumberInPeriod int,
  Rate varchar(8),
  AmountThisPeriod double,
  AccountPlanID int,
  EnableEmployeeTax smallint,
  TS timestamp,
  KEY (SalaryConfID),
  PRIMARY KEY  (SalaryConfLineID)
);

CREATE TABLE salary (
  SalaryID int(11) NOT NULL auto_increment,
  SalaryConfID int,
  AccountPlanID int,
  JournalID int,
  ValidFrom date,
  ValidTo date,
  PayDate date,
  Period char(7),
  Account int,
  EmployeeRateID int,
  CreatedByPersonID int,
  TS timestamp,
  PRIMARY KEY  (SalaryID)
);

CREATE TABLE salaryline (
  SalaryLineID int(11) NOT NULL auto_increment,
  SalaryID int,
  LineNumber smallint,
  SalaryText varchar(255),
  NumberInPeriod int,
  Rate varchar(8),
  AmountThisPeriod double,
  AmountThisYear double,
  AccountPlanID int,
  EnableEmployeeTax smallint,
  ProjectID int,
  DepartmentID int,
  EmployeeTax smallint,
  TS timestamp,
  KEY(SalaryID),
  PRIMARY KEY  (SalaryLineID)
);

CREATE TABLE logusage (
  LogUsageID int(11) NOT NULL auto_increment,
  PersonID int,
  Template varchar(40),
  Module varchar(40),
  Interface varchar(40),
  Referer varchar(255),
  UserAgent varchar(255),
  IPAdress varchar(16),
  SessionID varchar(40),
  TS timestamp,
  key (Template, Module, Interface),
  PRIMARY KEY  (LogUsageID)
);

CREATE TABLE logaccessdenied (
  LogAccessDeniedID int(11) NOT NULL auto_increment,
  PersonID int,
  Module varchar(40),
  Template varchar(40),
  Interface varchar(40),
  Referer varchar(255),
  UserAgent varchar(255),
  IPAdress varchar(16),
  SessionID varchar(40),
  TS timestamp,
  key (Template, Module, Interface),
  PRIMARY KEY  (LogAccessDeniedID)
);

CREATE TABLE logsearch (
  LogSearchID int(11) NOT NULL auto_increment,
  PersonID int,
  TableName varchar(255),
  SearchWord varchar(255),
  SessionID varchar(40),
  TS timestamp,
  key(TableName),
  key (SearchWord),
  PRIMARY KEY  (LogSearchID)
);

CREATE TABLE logpagenotfound (
  LogPageNotFoundID int(11) NOT NULL auto_increment,
  URL varchar(255),
  PersonID int,
  SessionID varchar(40),
  TS timestamp,
  PRIMARY KEY  (LogPageNotFoundID)
);

alter table roletemplate add OnlyAllowInternUser smallint default '1';
alter table process change ApprovedByPersonID ApprovedByPersonID varchar(255);
alter table processprocedure change MadeByPersonID MadeByPersonID varchar(255);
alter table process add Picture varchar(255);

CREATE TABLE weeklysaleconf (
  WeeklySaleConfID int(11) NOT NULL auto_increment,
  DepartmentID int(11) default NULL,
  CreatedByPersonID int(11) default NULL,
  TS timestamp(14) NOT NULL,
  Name varchar(255) default NULL,
  PRIMARY KEY  (WeeklySaleConfID)
) TYPE=MyISAM;

CREATE TABLE weeklysalegroupconf (
  WeeklySaleGroupConfID int(11) NOT NULL auto_increment,
  WeeklySaleConfID int,
  Group1Name varchar(25),
  Group1Account int,
  Group2Name varchar(25),
  Group2Account int,
  Group3Name varchar(25),
  Group3Account int,
  Group4Name varchar(25),
  Group4Account int,
  Group5Name varchar(25),
  Group5Account int,
  Group6Name varchar(25),
  Group6Account int,
  Group7Name varchar(25),
  Group7Account int,
  Group8Name varchar(25),
  Group8Account int,
  Group9Name varchar(25),
  Group9Account int,
  Group10Name varchar(25),
  Group10Account int,
  Group11Name varchar(25),
  Group11Account int,
  Group12Name varchar(25),
  Group12Account int,
  Group13Name varchar(25),
  Group13Account int,
  Group14Name varchar(25),
  Group14Account int,
  Group15Name varchar(25),
  Group15Account int,
  Group16Name varchar(25),
  Group16Account int,
  Group17Name varchar(25),  
  Group17Account int,
  Group18Name varchar(25),
  Group18Account int,
  Group19Name varchar(25),
  Group19Account int,
  Group20Name varchar(25),
  Group20Account int, 
  Type smallint,
  TS timestamp,
  KEY (WeeklySaleConfID),
  PRIMARY KEY  (WeeklySaleGroupConfID)
);

CREATE TABLE weeklysale (
  WeeklySaleID int(11) NOT NULL auto_increment,
  WeeklySaleConfID int,
  Year int,
  JournalID int,
  Week smallint,
  Month smallint,
  DepartmentID int,
  CreatedByPersonID int,
  PrivateAmount double,
  UNIQUE(Year, Week, DepartmentID),
  PRIMARY KEY  (WeeklySaleID)
);

CREATE TABLE weeklysaleday (
  WeeklySaleDayID int(11) NOT NULL auto_increment,
  WeeklySaleID int,
  Type smallint,
  DayID smallint,
  Date date,
  Znr int,
  ZnrTotalAmount double,
  Group1Amount double,
  Group2Amount double,
  Group3Amount double,
  Group4Amount double,
  Group5Amount double,
  Group6Amount double,
  Group7Amount double,
  Group8Amount double,
  Group9Amount double,
  Group10Amount double,
  Group11Amount double,
  Group12Amount double,
  Group13Amount double,
  Group14Amount double,
  Group15Amount double,
  Group16Amount double,
  Group17Amount double,
  Group18Amount double,
  Group19Amount double,
  Group20Amount double,
  KEY(WeeklySaleID),
  PRIMARY KEY  (WeeklySaleDayID)
);

CREATE TABLE accountreport (
  AccountReportID int(11) NOT NULL auto_increment,
  ReportName varchar(255),
  PRIMARY KEY  (AccountReportID)
) TYPE=MyISAM;

CREATE TABLE accountreportline (
  AccountReportLineID int(11) NOT NULL auto_increment,
  AccountReportID int,
  LineID int,
  AccountPlanID int,
  Addition varchar(255),
  Subtraction varchar(255),
  PRIMARY KEY  (AccountReportLineID)
) TYPE=MyISAM;

alter table accountplan drop Report1Line;
alter table accountplan drop Report2Line;
alter table accountplan drop Report3Line;
alter table accountplan drop Report4Line;
alter table accountplan drop Report5Line;
alter table accountplan drop Report6Line;
alter table accountplan drop Report7Line;
alter table accountplan drop Report8Line;
alter table accountplan drop Report9Line;
alter table accountplan drop Report10Line;

alter table accountplan drop Report1Enable;
alter table accountplan drop Report2Enable;
alter table accountplan drop Report3Enable;
alter table accountplan drop Report4Enable;
alter table accountplan drop Report5Enable;
alter table accountplan drop Report6Enable;
alter table accountplan drop Report7Enable;
alter table accountplan drop Report8Enable;
alter table accountplan drop Report9Enable;
alter table accountplan drop Report10Enable;


alter table accountperiod drop Year;
alter table accountperiod change Period Period char(7);

alter table accountplan drop Name;
alter table accountplan add LastUsedTime datetime;

#delete from processstruct;
insert into processstruct set FromProcessID=1, ToProcessID=2, Type='', Position='U';
insert into processstruct set FromProcessID=2, ToProcessID=3, Type='', Position='U';
insert into processstruct set FromProcessID=3, ToProcessID=4, Type='', Position='U';
insert into processstruct set FromProcessID=4, ToProcessID=5, Type='', Position='U';
insert into processstruct set FromProcessID=5, ToProcessID=6, Type='', Position='U';
insert into processstruct set FromProcessID=6, ToProcessID=7, Type='', Position='U';
insert into processstruct set FromProcessID=7, ToProcessID=8, Type='', Position='U';
insert into processstruct set FromProcessID=4, ToProcessID=11, Type='', Position='L';
insert into processstruct set FromProcessID=11, ToProcessID=8, Type='', Position='U';
insert into processstruct set FromProcessID=4, ToProcessID=12, Type='', Position='R';
insert into processstruct set FromProcessID=12, ToProcessID=8, Type='', Position='U';
insert into processstruct set FromProcessID=13, ToProcessID=14, Type='', Position='U';
insert into processstruct set FromProcessID=14, ToProcessID=15, Type='', Position='U';
insert into processstruct set FromProcessID=15, ToProcessID=16, Type='', Position='U';
insert into processstruct set FromProcessID=16, ToProcessID=17, Type='', Position='U';
insert into processstruct set FromProcessID=17, ToProcessID=18, Type='', Position='U';
insert into processstruct set FromProcessID=18, ToProcessID=19, Type='', Position='U'; 


drop table processattachment;
drop table processreference;
drop table processdescription;


alter table voucher add DescriptionID int;
alter table voucher add VatID int;

CREATE TABLE ordersubscription (
  OrderID int(11) NOT NULL auto_increment,
  OrderStatus varchar(10) NOT NULL default '0',
  CompanyID varchar(5) NOT NULL default '',
  ContactID int(11) NOT NULL default '0',
  ResponsibleID int(11) NOT NULL default '0',
  OrderDate datetime default NULL,
  RequiredDate datetime default NULL,
  DeliveryDate datetime default NULL,
  ShipVia int(11) default NULL,
  Freight double(16,4) NOT NULL default '0.0000',
  DName varchar(100) default NULL,
  D_Address varchar(40) default NULL,
  DCity varchar(15) default NULL,
  DZipCode varchar(10) default NULL,
  DCountry varchar(15) default NULL,
  Active tinyint(4) NOT NULL default '1',
  TS timestamp(14) NOT NULL,
  ValidFrom datetime NOT NULL default '2001-01-01 00:00:00',
  ValidTo datetime NOT NULL default '9999-12-31 00:00:00',
  TotalOrdered float NOT NULL default '0',
  TotalDelivered float NOT NULL default '0',
  TaxFree tinyint(4) NOT NULL default '0',
  OrderRef varchar(255) default NULL,
  DateShipped date NOT NULL default '0000-00-00',
  OrderComment text,
  PRIMARY KEY  (OrderID),
  KEY CustomerID (CompanyID),
  KEY EmployeeID (ContactID)
) TYPE=MyISAM;

CREATE TABLE ordersubscriptionline (
  OrderLineID int(11) NOT NULL auto_increment,
  ProductNumber varchar(10) NOT NULL default '0',
  OrderID int(11) default NULL,
  ProductID int(11) default NULL,
  UnitCostPrice float(16,4) default NULL,
  UnitCustPrice float NOT NULL default '0',
  QuantityOrdered int(11) NOT NULL default '1',
  QuantityDelivered int(11) NOT NULL default '0',
  TS timestamp(14) NOT NULL,
  VAT double NOT NULL default '0',
  Active smallint(6) default '1',
  PRIMARY KEY  (OrderLineID)
) TYPE=MyISAM;

alter table accountplan drop EnableMotkonto;
alter table accountplan drop Motkonto;
alter table accountplan add  CustomerNumber int;
alter table accountplan drop RecipientAccountNumber;

alter table slaimprovement change Goal Goal double;
alter table slaimprovement change GoalAchievement GoalAchievement double;
alter table voucher add AutomaticVatVoucherID int;
alter table voucher add AutomaticReason varchar(30);

alter table slagoal change Goal Goal double;
alter table slagoal change GoalAchievment GoalAchievment double;

alter table accountplan change EnableReskontro EnableReskontro smallint default '0';
alter table company add EnableBankNumberSequence smallint;
alter table company add EnableSaleNumberSequence smallint;
alter table company add EnableBuyNumberSequence smallint;
alter table company add EnableSalaryNumberSequence smallint;
alter table company add EnableCashNumberSequence smallint;

alter table company add VoucherResultAccount int;
alter table company add VoucherBalanceAccount int;
alter table voucher change VoucherPeriod VoucherPeriod char(7);

alter table company add AccountSaleFrom int;
alter table company add AccountSaleTo int;
alter table company add AccountSalaryFrom int;
alter table company add AccountSalaryTo int;
alter table company add AccountEmployeeFrom int;
alter table company add AccountEmployeeTo int;
alter table company add AccountDepartmentFrom int;
alter table company add AccountDepartmentTo int;
alter table company add AccountProjectFrom int;
alter table company add AccountProjectTo int;
alter table company add AccountDebitFrom int;
alter table company add AccountDebitTo int;
alter table company add AccountCreditFrom int;
alter table company add AccountCreditTo int;
alter table company add AccountExpenceFrom int;
alter table company add AccountExpenceTo int;
alter table company add AccountHovedbokFrom int;
alter table company add AccountHovedbokTo int;


alter table accountplan drop MotkontoResultat;
alter table accountplan drop MotkontoResultatNavn;
alter table accountplan drop MotkontoBalanseNavn;
alter table accountplan drop MotkontoBalanse;
alter table accountplan add EnableMotkontoResultat smallint;
alter table accountplan add EnableMotkontoBalanse smallint;
alter table accountplan add MotkontoBalanse1 int;
alter table accountplan add MotkontoBalanse2 int;
alter table accountplan add MotkontoBalanse3 int;
alter table accountplan add MotkontoResultat1 int;
alter table accountplan add MotkontoResultat2 int;
alter table accountplan add MotkontoResultat3 int;


CREATE TABLE urlalias (
  Alias char(20) not null,
  Url varchar(255),
  Internal smallint default '1',
  Active smallint default '1',
  PRIMARY KEY  (Alias)
) TYPE=MyISAM;

alter table expenceline add Active smallint default '1';

alter table ordercust add I_Email varchar(255);
alter table ordercust add D_Email varchar(255);


alter table ordercustline add OrderCustLineNum int;

alter table company add OpenMon varchar(5);
alter table company add OpenTue varchar(5);
alter table company add OpenWed varchar(5);
alter table company add OpenThu varchar(5);
alter table company add OpenFri varchar(5);
alter table company add OpenSat varchar(5);
alter table company add OpenSun varchar(5);
alter table company add CloseMon varchar(5);
alter table company add CloseTue varchar(5);
alter table company add CloseWed varchar(5);
alter table company add CloseThu varchar(5);
alter table company add CloseFri varchar(5);
alter table company add CloseSat varchar(5);
alter table company add CloseSun varchar(5);


alter table productcategorystruc change Active Active smallint default '1';
alter table productcategory change Active Active smallint default '1';
alter table company add Map varchar(255);
alter table company add Logo varchar(255);
alter table product add ProductPictureBig varchar(255);
alter table product add ProductPictureSmall varchar(255);



alter table timeliste add OutInvoiceID smallint default '0';
alter table timeliste add ToBeInvoiced smallint default '1';
alter table expenceline add ToBeInvoiced smallint default '1';
alter table expenceline add OutInvoiceID smallint default '0';
alter table drivedistance add OutInvoiceID smallint default '0'; 
alter table drivedistance add ToBeInvoiced smallint default '1';

CREATE TABLE voucher (
  VoucherID int(11) NOT NULL auto_increment,
  JournalID int,
  VoucherType char(3) default 'K',
  VoucherDate date,
  VoucherText varchar(255) default NULL,
  VoucherPeriod smallint(6) default '1',
  AmountIn double default '0',
  AmountOut double default '0',
  GeneralLedgerAccountID int(11) default NULL,
  Currency varchar(3) default 'NOK',
  ForeignAmount double,
  Vat double NULL,
  Quantity int(11) default '0',
  DepartmentID varchar(255) default '0',
  ProjectID varchar(255) default '0',
  DueDate date,
  Reference varchar(255) default '',
  Description text,
  TS timestamp(14) NOT NULL,
  CreatedByID int(11) default '0',
  Active smallint default '0',
  PRIMARY KEY  (VoucherID),
) TYPE=MyISAM;


CREATE TABLE Questionare (
  QuestionareID int(11) NOT NULL auto_increment,
  Questions text,
  TS timestamp,
  CompanyID int,
  CompanyName varchar(255),
  Address varcgar(255),
  Phone varchar(255),
  Email varchar(255),
  ContactPerson (varchar(255),
  Logo varchar(255),
  Recipients text,
  PRIMARY KEY  (QuestionareID)
) TYPE=MyISAM;

alter table companydepartment add EnableZeroYearEnd smallint;
alter table companydepartment add km3112 int;

alter table project add Address varchar(255);
alter table project add Zipcode int;
alter table project add EnableZeroYearEnd smallint;

CREATE TABLE sla (
  SlaID int(11) NOT NULL auto_increment,
  CreatedDate datetime default NULL,
  Frequency smallint(6) default NULL,
  FirstDate datetime default NULL,
  CompanyID varchar(255) default NULL,
  Region varchar(20),
  SalesPersonID int(11) default NULL,
  PRIMARY KEY  (SlaID),
  KEY (CompanyID),
  KEY (Region)
) TYPE=MyISAM;

CREATE TABLE slagoal (
  SlaGoalID int(11) NOT NULL auto_increment,
  SlaID int,
  SlaTypeID int,
  Goal varchar(255),
  GoalAchievment varchar(255),
  PRIMARY KEY  (SlaGoalID),
  KEY (SlaID),
  KEY (SlaTypeID)
) TYPE=MyISAM;

CREATE TABLE slaimprovement (
  SlaImprovementID int(11) NOT NULL auto_increment,
  SlaID int,
  SlaTypeID int,
  Sort smallint,
  Service varchar(255),
  Goal int,
  GoalAchievement int,
  Responsible varchar(255),
  PRIMARY KEY  (SlaImprovementID),
  KEY (SlaID),
  KEY (SLaTypeID),
) TYPE=MyISAM;

#New tables for more advanced publishing

alter table timeliste change Date Date date
alter table accountplan add debittext varchar(20);
alter table accountplan add credittext varchar(20);
alter table projectactivity add Running smallint
alter table roletemplate add key(Interface, Module, Template);

alter table journal add Active smallint default '1';
alter table accountperiod add Period int;
alter table personworkexperience add letterofrecomandation text;


CREATE TABLE ProductReleasenote (
  ProductReleasenoteID int(11) NOT NULL auto_increment,
  ProductID int,
  TS timestamp,
  ValidFrom datetime,
  ValidTo datetime,
  Heading varchar(255),
  Description text,
  Version double,
  PRIMARY KEY  (ProductReleasenoteID)
) TYPE=MyISAM;

CREATE TABLE process (
  ProcessID int(11) NOT NULL auto_increment,
  CreatedByPersonID int,
  CreatedTime datetime,
  ChangedByPersonID int,
  ChangedTime
  ChangedTime datetime,
  ApprovedByPersonID int,
  ApprovedTime datetime,
  ArchiveRef int,
  Heading varchar(255),
  Description text,
  Chapter varchar(6),
  DocumentNumber int,
  VersionNumber int,
  NumberOfPages int,
  ProcessStart varchar(255),
  ProcessStop varchar(255),
  Type int, /* hovedprocess, st¿tteprocess */
  Module varchar(40),
  Template varchar(40),
  TS timestamp,
  PRIMARY KEY  (ProcessID)
) TYPE=MyISAM;

Create table processstruct (
  FromProcessID int,
  ToProcessID int,
  Type enum('paralell','down','up')
);

CREATE TABLE processpurpose (
  ProcessPurposeID int(11) NOT NULL auto_increment,
  ProcessID int,
  TS timestamp,
  Description text, 
  PRIMARY KEY  (ProcessPurposeID)
) TYPE=MyISAM;

CREATE TABLE processdefinition (
  ProcessDefinitionID int(11) NOT NULL auto_increment,
  ProcessID int,
  TS timestamp,
  Heading varchar(255),
  Description text, 
  PRIMARY KEY  (ProcessDefinitionID)
) TYPE=MyISAM;

CREATE TABLE processqualitygoal (
  ProcessQualityGoalID int(11) NOT NULL auto_increment,
  ProcessID int,
  TS timestamp,
  Description text, 
  PRIMARY KEY  (ProcessQualityGoalID)
) TYPE=MyISAM;

CREATE TABLE processmeasurelis (
  ProcessMeasureLisID int(11) NOT NULL auto_increment,
  ProcessID int,
  TS timestamp,
  Description text, 
  PRIMARY KEY  (ProcessMeasureLisID)
) TYPE=MyISAM;

CREATE TABLE processprocedure (
  ProcessProcedureID int(11) NOT NULL auto_increment,
  ProcessID int,
  Heading varchar(255),
  CreatedByPersonID int,
  CreatedTime datetime,
  ChangedByPersonID int,
  ChangedTime datetime,
  MadeByPersonID int,
  VersionNumber int,
  TS timestamp,
  PRIMARY KEY  (ProcessProcedureID),
  KEY (ProcessID)
) TYPE=MyISAM;

CREATE TABLE processproceduredefinition (
  ProcessProcedureDefinitionID int(11) NOT NULL auto_increment,
  ProcessProcedureID int,
  TS timestamp,
  Heading varchar(255),
  Description text, 
  PRIMARY KEY  (ProcessProcedureDefinitionID),
  KEY (ProcessProcedureID)
) TYPE=MyISAM;

CREATE TABLE processprocedurestep (
  ProcessProcedureStepID int(11) NOT NULL auto_increment,
  ProcessProcedureID int(11),
  TS timestamp,
  Actor varchar(255),
  Step varchar(255),
  Work varchar(255),
  PRIMARY KEY  (ProcessProcedureStepID),
  KEY (ProcessProcedureID)
) TYPE=MyISAM;

CREATE TABLE processprocedurelink (
  ProcessProcedureLinkID int(11) NOT NULL auto_increment,
  ProcessProcedureID int,
  Heading varchar(255),
  Description text,
  URL varchar(255),
  TS timestamp,
  PRIMARY KEY  (ProcessProcedureLinkID),
  KEY (ProcessProcedureID)
) TYPE=MyISAM;

CREATE TABLE InvoiceOutStruct (
  InvoiceOutID int,
  ProjectID int,
  OrderID int,
  ValidFrom date,
  ValidTo date,
  PRIMARY KEY  (InvoiceOutID, ProjectID, OrderID, ValidFrom)
) TYPE=MyISAM;

CREATE TABLE InvoiceInLine (
  InvoiceInLineID int(11) NOT NULL auto_increment,
  InvoiceInID int(11) default NULL,
  ProductNumber varchar(10) NOT NULL default '0',
  ProductID int(11) default NULL,
  UnitCostPrice float(16,4) default NULL,
  UnitCustPrice float NOT NULL default '0',
  QuantityOrdered double NOT NULL default '0',
  QuantityDelivered double NOT NULL default '0',
  TS timestamp(14) NOT NULL,
  VAT double NOT NULL default '0',
  Active smallint(6) default '1',
  ProductName varchar(255) default NULL,
  PRIMARY KEY  (InvoiceInLineID)
) TYPE=MyISAM;


CREATE TABLE InvoiceIn (
  InvoiceID int(11) NOT NULL auto_increment,
  InvoiceCompanyID int(11) NOT NULL default '0',
  InvoiceContactID int(11) NOT NULL default '0',
  InvoiceTotal float default NULL,
  InvoiceExpences float default NULL,
  InvoiceTravelUsed float default NULL,
  InvoiceHoursUsed float default NULL,
  InvoiceTravelTotal float default NULL,
  InvoiceHoursTotal float default NULL,
  DName varchar(100) default NULL,
  D_Address varchar(255) NOT NULL default '',
  DZipCode varchar(10) default NULL,
  DCity varchar(100) NOT NULL default '',
  DCountry varchar(100) NOT NULL default '',
  InvoiceStatus set('sendt','progress','payed','rip') NOT NULL default '',
  OutInvoiceIDate datetime NOT NULL default '0000-00-00 00:00:00',
  DueDate datetime NOT NULL default '0000-00-00 00:00:00',
  TS timestamp(14) NOT NULL,
  ProjectID int(11) NOT NULL default '0',
  ProjectName varchar(200) NOT NULL default '',
  PaymentDate datetime NOT NULL default '0000-00-00 00:00:00',
  InvoiceHourPrice double NOT NULL default '0',
  InvoiceTravelPrice double NOT NULL default '0',
  Active tinyint(4) NOT NULL default '0',
  CreatedByID int(11) NOT NULL default '0',
  CreatedTime datetime,
  ProjectStartDate date NOT NULL default '0000-00-00',
  ProjectStopDate tinyint(4) NOT NULL default '0',
  OutInvoiceIDescription text NOT NULL,
  InvoiceComment text,
  file_name varchar(200) NOT NULL default '',
  DeliveryCondition varchar(255) NOT NULL default '',
  PaymentCondition varchar(255) NOT NULL default '',
  VAT double NOT NULL default '0',
  IAddress varchar(50) NOT NULL default '',
  IZipCode varchar(10) default NULL,
  ICity varchar(50) NOT NULL default '',
  I_Country varchar(50) NOT NULL default '',
  DeliveryDate date NOT NULL default '0000-00-00',
  OrderDate date NOT NULL default '0000-00-00',
  VATDuty tinyint(4) NOT NULL default '0',
  FreightCost double NOT NULL default '0',
  ExpeditionCost double NOT NULL default '0',
  OrderID int(11) NOT NULL default '0',
  VATAmount double NOT NULL default '0',
  OrderRef varchar(255) default NULL,
  IName varchar(100) default NULL,
  InvoiceTotalRounded float default NULL,
  InvoiceType set('order','project') default NULL,
  InvoiceFromCompanyID int(11) NOT NULL default '0',
  PRIMARY KEY  (InvoiceID)
) TYPE=MyISAM;

alter table Invoice rename InvoiceOut;
alter table InvoiceLine rename InvoiceOutLine;

CREATE TABLE CategoryCategoryStruc (
  ProductCategoryParentID int(11) NOT NULL default '0',
  ProductCategoryChildID int(11) NOT NULL default '0',
  Active set('on','off') default NULL,
  TS timestamp(14) NOT NULL,
  PRIMARY KEY  (ProductCategoryParentID,ProductCategoryChildID)
) TYPE=MyISAM;

CREATE TABLE BasketHead (
  BasketHeadID int(11) NOT NULL auto_increment,
  PersonID int(11) default NULL,
  SessionID varchar(40) default NULL,
  BasketName varchar(50) default NULL,
  BasketType int(11) default NULL,
  Agreement int(11) default NULL,
  PriceInTotal float default NULL,
  PriceOutTotal float default NULL,
  Active set('on','off') default NULL,
  TS timestamp(14) NOT NULL,
  RequiredDate datetime default NULL,
  Comment text,
  CustomerOrderRef varchar(50) default NULL, 
  TaxFree smallint(6) default NULL,
  PRIMARY KEY  (BasketHeadID)
) TYPE=MyISAM;


CREATE TABLE BasketLine (
  BasketLineID int(11) NOT NULL auto_increment,
  BasketLineNum int(11) default NULL,
  BasketHeadID int(11) default NULL,
  ProductID int(11) default NULL,
  Quantity int(11) default NULL,
  PriceIn float default NULL,
  PriceOut float default NULL,
  MVA float default NULL,
  TS timestamp(14) NOT NULL,
  PRIMARY KEY  (BasketLineID)
) TYPE=MyISAM;

CREATE TABLE ProductCategory (
  ProductCategoryID int(11) NOT NULL auto_increment,
  ProductCategoryName varchar(100) default NULL,
  ProductCategoryType int(11) default NULL,
  Sort int(11) default NULL,
  Active set('on','off') default NULL,
  TS timestamp(14) NOT NULL,
  PRIMARY KEY  (ProductCategoryID)
) TYPE=MyISAM;
  

CREATE TABLE ProductProductnuStruc (
  ProductProductnuStrucID int(11) NOT NULL auto_increment,
  ProductNumber varchar(255) default NULL,
  ProductID int(11) default NULL,
  TS timestamp(14) NOT NULL,
  PRIMARY KEY  (ProductProductnuStrucID)
) TYPE=MyISAM;

CREATE TABLE ProductCategoryStruc (  
  ProductID int(11) NOT NULL default '0',
  ProductCategoryID int(11) NOT NULL default '0',
  Active set('on','off') default NULL,
  TS timestamp(14) NOT NULL,
  PRIMARY KEY  (ProductID,ProductCategoryID)
) TYPE=MyISAM;

alter table PublishCategory add Module varchar(40);
alter table ConfMenues change Lang Language char(2);
alter table Company add TagLine varchar(255);

CREATE TABLE PersonCommunication (
  PersonCommunicationID int(11) NOT NULL auto_increment,
  FromPersonID int,
  ToPersonID int,
  ToCompanyID int,
  ProjectID int,
  Heading varchar(255),
  Description text,
  Date datetime,
  CommunicationType varchar(255), #meeting, requirement, statusreport, sale
  CommunicationMedium int, #tlf, mob, sms, email, irl
  CommunicationStatusStart int, #To be followed up, finished, got answear
  CommunicationStatusStop int, #To be followed up, finished, got answear
  HoursUsed float,
  TS timestamp,
  PRIMARY KEY  (PersonCommunicationID)
);

CREATE TABLE PersonParameter (
  PersonParameterID int(11) NOT NULL auto_increment,
  PersonID int,
  Type varchar(255), #(contacted, lead, sale, project, programmer, friend, etc)
  Heading varchar(255), #Description og parameter
  TS timestamp,
  PRIMARY KEY  (PersonParameterID)
);

CREATE TABLE CompanyParameter (
  CompanyParameterID int(11) NOT NULL auto_increment,
  CompanyID int,
  Type varchar(255), #(contacted, lead, sale, project, programmer, friend, etc)
  Heading varchar(255), #Description og parameter
  TS timestamp,
  PRIMARY KEY  (CompanyParameterID)
);

CREATE TABLE PersonCommunicationStruct (
  PersonCommunicationID int(11) NOT NULL auto_increment,
  ToPersonID int,
  Type varchar(255),
  TS timestamp,
  PRIMARY KEY  (PersonCommunicationID)
);

CREATE TABLE Role (
  RoleID int(11) NOT NULL auto_increment,
  RoleName varchar(255),
  RoleType varchar(255),
  Description text,
  TS timestamp,
  PRIMARY KEY  (RoleID)
);

CREATE TABLE RoleTemplate (
  Interface varchar(40) not null,
  Module varchar(40) not null,
  Template varchar(40) not null,
  Cust     smallint,
  AccessLevel int,
  AuthType varchar(20),
  TS timestamp,
  PRIMARY KEY  (Interface, Module, Template)
);

CREATE TABLE RoleTemplateAccess (
  RoleID int not null,
  Interface varchar(40) not null,
  Module varchar(40) not null,
  Template varchar(40) not null,
  TS timestamp,
  PRIMARY KEY (RoleID, Interface, Module, Template)
);

CREATE TABLE RolePerson (
  RoleID int(11) not null ,
  PersonID int not null,
  TS timestamp,
  PRIMARY KEY  (RoleID, PersonID)
);

CREATE TABLE Menu (
  MenuID int(11) NOT NULL auto_increment,
  MenuParentID int(11) not null,
  MenuName varchar(255),
  Interface varchar(40),
  Module varchar(40),
  Template varchar(40),
  TS timestamp,
  PRIMARY KEY  (MenuID)
);

CREATE TABLE Language (
  LanguageID int(11) not null auto_increment,
  LanguageName varchar(40),
  Interface varchar(40),
  Module varchar(40),
  EN varchar(255),
  NO varchar(255),
  NL varchar(255),
  DE varchar(255),
  FR varchar(255),
  TS timestamp,
  PRIMARY KEY (LanguageID)
);

#Add language handling to menues
alter table ConfMenues add Lang char(2) default 'en';


CREATE TABLE TemplateRestrictions (
  TemplateRestrictionsID int(11) NOT NULL auto_increment,
  tr_download tinyint(4) NOT NULL default '0',
  tr_link tinyint(4) NOT NULL default '0',
  tr_file tinyint(4) NOT NULL default '0',
  tr_paragraph_vert tinyint(4) NOT NULL default '1',
  tr_paragraph_horiz tinyint(4) NOT NULL default '1',
  tr_heading_link tinyint(4) NOT NULL default '0',
  tr_paragraph_picture tinyint(4) NOT NULL default '0',
  tr_bg_color tinyint(4) NOT NULL default '0',
  tr_move_horiz tinyint(4) NOT NULL default '0',
  tr_move_vert tinyint(4) NOT NULL default '0',
  tr_type varchar(20) NOT NULL default '',
  tr_name varchar(255) NOT NULL default '',
  tr_heading tinyint(4) NOT NULL default '0',
  tr_ingress tinyint(4) NOT NULL default '0',
  tr_mtext tinyint(4) NOT NULL default '0',
  tr_grade tinyint(4) NOT NULL default '0',
  tr_company tinyint(4) NOT NULL default '0',
  tr_artist tinyint(4) NOT NULL default '0',
  tr_reviewer tinyint(4) NOT NULL default '0',
  tr_teaser tinyint(4) NOT NULL default '0',
  PRIMARY KEY  (TemplateRestrictionsID)
) TYPE=ISAM PACK_KEYS=1;

CREATE TABLE PublishLink (
  PublishLinkID int(11) NOT NULL auto_increment,
  FileType varchar(20) NOT NULL default 'jpg',
  FileLink varchar(255) default NULL,
  Description varchar(255) NOT NULL default '',
  Lang char(2) NOT NULL default 'no',
  PublishContentParentID int(11) default NULL,
  publish set('Y','N') NOT NULL default 'N',
  PublishContentID int(11) NOT NULL default '0',
  FileSize int(11) NOT NULL default '0',
  FileWidth smallint(6) NOT NULL default '0',
  FileHeight smallint(6) NOT NULL default '0',
  ValidFrom datetime,
  ValidTo datetime,
  PRIMARY KEY  (PublishLinkID)
) TYPE=ISAM PACK_KEYS=1;


create table PublishCategory (
  PublishCategoryID int(11) NOT NULL auto_increment,
  Heading varchar(255),
  HeadingLink varchar(255),
  Description text,
  ValidFrom datetime,
  ValidTo datetime,
  Picture varchar(255),
  CreatedDate datetime,
  CreatedByID int,
  Keywords varchar(255),
  Lang char(2),
  CategoryType varchar(255),
  CategoryNotify varchar(255),
  Extranet smallint,
  Intranet smallint,
  Internet smallint,
  Template varchar(255),
  TS timestamp(14) NOT NULL,
  Active smallint(6) default '1', 
  PRIMARY KEY  (PublishCategoryID)
);

create table Setup (
  SetupID int(11) NOT NULL auto_increment,
  Name varchar(255),
  Value varchar(255),
  Module varchar(255),
  TS timestamp(14) NOT NULL,
  PRIMARY KEY  (SetupID),
  UNIQUE(Name)
);


create table PublishContent (
  PublishContentID int(11) NOT NULL auto_increment,
  Heading varchar(255),
  HeadingLink varchar(255),
  Ingress text,
  Teaser text,
  Description text,
  Css varchar(255),
  CompanyID int,
  Grade varchar(255),
  ReviewerPersonID int,
  Keywords varchar(255),
  Lang char(2),
  FileName varchar(255),
  FileDescription varchar(255),
  FileType varchar(255),
  FileAlign varchar(255),
  FileLink varchar(255),
  FileSize int,
  FileWidth int,
  FileHeight int,
  Template varchar(255),
  ContentNotify varchar(255),
  PublishContentParentID int,
  ChapterSortHorisontal int,
  ChapterSortVertical int,
  ChapterType varchar(255),
  ContentSource varchar(255),
  ContentBackground varchar(255),
  CreatedDate datetime,
  CreatedByID int,
  UpdatedByID int,
  Extranet smallint,
  Intranet smallint,
  Internet smallint,
  ValidFrom datetime,
  ValidTo datetime,
  Picture varchar(255),
  TS timestamp(14) NOT NULL,
  Active smallint(6) default '1', 
  PRIMARY KEY  (PublishContentID)
);

Create table PublishCatContStruct (
  PublishCategoryID int not null,
  PublishContentID int not null,
  ContentSort int,
  ClickPath varchar(255),
  TS timestamp,
  Active smallint(6) default '1', 
  PRIMARY KEY  (PublishCategoryID, PublishContentID)
);

Create table PublishCatCatStruct (
  PublishCategoryParentID int not null,
  PublishCategoryChildID int not null,
  CategorySort int,
  ClickPath varchar(255),
  TS timestamp,
  Active smallint(6) default '1', 
  PRIMARY KEY  (PublishCategoryParentID, PublishCategoryChildID)
);

alter table person add Language char(2) default 'en';

CREATE TABLE PersonEducation (
  PersonEducationID int(11) NOT NULL auto_increment,
  PersonID int(11),
  URL varchar(255),
  URLName varchar(255),
  Date date,
  Heading varchar(255),
  Description text,
  EducationInstitution varchar(255),
  CourceType varchar(255),
  TS timestamp(14) NOT NULL,
  Active smallint(6) default '1', 
  PRIMARY KEY  (PersonEducationID)
);

CREATE TABLE PersonHistory (
  PersonHistoryID int(11) NOT NULL auto_increment,
  PersonID int(11),
  URL varchar(255),
  URLName varchar(255),
  Date date,
  Heading varchar(255),
  Description text,
  TS timestamp(14) NOT NULL,
  Active smallint(6) default '1', 
  PRIMARY KEY  (PersonHistoryID)
);

CREATE TABLE PersonProjectReferences (
  PersonProjectReferencesID int(11) NOT NULL auto_increment,
  PersonID int(11),
  URL varchar(255),
  URLName varchar(255),
  Date date,
  Heading varchar(255),
  Description text,
  TS timestamp(14) NOT NULL,
  Active smallint(6) default '1', 
  PRIMARY KEY  (PersonProjectReferencesID)
);

CREATE TABLE PersonWorkExperience (
  PersonWorkExperienceID int(11) NOT NULL auto_increment,
  PersonID int(11),
  URL varchar(255),
  URLName varchar(255),
  DateFrom date,
  DateTo date,
  Duration varchar(255),
  EmployerCompanyID int,
  Heading varchar(255),
  Description text,
  TS timestamp(14) NOT NULL,
  Active smallint(6) default '1', 
  PRIMARY KEY  (PersonWorkExperienceID)
);

CREATE TABLE PersonKnowledge (
  PersonKnowledgeID int(11) NOT NULL auto_increment,
  PersonID int(11),
  URL varchar(255),
  URLName varchar(255),
  Heading varchar(255),
  Description text,
  Competence smallint,
  TS timestamp(14) NOT NULL,
  Active smallint(6) default '1', 
  PRIMARY KEY  (PersonKnowledgeID)
);

CREATE TABLE InvoiceLine (  
  InvoiceLineID int(11) NOT NULL auto_increment,
  InvoiceID int(11) default NULL,
  ProductNumber varchar(10) NOT NULL default '0',
  ProductName varchar(255) NOT NULL,
  ProductID int(11) default NULL,
  UnitCostPrice float(16,4) default NULL,
  UnitCustPrice float NOT NULL default '0',
  QuantityOrdered int(11) NOT NULL default '1',
  QuantityDelivered int(11) NOT NULL default '0',
  TS timestamp(14) NOT NULL,
  VAT double NOT NULL default '0',
  Active smallint(6) default '1', 
  PRIMARY KEY  (InvoiceLineID)
) TYPE=MyISAM;


CREATE TABLE `ReqFeatureLine` (

  `ReqFeatureLineID` int(11) NOT NULL auto_increment,

  `ReqFeatureLineNum` int(11) default NULL,

  `Subject` varchar(255) default '',

  `Description` varchar(255) default '',

  `Class` varchar(100) default '',

  `PlannedFinishedTime` date default '0000-00-00',

  `PlannedStartTime` date default '2003-08-25',

  `PlannedHours` varchar(100) default '',

  `PlannedSequence` varchar(100) NOT NULL default '',

  `CreatedDate` datetime default '9999-12-24 00:00:00',

  `ChangedDate` datetime default '9999-12-24 00:00:00',

  `TS` timestamp(14) NOT NULL,

  `DeadLineTime` datetime default '9999-12-24 00:00:00',

  `DoneTime` datetime default '9999-12-24 00:00:00',

  `AcceptedTime` datetime default '9999-12-24 00:00:00',

  `Active` smallint(6) default '1',

  `ReqLineNum` int(11) default NULL,

  `ReqCustID` varchar(255) default NULL,

  `ReqCustPriority1` varchar(255) default NULL,

  `ReqCustPriority2` varchar(255) default NULL,

  `ReqCustPriority3` varchar(255) default NULL,

  `ReqOurComment1` text,

  `ReqOurComment2` text,

  `ReqOurComment3` text,

  `ReqGeneralComment` text,

  `Status` varchar(255) default 'Implemented',

  PRIMARY KEY  (`ReqFeatureLineID`)

) TYPE=MyISAM;    



CREATE TABLE `ReqFeatureLine1` (

  `ReqFeatureLineID` int(11) NOT NULL auto_increment,

  `ReqFeatureLineNum` int(11) default NULL,

  `Subject` varchar(255) default '',

  `Description` varchar(255) default '',

  `Class` varchar(100) default '',

  `PlannedStartTime` date default '2003-08-25',

  `PlannedFinishedTime` date default '0000-00-00',

  `PlannedHours` varchar(100) default '',

  `PlannedSequence` varchar(100) default '',

  `Status` varchar(255) default 'Implementation started',

  `CreatedDate` datetime default '9999-12-24 00:00:00',

  `ChangedDate` datetime default '9999-12-24 00:00:00',

  `TS` timestamp(14) NOT NULL,

  `DeadLineTime` datetime default '9999-12-24 00:00:00',

  `DoneTime` datetime default '9999-12-24 00:00:00',

  `AcceptedTime` datetime default '9999-12-24 00:00:00',

  `Active` smallint(6) default '1',

  `ReqLineNum` int(11) default NULL,

  `ReqCustID` varchar(255) default NULL,

  `ReqCustPriority1` varchar(255) default NULL,

  `ReqCustPriority2` varchar(255) default NULL,

  `ReqCustPriority3` varchar(255) default NULL,

  `ReqOurComment1` text,

  `ReqOurComment2` text,

  `ReqOurComment3` text,

  `ReqGeneralComment` text,

  PRIMARY KEY  (`ReqFeatureLineID`)

) TYPE=MyISAM; 





CREATE TABLE `ReqHead` (

  `ReqHeadID` int(11) NOT NULL auto_increment,

  `ReqSerieID` int(11) default NULL,

  `ReqHeadNum` int(11) default NULL,

  `ReqStartTime` datetime default NULL,

  `ReqStopTime` datetime default NULL,

  `Subject` text,

  `Description` text,

  `ResponsiblePersonID` int(11) default NULL,

  `Active` smallint(6) default '1',

  PRIMARY KEY  (`ReqHeadID`)

) TYPE=MyISAM; 





CREATE TABLE `ReqHeadCompanyStruc` (

  `ReqHeadCompanyStrucID` int(11) NOT NULL auto_increment,

  `ReqHeadID` int(11) default NULL,

  `CompanyID` int(11) default NULL,

  `Status` varchar(15) default NULL,

  `ValidFrom` datetime default '0000-00-00 00:00:00',

  `ValidTo` datetime default '0000-00-00 00:00:00',

  `TS` timestamp(14) NOT NULL,

  `CreatedByPersonID` int(11) default NULL,

  `Active` smallint(6) default '1',

  PRIMARY KEY  (`ReqHeadCompanyStrucID`)

) TYPE=MyISAM; 





CREATE TABLE `ReqHeadpersontruc` (

  `ReqHeadpersontrucID` int(11) NOT NULL auto_increment,

  `ReqHeadID` int(11) default NULL,

  `PersonID` int(11) default NULL,

  `Status` varchar(15) default NULL,

  `ValidFrom` datetime default '0000-00-00 00:00:00',

  `ValidTo` datetime default '0000-00-00 00:00:00',

  `TS` timestamp(14) NOT NULL,

  `CreatedByPersonID` int(11) default NULL,

  `Active` smallint(6) default '1',

  PRIMARY KEY  (`ReqHeadpersontrucID`)

) TYPE=MyISAM; 





CREATE TABLE `ReqLine` (

  `ReqLineID` int(11) NOT NULL auto_increment,

  `ReqLineNum` int(11) default NULL,

  `Subject` text,

  `Description` text,

  `Status` varchar(50) default NULL,

  `CreatedDate` datetime default '9999-12-24 00:00:00',

  `ChangedDate` datetime default '9999-12-24 00:00:00',

  `TS` timestamp(14) NOT NULL,

  `DeadLineTime` datetime default '9999-12-24 00:00:00',

  `DoneTime` datetime default '9999-12-24 00:00:00',

  `AcceptedTime` datetime default '9999-12-24 00:00:00',

  `Active` smallint(6) default '1',

  `ReqHeadNum` int(11) default NULL,

  `ReqCustID` varchar(255) default NULL,

  `ReqCustPriority1` varchar(255) default NULL,

  `ReqCustPriority2` varchar(255) default NULL,

  `ReqCustPriority3` varchar(255) default NULL,

  `ReqCustComment1` text,

  `ReqOurComment1` text,

  `ReqOurComment2` text,

  `ReqOurComment3` text,

  `ReqGeneralComment` text,

  `ReqMeetingFeedback1` text,

  `ReqOurImplentation1` int(11) default NULL,

  `ReqOurImplentation2` int(11) default NULL,

  `ReqOurImplentation3` int(11) default NULL,

  PRIMARY KEY  (`ReqLineID`)

) TYPE=MyISAM; 





CREATE TABLE `ReqLinepersontruc` (

  `ReqLinepersontrucID` int(11) NOT NULL auto_increment,

  `ReqLinePersonID` int(11) default NULL,

  `ReqLineID` int(11) default NULL,

  `PersonID` int(11) default NULL,

  `Role` varchar(50) default NULL,

  `ValidFrom` datetime default NULL,

  `ValidTo` datetime default NULL,

  `TS` timestamp(14) NOT NULL,

  `Active` tinyint(4) default NULL,

  `CreatedByPersonID` int(11) default '0',

  PRIMARY KEY  (`ReqLinepersontrucID`)

) TYPE=MyISAM; 





CREATE TABLE `ReqLineStruc` (

  `ReqLineStrucID` int(11) NOT NULL auto_increment,

  `ReqHeadID` int(11) default NULL,

  `ReqLineID` int(11) default NULL,

  `TS` timestamp(14) NOT NULL,

  `ValidFrom` datetime default NULL,

  `ValidTo` datetime default NULL,

  `Active` smallint(6) default '1',

  PRIMARY KEY  (`ReqLineStrucID`),

  UNIQUE KEY `ReqHeadID` (`ReqHeadID`,`ReqLineID`)

) TYPE=MyISAM; 





CREATE TABLE `ReqSerie` (

  `ReqSerieID` int(11) NOT NULL auto_increment,

  `Subject` text,

  `Description` text,

  `ReqNumStart` int(11) default NULL,

  `ValidFrom` datetime default NULL,

  `ValidTo` datetime default NULL,

  `TS` timestamp(14) NOT NULL,

  `Active` smallint(6) default '1',

  `ResponsiblePersonID` int(11) default NULL,

  PRIMARY KEY  (`ReqSerieID`)

) TYPE=MyISAM; 





CREATE TABLE `ReqSerieCompanyStruc` (

  `ReqSerieCompanyStrucID` int(11) NOT NULL auto_increment,

  `ReqSerieID` int(11) default NULL,

  `CompanyID` int(11) default NULL,

  `Status` varchar(15) default NULL,

  `ValidFrom` datetime default NULL,

  `ValidTo` datetime default NULL,

  `TS` timestamp(14) NOT NULL,

  `CreatedByPersonID` int(11) default NULL,

  `Active` smallint(6) default '1',

  PRIMARY KEY  (`ReqSerieCompanyStrucID`)

) TYPE=MyISAM; 



 

CREATE TABLE `ReqSeriepersontruc` (

  `ReqSeriepersontrucID` int(11) NOT NULL auto_increment,

  `ReqSerieID` int(11) default NULL,

  `PersonID` int(11) default NULL,

  `Status` varchar(15) default NULL,

  `ValidFrom` datetime default NULL,

  `ValidTo` datetime default NULL,

  `TS` timestamp(14) NOT NULL,

  `CreatedByPersonID` int(11) default NULL,

  `Active` smallint(6) default '1',

  PRIMARY KEY  (`ReqSeriepersontrucID`)

) TYPE=MyISAM; 



#Advanced object handlign and usage



create table Voucher (

  VoucherID int not null auto_increment,

  VoucherType varchar(3),

  VoucherDate datetime,

  VoucherText varchar(255),

  VoucherPeriod smallint,

  AmountIn double,

  AmountOut double,

  GeneralLedgerAccountID int,

  Currency varchar(3),

  VatCode varchar(3),

  Quantity int,

  DepartmentID varchar(255),

  ProjectID varchar(255),

  DueDate datetime,

  Reference varchar(255),

  Description text,

  TS timestamp,

  CreatedByID int,

  primary key(VoucherID)

);



create table Journal (

  JournalID int not null auto_increment,

  GeneralLedgerID int,

  VoucherID int,

  JournalType varchar(3),

  JournalDate datetime,

  JournalText varchar(255),

  JournalPeriod smallint,

  AmountIn double,

  AmountOut double,

  GeneralLedgerAccountID int,

  Currency varchar(3),

  VatCode varchar(3),

  Quantity int,

  DepartmentID varchar(255),

  ProjectID varchar(255),

  DueDate datetime,

  Reference varchar(255),

  Description text,

  TS timestamp,

  CreatedByID int,

  primary key(JournalID)

);



create table GeneralLedger (

  GeneralLedgerID int not null auto_increment,

  AccountNumber int,

  AccountName int,

  AccountDescription text,

  TS timestamp,

  CreatedDate datetime,

  CreatedByID int,

  ValidFrom datetime,

  ValidTo datetime,

  primary key(GeneralLedgerID)

);



create table accountperiod (

  AccountPeriodID int not null auto_increment,

  Year int,

  Status smallint,

  TS timestamp,

  CreatedDate datetime,

  CreatedByID int,

  ValidFrom datetime,

  ValidTo datetime,

  primary key(AccountPeriodID)

);



alter table Company add VatInFull double;

alter table Company add VatInHalf double;

alter table Company add VatInNull double;

alter table Company add VatOutNull double;

alter table Company add VatOutHalf double;

alter table Company add VatOutFull double;



alter table Company add VatOutAccount varchar(255);

alter table Company add VatInAccount varchar(255);

alter table Company add VatInvestmentAccount varchar(255);

alter table Company add VatAccount varchar(255);

alter table Company add AccountSale varchar(255);

alter table Company add AccountInvestment varchar(255);



alter table Company add StandardAccountPlanTransfer smallint;



alter table Company add ShareValue int;

alter table Company add ShareNumber int;



alter table Company add FoundedDate datetime;



alter table Company add InterestRate double;

alter table Company add InterestDate datetime;



alter table Company add VoucherBankNumber int;

alter table Company add VoucherSaleNumber int;

alter table Company add VoucherBuyNumber int;

alter table Company add VoucherSalaryNumber int;

alter table Company add VoucherCashNumber int;



alter table person add SocialSecurityID varchar(255);

alter table person add ClassificationID int;

alter table person add ShareNumber int;

alter table person add ShareValue int;



alter table ObjectBatteryLine change BatteryLineID ObjectBatteryLineID int not null auto_increment;



alter table Object add TankVolume double;



create table ObjectSubStruct (

  ObjectSubStructID int not null auto_increment,

  ObjectID int,

  ObjectSubID int,

  ValidFrom datetime,

  ValidTo datetime,

  Active smallint default '1',

  primary key(ObjectSubStructID)

);



create table ObjectSub (

  ObjectSubID int not null auto_increment,

  ObjectID int,

  Name varchar(255),

  Description text,

  ValidFrom datetime,

  ValidTo datetime,

  Active smallint default '1',

  primary key(ObjectSubID)

);



create table Object (

  ObjectID int not null auto_increment,

  Name varchar(255),

  Description text,

  Price double,

  ValidFrom datetime,

  ValidTo datetime,

  Active smallint default '1',

  primary key(ObjectID)

);



alter table ObjectUsage drop FuelUsage;

alter table ObjectUsage drop Price;

alter table Object add FlightTime double;

alter table ObjectBatteryLine change BatteryID ObjectBatteryID int;

alter table ObjectBattery add BatteryType varchar(255);

alter table ObjectUsage change FlightLoggID ObjectUsageID int not null auto_increment;

alter table ObjectMaintenance change MaintenanceID ObjectMaintenanceID int not null auto_increment;

alter table ObjectBattery change BatteryID ObjectBatteryID int not null auto_increment;

alter table ObjectUsage add DriveDistance double;



alter table ObjectBattery add ObjectID int;

alter table ObjectUsage add ObjectID int;

alter table ObjectUsage add BatteryUsage double;

alter table Object add Category varchar(255);

alter table ObjectUsage add FuelUsage double;

rename table Battery to ObjectBattery;

rename table BatteryLine to ObjectBatteryLine;

rename table Maintenance to ObjectMaintenance;

rename table FlightLogg to ObjectUsage;



#CHanges for MÃ¸tereferat modul

alter table WorkOut  add Active smallint default '1';

alter table Maintenance  add Active smallint default '1';



alter table Licences add Active tinyint default '1'

alter table Exchange add Active smallint default '1';

alter table OrderExchangeStruc add Active smallint default '1';

alter table OrderCustLine add Active smallint default '1';

alter table OrderPurchaseLine add Active smallint default '1';



create table ProductProductnuStruc (

  ProductProductnuStrucID int not null auto_increment,

  ProductNumber varchar(255),

  ProductID int,

  TS timestamp,

  primary key(ProductProductnuStrucID)

);



create table OrderExchangeStruc (

  OrderExchangeStrucID int not null auto_increment,

  ExchangeID int,

  OrderID int,

  TS timestamp,

  primary key(OrderExchangeStrucID)

);



#Init verdier for menyer

INSERT INTO ConfMenues VALUES (1,'Type','Time for Time','Time for Time','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (2,'Type','Ikke fakturerbart','Ikke fakturerbart','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (3,'Type','Fastpris','Fastpris','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (4,'WhereIS','1','Pï¿½ jobb','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010825130255);

INSERT INTO ConfMenues VALUES (5,'WhereIS','2','Hjemmekontor','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010825130255);

INSERT INTO ConfMenues VALUES (6,'WhereIS','3','Gï¿½tt for dagen','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010825130255);

INSERT INTO ConfMenues VALUES (7,'WhereIS','4','Kundebesï¿½k','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010825130255);

INSERT INTO ConfMenues VALUES (8,'Type','Ferie','Ferie','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (9,'Type',' Fastpris',' Fastpris','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (10,'Type',' Avspasering',' Avspasering','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (11,'Type',' Rï¿½dgivning',' Rï¿½dgivning','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (12,'Type',' Redaksjonelt',' Redaksjonelt','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (13,'Type','Permisjon m/lï¿½nn','Permisjon m/lï¿½nn','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (14,'Type','Permisjon u/lï¿½nn','Permisjon u/lï¿½nn','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (15,'a','','','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (16,'a','','','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (17,'g','','','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (18,'WhereIS','5','tes','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010825130255);

INSERT INTO ConfMenues VALUES (19,'WhereIS','6','df','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010825130255);

INSERT INTO ConfMenues VALUES (20,'WhereIS','test','dshdsh','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010825130255);

INSERT INTO ConfMenues VALUES (21,'WhereIS','','','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010825130255);

INSERT INTO ConfMenues VALUES (22,'test','agla','bagla','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (23,'AccountCategory','AMS/BSU','AMS/BSU','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (24,'AccountCategory','Bensin','Bensin','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (25,'AccountCategory','Bil','Bil','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (26,'AccountCategory','Data','Data','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (27,'AccountCategory','Diverse','Diverse','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (28,'AccountCategory','Faktura','Faktura','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (29,'AccountCategory','Firma','Firma','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (30,'AccountCategory','Gebyr','Gebyr','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (31,'AccountCategory','Hobby','Hobby','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (32,'AccountCategory','Hus','Hus','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (33,'AccountCategory','Klï¿½r','Klï¿½r','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (34,'AccountCategory','Kontakt linser','Kontakt linser','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (35,'AccountCategory','Kontant uttak','Kontant uttak','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (36,'AccountCategory','Lege/Tannlege','Lege/Tannlege/Apotek','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010304093558);

INSERT INTO ConfMenues VALUES (37,'AccountCategory','Lï¿½nn','Lï¿½nn','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (38,'AccountCategory','Bil - lï¿½n','Bil - lï¿½n','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010304093517);

INSERT INTO ConfMenues VALUES (39,'AccountCategory','Mat','Mat','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (40,'AccountCategory','MC','MC','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (41,'AccountCategory','Overfï¿½ring','Overfï¿½ring','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (42,'AccountCategory','Kollektivt','Kollektivt','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (46,'AccountCategory','Husleie','Husleie','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (44,'AccountCategory','Skatt','Skatt','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (45,'AccountCategory','Ferie','Ferie','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (47,'AccountCategory','Visa','Visa - Bank','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (48,'AccountCategory','Giro','Giro - Bank','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (49,'AccountCategory','Varekjï¿½p','Varekjï¿½p - Bank','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (50,'AccountCategory','Kredit renter','Kredit renter','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (51,'AccountCategory','Strï¿½m','Strï¿½m','0000-00-00 00:00:00','0000-00-00 00:00:00',1,20010107123328);

INSERT INTO ConfMenues VALUES (52,'AccountCategory','Gaver','Gaver','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20010121170421);

INSERT INTO ConfMenues VALUES (53,'AccountCategory','Utlegg - Jobb','Utlegg - Jobb','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20010121170440);

INSERT INTO ConfMenues VALUES (54,'placement','top','top','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20010127151315);

INSERT INTO ConfMenues VALUES (55,'placement','bottom','bottom','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20010127151429);

INSERT INTO ConfMenues VALUES (56,'placement','right','right','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20010127151442);

INSERT INTO ConfMenues VALUES (57,'placement','left','left','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20010127151455);

INSERT INTO ConfMenues VALUES (58,'FieldInputType','hidden','hidden','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20010127151543);

INSERT INTO ConfMenues VALUES (59,'FieldInputType','submit','submit','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20010127151551);

INSERT INTO ConfMenues VALUES (60,'FieldInputType','checkbox','checkbox','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20010127151604);

INSERT INTO ConfMenues VALUES (61,'FieldInputType','radiobutton','radiobutton','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20010127151616);

INSERT INTO ConfMenues VALUES (62,'FieldInputType','text','text','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20010127151634);

INSERT INTO ConfMenues VALUES (63,'FieldInputType','select','select','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20010127151656);

INSERT INTO ConfMenues VALUES (64,'FieldInputType','textarea','textarea','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20010127151709);

INSERT INTO ConfMenues VALUES (65,'AccountCategory','Hus - Gjenstander','Hus - Gjenstander','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20010304093350);

INSERT INTO ConfMenues VALUES (66,'AccountCategory','Hus - Lï¿½n','Hus - Lï¿½n','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20010304093402);

INSERT INTO ConfMenues VALUES (67,'AccountCategory','Hus - Utgifter','Hus - Utgifter','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20010304093416);

INSERT INTO ConfMenues VALUES (68,'AccountCategory','Mat - Ute','Mat - Ute','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20010304093435);

INSERT INTO ConfMenues VALUES (69,'AccountCategory','Studie - Lï¿½n','Studie - Lï¿½n','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20010304093538);

INSERT INTO ConfMenues VALUES (70,'AccountCategory','Telefon - Fast','Telefon - Fast','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20010304093634);

INSERT INTO ConfMenues VALUES (71,'AccountCategory','Telefon - Mobil','Telefon - Mobil','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20010304093645);

INSERT INTO ConfMenues VALUES (72,'AccountCategory','Overfï¿½ring fra Monic','Overfï¿½ring fra Monic','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20010613203146);

INSERT INTO ConfMenues VALUES (73,'','','','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20010818102255);

INSERT INTO ConfMenues VALUES (74,'InvoiceStatus','sendt','Sendt','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20010818102317);

INSERT INTO ConfMenues VALUES (75,'InvoiceStatus','progress','In progress','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20010818102332);

INSERT INTO ConfMenues VALUES (76,'InvoiceStatus','payed','Payed','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20010818102342);

INSERT INTO ConfMenues VALUES (77,'InvoiceStatus','rip','Rip','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20010818102349);

INSERT INTO ConfMenues VALUES (78,'EventType','1','Mï¿½te','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20010825105343);

INSERT INTO ConfMenues VALUES (79,'EventType','2','Ring','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20010825105348);

INSERT INTO ConfMenues VALUES (80,'EventType','3','Husk','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20010825105404);

INSERT INTO ConfMenues VALUES (81,'ToDoPriority','1','Hï¿½y','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20010825105701);

INSERT INTO ConfMenues VALUES (82,'ToDoPriority','2','Lav','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20010825105708);

INSERT INTO ConfMenues VALUES (83,'ToDoPriority','3','Middels','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20010825105717);

INSERT INTO ConfMenues VALUES (84,'InvoiceStatus','test','tes','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20011112225348);

INSERT INTO ConfMenues VALUES (85,'AccountCategory','Software','Software','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20011118120101);

INSERT INTO ConfMenues VALUES (86,'AccountCategory','Fritid','Fritid','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20011118120111);

INSERT INTO ConfMenues VALUES (87,'progressCategory','request','Request','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20011118195451);

INSERT INTO ConfMenues VALUES (88,'progressCategory','reqspec','ReqSpec','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20011118195506);

INSERT INTO ConfMenues VALUES (89,'progressCategory','implementation','Implementation','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20011118195518);

INSERT INTO ConfMenues VALUES (90,'progressCategory','finished','Finished','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20011118195529);

INSERT INTO ConfMenues VALUES (91,'AccountCategory','Internett','Internett','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20011223125236);

INSERT INTO ConfMenues VALUES (92,'AccountCategory','Faglitteratur','Faglitteratur','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20020112163719);

INSERT INTO ConfMenues VALUES (93,'AccountCategory','Hus - Forsikring','Hus - Forsikring','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030114182111);

INSERT INTO ConfMenues VALUES (94,'AccountCategory','Hus -Kommunalt','Hus - Kommunalt','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030114182128);

INSERT INTO ConfMenues VALUES (95,'AccountCategory','Avis','Avis','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030114182139);

INSERT INTO ConfMenues VALUES (96,'AccountCategory','TV - lisens','TV - lisens','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030114182447);

INSERT INTO ConfMenues VALUES (97,'AccountCategory','Helse','Helse','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030114232113);

INSERT INTO ConfMenues VALUES (98,'ExchangeType','S.W.I.F.T','S.W.I.F.T','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030629183516);

INSERT INTO ConfMenues VALUES (99,'ExchangeType','Sjekk','Sjekk','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030629183524);

INSERT INTO ConfMenues VALUES (100,'ExchangePriority','Ordinï¿½r','Ordninï¿½r','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030629183554);

INSERT INTO ConfMenues VALUES (101,'ExchangePriority','Haster','Haster','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030629183600);

INSERT INTO ConfMenues VALUES (102,'ExchangeCost','Betaler dekker omkostninger i Norge og utlandet','Betaler dekker omkostninger i Norge og utlandet','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030629184003);

INSERT INTO ConfMenues VALUES (103,'ExchangeCost','Betaler dekker kun omkostninger i Norge','Betaler dekker kun omkostninger i Norge','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030629183943);

INSERT INTO ConfMenues VALUES (104,'ExchangeCost','Alle omkostninger dekkes av mottager','Alle omkostninger dekkes av mottager','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030629184022);

INSERT INTO ConfMenues VALUES ('','CompanyClassification','20','SpeditÃ¸r','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030611223730) ;

INSERT INTO ConfMenues VALUES ('','CompanyClassification','40','Kunde','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030611223735);

INSERT INTO ConfMenues VALUES ('','CompanyClassification','30','Partner','2001-01-01 00:00:00','9999-12-31 00:00:00',1,20030611223732); 



alter table ConfMenues change MenuName MenuName varchar(255) not null;

alter table ConfMenues change MenuValue MenuValue varchar(255);

alter table ConfMenues change MenuChoice MenuChoice varchar(255); 



CREATE TABLE pages (

  id int(11) NOT NULL auto_increment,

  heading varchar(255) default NULL,

  ingress text,

  mtext text,

  lang char(2) default 'no',

  ref varchar(10) default NULL,

  publish set('Y','N','R') NOT NULL default 'N',

  file_name varchar(100) default NULL,

  file_type varchar(10) default NULL,

  file_align varchar(10) NOT NULL default '',

  struc_parent int(11) default NULL,

  struc_description varchar(255) default NULL,

  struc_seq tinyint(4) NOT NULL default '0',

  struc_type varchar(20) NOT NULL default 'file',

  chapter_parent int(11) default NULL,

  chapter_ref int(11) default NULL,

  chapter_seq_vert tinyint(4) default NULL,

  chapter_background varchar(7) NOT NULL default '#999999',

  updated_by_user varchar(15) NOT NULL default '',

  updated_time datetime default NULL,

  updated_by_ip varchar(15) NOT NULL default '',

  created_by_user varchar(15) NOT NULL default '',

  created_time datetime NOT NULL default '0000-00-00 00:00:00',

  created_by_ip varchar(15) NOT NULL default '',

  chapter_seq_horiz tinyint(4) NOT NULL default '1',

  date_publish datetime NOT NULL default '0000-00-00 00:00:00',

  date_unpublish datetime NOT NULL default '9999-12-31 00:00:00',

  file_description varchar(255) default NULL,

  template varchar(25) NOT NULL default 'standard.php3',

  chapter_type varchar(20) NOT NULL default 'pages',

  file_link varchar(255) default NULL,

  notify_email varchar(255) default NULL,

  file_size int(11) NOT NULL default '0',

  file_width smallint(6) NOT NULL default '0',

  file_height smallint(6) NOT NULL default '0',

  heading_link varchar(255) default NULL,

  struc_path text NOT NULL,

  updated_by_user_agent varchar(255) default NULL,

  teaser text NOT NULL,

  Company varchar(255) NOT NULL default '',

  Artist varchar(255) NOT NULL default '',

  Grade varchar(255) NOT NULL default '',

  Reviewer varchar(255) NOT NULL default '',

  Keywords varchar(255) NOT NULL default '',

  ListWidthKeyword varchar(255) NOT NULL default '',

  PRIMARY KEY  (id)

) TYPE=ISAM PACK_KEYS=1;





alter table Company add ClassificationID int



create table Exchange (

  ExchangeID int not null auto_increment,

  TypeOfTransfer varchar(20),

  Priority varchar(20),

  BankCompanyID int,

  CustomerCompanyID int,

  ReceiverCompanyID int,

  Amount double,

  Currency varchar(3),

  City varchar(50),

  Date datetime,

  PersonID int,

  AccountReceiver varchar(15),

  AccountToCharge varchar(15),

  PaymentDetails text,

  PaymentDescription text,

  ExpencesPayed varchar(50),

  ExchangeRate double,

  TS timestamp,

  primary key(ExchangeID)

);





#############

#2003-06-10 - TE - To small order refs.

alter table Invoice change OrderRef OrderRef varchar(255); alter table OrderCust change OrderRef OrderRef varchar(255); alter table OrderPurchase change OrderRef OrderRef varchar(255);



#############

# Accomodate SAS requirements for employee number on Invoice

alter table person add ExternalID varchar(50) not null;

alter table person add CompanyDepartment varchar(255) not null;

#############



alter table ReferatSerieCompanyStruc add unique(ReferatSerieID, CompanyID);

alter table ReferatHeadCompanyStruc add unique(ReferatHeadID, CompanyID);

alter table ReferatLinepersontruc add unique(ReferatLineID, PersonID);

alter table ReferatSeriepersontruc add unique(ReferatSerieID, PersonID); 

alter table ReferatHeadpersontruc add unique(ReferatHeadID, PersonID);



alter table Product drop categoryID;

alter table BasketHead change SessionID SessionID varchar(40);

alter table Product add UnitsPerLayer int;

alter table Product add LayersPerPall int;

alter table BasketHead add RequiredDate datetime;

alter table BasketHead add Comment text;

alter table BasketHead add CustomerOrderRef varchar(50);

alter table BasketHead add TaxFree smallint;

alter table OrderCustLine add OrderCustLineNum int; 

alter table OrderPurchaseLine add OrderPurchaseLineNum int;

alter table OrderCust add InvoiceID int;



alter table OrderPurchase add InvoiceID int 



create table BasketLine (

BasketLineID int not null auto_increment,

BasketLineNum int,

BasketHeadID int,

ProductID int,

Quantity int,

PriceIn float,

PriceOut float,

MVA float,

TS timestamp,

primary key(BasketLineID)

);



create table BasketHead (

BasketHeadID int not null auto_increment,

PersonID int,

SessionID varchar(40),

BasketName varchar(50),

BasketType int,

Agreement int,

PriceInTotal float,

PriceOutTotal float,

Active set('on','off'),

TS timestamp,

primary key(BasketHeadID)

);



create table ProductCategory (

ProductCategoryID int not null auto_increment,

ProductCategoryName varchar(100),

ProductCategoryType int,

Sort int,

Active set('on','off'),

TS timestamp,

primary key(ProductCategoryID)

);



create table ProductCategoryStruc (

ProductID int not null,

ProductCategoryID int not null,

Active set('on','off'),

TS timestamp,

primary key(ProductID, ProductCategoryID)

);



create table CategoryCategoryStruc (

ProductCategoryParentID int not null,

ProductCategoryChildID int not null,

Active set('on','off'),

TS timestamp,

primary key(ProductCategoryParentID, ProductCategoryChildID)

);



create table Sync (

SyncID int not null auto_increment,

SyncName varchar(255),

SyncDescription text,

SyncLastDate datetime,

SyncHost varchar(255),

SyncDatabase varchar(255),

SyncUser varchar(255),

SyncPassword varchar(255),

SyncPath varchar(255),

Active tinyint,

TS timestamp,

primary key(SyncID)

);



create table SyncConfig (

SyncConfigID int not null auto_increment,

SyncID int,

SyncDirection set('from','to','bidirectional'),

SyncTable varchar(255),

TS timestamp,

primary key(SyncConfigID)

);



create table SyncLog (

SyncLogID int not null auto_increment,

SynchronisationID int,

SyncDate datetime,

Status smallint,

TS timestamp,

primary key(SyncLogID)

);



create table SyncTableLog (

SyncTableLogID int not null auto_increment,

SyncLogID int,

SyncConfigID int,

SyncNumRecords int,

SyncMessage varchar(255),

TS timestamp,

primary key(SyncTableLogID)

);



create table ReferatSerie (

ReferatSerieID int not null auto_increment,

Subject text,

Description text,

ReferatNumStart int,

ValidFrom datetime default '9999-12-24',

ValidTo datetime default '9999-12-24',

TS timestamp,

Active smallint default '1',

ResponsiblePersonID int,

primary key(ReferatSerieID)

);



create table ReferatHead (

ReferatHeadID int not null auto_increment,

ReferatSerieID int,

ReferatHeadNum int, 

ReferatStartTime datetime default '9999-12-24',

ReferatStopTime datetime default '9999-12-24',

Subject text,

Description text,

ResponsiblePersonID int,

Active smallint default '1',

primary key(ReferatHeadID)

);



create table ReferatLine (

ReferatLineID int not null auto_increment,

ReferatHeadNum int,

ReferatLineNum int,

Subject text,

Description text,

Status varchar(50),

CreatedDate datetime default '9999-12-24',

ChangedDate datetime default '9999-12-24',

TS timestamp,

DeadLineTime datetime  default '9999-12-24',

DoneTime datetime  default '9999-12-24',

AcceptedTime datetime default '9999-12-24',

Active smallint default '1',

primary key(ReferatLineID)

);



create table ReferatHeadpersontruc (

ReferatHeadpersontrucID int not null auto_increment,

ReferatHeadID int,

PersonID int,

Status varchar(15),

ValidFrom datetime default '9999-12-24',

ValidTo datetime default '9999-12-24',

TS timestamp,

CreatedByPersonID int,

Active smallint default '1',

primary key(ReferatHeadpersontrucID),

unique(ReferatHeadID, PersonID)

);



create table ReferatSeriepersontruc (

ReferatSeriepersontrucID int not null auto_increment,

ReferatSerieID int,

PersonID int,

Status varchar(15),

ValidFrom datetime default '9999-12-24',

ValidTo datetime default '9999-12-24',

TS timestamp,

CreatedByPersonID int,

Active smallint default '1',

AddedBy int,

primary key(ReferatSeriepersontrucID),

unique(ReferatSerieID, PersonID)

);



create table ReferatHeadCompanyStruc (

ReferatHeadCompanyStrucID int not null auto_increment,

ReferatHeadID int,

CompanyID int,

Status varchar(15),

ValidFrom datetime default '9999-12-24',

ValidTo datetime default '9999-12-24',

TS timestamp,

CreatedByPersonID int,

Active smallint default '1',

primary key(ReferatHeadCompanyStrucID),

unique(ReferatHeadID, CompanyID)

);



create table ReferatSerieCompanyStruc (

ReferatSerieCompanyStrucID int not null auto_increment,

ReferatSerieID int,

CompanyID int,

Status varchar(15),

ValidFrom datetime default '9999-12-24',

ValidTo datetime default '9999-12-24',

TS timestamp,

CreatedByPersonID int,

Active smallint default '1',

primary key(ReferatSerieCompanyStrucID),

unique(ReferatSerieID, CompanyID)

);



create table ReferatLinepersontruc (

ReferatLinepersontrucID int not null auto_increment,

ReferatLineID int,

PersonID int,

Role varchar(50),

ValidFrom datetime,

ValidTo datetime,

TS timestamp,

Active smallint default '1',

CreatedByPersonID int,

primary key(ReferatLinepersontrucID),

unique(ReferatLineID, PersonID)

);



create table ReferatLineStruc (

ReferatLineStrucID int not null auto_increment,

ReferatHeadID int,

ReferatLineID int,

TS timestamp,

ValidFrom datetime,

ValidTo datetime,

Active smallint default '1',

primary key(ReferatLineStrucID),

unique(ReferatHeadID, ReferatLineID)

);





#Full logging of all actions in the interface

create table Log (

LogID int not null auto_increment,

LoggedTime datetime,

PersonID int,

TableChanged varchar(50),

FieldChanged varchar(50),

ValueChanged varchar(50),

PrimaryKeyUsed varchar(50),

IPAddressUsed varchar(50),

UserAgent varchar(50),

primary key (LogID),

key (TableChanged)

);



alter table CalendarEvents add Subject varchar(255);

alter table Passwords add Alias varchar(50);

alter table Passwords add MembershipNumber varchar(50);

alter table Passwords add OrganizationName varchar(50);



create table FlightLogg (

FlightLoggID int not null auto_increment,

Time datetime,

Description text,

Price double,

FlightNumber varchar(20),

NumberOfFlights smallint,

Problems tinyint,

Active tinyint default '1',

Category varchar(40),

primary key(FlightLoggID)

);















alter table Invoice add InvoiceFromCompanyID int not null;

alter table Invoice add InvoiceType set('order','project');

alter table ProjectActivity add ProgressCategory set('request','reqspec','implementation', 'testing', 'finished');



create table PersonAddressStruct (

AdressID int not null,

PersonID int not null,

Active tinyint default '1',

primary key(AdressID)

);



create table CompanyAddressStruct (

AdressID int not null,

CompanyID int not null,

Active tinyint default '1',

primary key(AdressID)

);



create table Address (

AdressID int not null auto_increment,

AdressTye set('invoice', 'delivery', 'visit') not null,

Name varchar(100) not null,

Address varchar(60),

City varchar(15),

PostalCode varchar(10),

Country varchar(50),

ValidFrom date,

ValidTo date,

Activ tinyint default '1',

primary key(AdressID)

);



create table ProjectActivityPrice (

ProjectActivityID int not null,

FromDate date not null,

ToDate date not null,

Active tinyint,

Price double,

CostPrice double,

primary key(ProjectActivityID, FromDate)

);



alter table ProjectActivity add CostPrice double;



create table InvoiceProjectStruct (

InvoiceID int not null,

ProjectID int not null,

FromDate date,

ToDate date,

Active tinyint,

primary key(InvoiceID, ProjectID)

);





alter table ProjectActivity drop ResponsibleID;

alter table ProjectActivity add Price float(16,2);

alter table person add Css varchar(50);

alter table DriveDistance add DriveComment varchar(255);

alter table ExpenceLine add ExpencePersonID int;

alter table OrderCust add OrderComment text;

alter table OrderPurchase add OrderComment text;

alter table Invoice change InvoiceExpences InvoiceExpences float;

alter table Invoice change InvoiceTravelUsed InvoiceTravelUsed float;

alter table Invoice change InvoiceTravelTotal InvoiceTravelTotal float;

alter table Invoice change InvoiceHoursTotal InvoiceHoursTotal float;

alter table Invoice change InvoiceHoursUsed InvoiceHoursUsed float;

alter table Invoice add InvoiceTotalRounded float;

alter table DriveDistance add ProjectID int not null;

alter table AccountLine add ProjectID int not null;

alter table AccountLine add ProjecActivitytID int not null;

alter table Company change CompanyNumber CompanyNumber varchar(25) not null;



##############################################################



alter table ExpenceLine add ExpenceProjectID int not null;

alter table Maintenance add CreatedDate date;

alter table Maintenance add DrivePersonID int;





create table Activitypersontruct (

PersonID int not null,

ProjectActivityID int not null,

PersonRole int,

RoleDescription varchar(100),

Active tinyint,

Notify int,

DateCreated date,

CreatedByID int,

TS timestamp,

primary key(PersonID, ProjectActivityID)

);



create table ActivityDependencyStruct (

ProjectActivityParentID int not null,

ProjectActivityChildID int not null,

Active tinyint,

DateCreated date,

CreatedByID int,

TS timestamp,

primary key(ProjectActivityParentID, ProjectActivityChildID)

);



create table ActivityDocumentStruct (

ActivityDocumentID int not null auto_increment,

PersonID int,

Active tinyint,

Heading varchar(255),

Description text,

DateCreated date,

CreatedByID int,

TS timestamp,

primary key(ActivityDocumentID)

);



create table ActivityCommunicationStruct (

ActivityCommunicationID int not null auto_increment,

Active tinyint,

DateCreated date,

CreatedByID int,

TS timestamp,

Subject varchar(255),

Description text,

Toperson varchar(255),

MessageID varchar(50),

primary key(ActivityCommunicationID)

);



alter table person add ListLines int;

alter table Company add HourPrice double;

alter table Company add TravelPrice double;

create table PageDiscussion (

PageDiscussionID int not null auto_increment,

ChapterParent int,

DiscussionText text,

CreatedDate date,

CreatedByIP char(15),

FirstName varchar(255),

LastName varchar(255),

EMail varchar(255),

URL varchar(255),

Summary varchar(255),

Keyword varchar(255),

Ingress text,

Teaser text,

Active smallint,

TS timestamp,

lang char(2),

primary key (PageDiscussionID)

)



alter table Invoice add InvoiceType set('order','project')

alter table ProjectActivity add ProgressCategory set('request','reqspec','implementation', 'testing', 'finished')



create table PersonAddressStruct (

AdressID int not null,

PersonID int not null,

Active tinyint default '1',

primary key(AdressID)

);



create table CompanyAddressStruct (

AdressID int not null,

CompanyID int not null,

Active tinyint default '1',

primary key(AdressID)

);



create table Address (

AdressID int not null auto_increment,

AdressTye set('invoice', 'delivery', 'visit') not null,

Name varchar(100) not null,

Address varchar(60),

City varchar(15),

PostalCode varchar(10),

Country varchar(50),

ValidFrom date,

ValidTo date,

Activ tinyint default '1',

primary key(AdressID)

);



create table ProjectActivityPrice (

ProjectActivityID int not null,

FromDate date not null,

ToDate date not null,

Active tinyint,

Price double,

CostPrice double,

primary key(ProjectActivityID, FromDate)

);



alter table ProjectActivity add CostPrice double



create table InvoiceProjectStruct (

InvoiceID int not null,

ProjectID int not null,

FromDate date,

ToDate date,

Active tinyint,

primary key(InvoiceID, ProjectID)

);





alter table ProjectActivity drop ResponsibleID;

alter table ProjectActivity add Price float(16,2);

alter table person add Css varchar(50);

alter table DriveDistance add DriveComment varchar(255);

alter table ExpenceLine add ExpencePersonID int;

alter table OrderCust add OrderComment text;

alter table OrderPurchase add OrderComment text;

alter table Invoice change InvoiceExpences InvoiceExpences float;

alter table Invoice change InvoiceTravelUsed InvoiceTravelUsed float;

alter table Invoice change InvoiceTravelTotal InvoiceTravelTotal float;

alter table Invoice change InvoiceHoursTotal InvoiceHoursTotal float;

alter table Invoice change InvoiceHoursUsed InvoiceHoursUsed float;

alter table Invoice add InvoiceTotalRounded float;

alter table DriveDistance add ProjectID int not null;

alter table AccountLine add ProjectID int not null;

alter table AccountLine add ProjecActivitytID int not null;

alter table Company change CompanyNumber CompanyNumber varchar(25) not null;



##############################################################



alter table ExpenceLine add ExpenceProjectID int not null;

alter table Maintenance add CreatedDate date;

alter table Maintenance add DrivePersonID int;





create table Activitypersontruct (

PersonID int not null,

ProjectActivityID int not null,

PersonRole int,

RoleDescription varchar(100),

Active tinyint,

Notify int,

DateCreated date,

CreatedByID int,

TS timestamp,

primary key(PersonID, ProjectActivityID)

);



create table ActivityDependencyStruct (

ProjectActivityParentID int not null,

ProjectActivityChildID int not null,

Active tinyint,

DateCreated date,

CreatedByID int,

TS timestamp,

primary key(ProjectActivityParentID, ProjectActivityChildID)

);



create table ActivityDocumentStruct (

ActivityDocumentID int not null auto_increment,

PersonID int,

Active tinyint,

Heading varchar(255),

Description text,

DateCreated date,

CreatedByID int,

TS timestamp,

primary key(ActivityDocumentID)

);



create table ActivityCommunicationStruct (

ActivityCommunicationID int not null auto_increment,

Active tinyint,

DateCreated date,

CreatedByID int,

TS timestamp,

Subject varchar(255),

Description text,

Toperson varchar(255),

MessageID varchar(50),

primary key(ActivityCommunicationID)

);



alter table person add ListLines int;=======

alter table Invoice add InvoiceType set('order','project');

alter table ProjectActivity add ProgressCategory set('request','reqspec','implementation', 'testing', 'finished');



create table PersonAddressStruct (

AdressID int not null,

PersonID int not null,

Active tinyint default '1',

primary key(AdressID)

);



create table CompanyAddressStruct (

AdressID int not null,

CompanyID int not null,

Active tinyint default '1',

primary key(AdressID)

);



create table Address (

AdressID int not null auto_increment,

AdressTye set('invoice', 'delivery', 'visit') not null,

Name varchar(100) not null,

Address varchar(60),

City varchar(15),

PostalCode varchar(10),

Country varchar(50),

ValidFrom date,

ValidTo date,

Activ tinyint default '1',

primary key(AdressID)

);



create table ProjectActivityPrice (

ProjectActivityID int not null,

FromDate date not null,

ToDate date not null,

Active tinyint,

Price double,

CostPrice double,

primary key(ProjectActivityID, FromDate)

);



alter table ProjectActivity add CostPrice double;



create table InvoiceProjectStruct (

InvoiceID int not null,

ProjectID int not null,

FromDate date,

ToDate date,

Active tinyint,

primary key(InvoiceID, ProjectID)

);





alter table ProjectActivity drop ResponsibleID;

alter table ProjectActivity add Price float(16,2);

alter table person add Css varchar(50);

alter table DriveDistance add DriveComment varchar(255);

alter table ExpenceLine add ExpencePersonID int;

alter table OrderCust add OrderComment text;

alter table OrderPurchase add OrderComment text;

alter table Invoice change InvoiceExpences InvoiceExpences float;

alter table Invoice change InvoiceTravelUsed InvoiceTravelUsed float;

alter table Invoice change InvoiceTravelTotal InvoiceTravelTotal float;

alter table Invoice change InvoiceHoursTotal InvoiceHoursTotal float;

alter table Invoice change InvoiceHoursUsed InvoiceHoursUsed float;

alter table Invoice add InvoiceTotalRounded float;

alter table DriveDistance add ProjectID int not null;

alter table AccountLine add ProjectID int not null;

alter table AccountLine add ProjecActivitytID int not null;

alter table Company change CompanyNumber CompanyNumber varchar(25) not null;



##############################################################



alter table ExpenceLine add ExpenceProjectID int not null;

alter table Maintenance add CreatedDate date;

alter table Maintenance add DrivePersonID int;





create table Activitypersontruct (

PersonID int not null,

ProjectActivityID int not null,

PersonRole int,

RoleDescription varchar(100),

Active tinyint,

Notify int,

DateCreated date,

CreatedByID int,

TS timestamp,

primary key(PersonID, ProjectActivityID)

);



create table ActivityDependencyStruct (

ProjectActivityParentID int not null,

ProjectActivityChildID int not null,

Active tinyint,

DateCreated date,

CreatedByID int,

TS timestamp,

primary key(ProjectActivityParentID, ProjectActivityChildID)

);



create table ActivityDocumentStruct (

ActivityDocumentID int not null auto_increment,

PersonID int,

Active tinyint,

Heading varchar(255),

Description text,

DateCreated date,

CreatedByID int,

TS timestamp,

primary key(ActivityDocumentID)

);



create table ActivityCommunicationStruct (

ActivityCommunicationID int not null auto_increment,

Active tinyint,

DateCreated date,

CreatedByID int,

TS timestamp,

Subject varchar(255),

Description text,

Toperson varchar(255),

MessageID varchar(50),

primary key(ActivityCommunicationID)

);



alter table person add ListLines int;>>>>>>> 1.11




